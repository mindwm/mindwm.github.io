{"uid":"a14921619313ede0","name":"test_scenarios[file:features/7_mindwm_two_users_one_context.feature-MindWM two users one context function test-Create context tokyo[table_rows:[line: 20]]]","fullName":"features.7_mindwm_two_users_one_context#test_scenarios","historyId":"c8616413e45a2dc648a49302e112e0d4","time":{"start":1728387011820,"stop":1728387116269,"duration":104449},"status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"pytestconfig","time":{"start":1728385217311,"stop":1728385217311,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"steps_left","time":{"start":1728387011820,"stop":1728387011820,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"step_registry","time":{"start":1728387011821,"stop":1728387011821,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"step_registry","time":{"start":1728387011821,"stop":1728387011821,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"step_matcher","time":{"start":1728387011821,"stop":1728387011821,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"parameter_type_registry","time":{"start":1728387011821,"stop":1728387011821,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"kubeconfig","time":{"start":1728387011822,"stop":1728387011822,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"kubecontext","time":{"start":1728387011823,"stop":1728387011823,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"kube","time":{"start":1728387011823,"stop":1728387011829,"duration":6},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"ctx","time":{"start":1728387011940,"stop":1728387011940,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false}],"testStage":{"status":"passed","steps":[{"name":"Mindwm crd 'xcontexts' is exist","time":{"start":1728387011847,"stop":1728387011848,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"Mindwm crd 'xhosts' is exist","time":{"start":1728387011860,"stop":1728387011860,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"Mindwm crd 'xusers' is exist","time":{"start":1728387011868,"stop":1728387011868,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"Kubernetes node 'localhost' are True","time":{"start":1728387011927,"stop":1728387011927,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"Create context 'tokyo'","time":{"start":1728387011976,"stop":1728387011976,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"Knative service 'context-tokyo'/'iocontext' ready state is Unknown","time":{"start":1728387018136,"stop":1728387018136,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"Knative service 'context-tokyo'/'pong' ready state is Unknown","time":{"start":1728387018260,"stop":1728387018260,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"Knative service 'context-tokyo'/'kafka-cdc' ready state is Unknown","time":{"start":1728387018544,"stop":1728387018544,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"Statefulset 'tokyo-neo4j' in 'context-tokyo' is ready","time":{"start":1728387116267,"stop":1728387116267,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":9,"attachmentsCount":0,"hasContent":true},"afterStages":[],"labels":[{"name":"tag","value":"scenarios(PosixPath('/home/ci/mindwm-gitops/tests/mindwm_bdd/features/7_mindwm_two_users_one_context.feature'), filter_=None, encoding='utf-8', features_base_dir=None, features_base_url=None, features_path_type=<FeaturePathType.PATH: 'path'>, features_mimetype=None, parser_type=None, parse_args=Args(args=(), kwargs={}), locators=())"},{"name":"tag","value":"@pytest.mark.usefixtures('feature', 'scenario', 'feature_source')"},{"name":"tag","value":"pytest_bdd_scenario"},{"name":"tag","value":"mindwm_test"},{"name":"tag","value":"mindwm_two_users_one_context"},{"name":"tag","value":"namespace(create=False, name='default')"},{"name":"parentSuite","value":"features"},{"name":"suite","value":"7_mindwm_two_users_one_context"},{"name":"host","value":"localhost"},{"name":"thread","value":"4145-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"features.7_mindwm_two_users_one_context"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"feature","value":"Feature(gherkin_document=GherkinDocument(uri='file:features/7_mindwm_two_users_one_context.feature', feature=Feature(location=Location(line=3, column=1), tags=[Tag(location=Location(line=1, column=1), name='@mindwm_two_users_one_context', id='801'), Tag(location=Location(line=2, column=1), name='@mindwm_test', id='802')], language='en', keyword='Feature', name='MindWM two users one context function test', description='', children=[FeatureChild(rule=None, background=Background(location=Location(line=4, column=3), keyword='Background', name='', description='', steps=[Step(location=Location(line=5, column=5), keyword='Given ', keyword_type=<KeywordType.context: 'Context'>, text='A MindWM environment', doc_string=None, data_table=None, id='736'), Step(location=Location(line=6, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='all nodes in Kubernetes are ready', doc_string=None, data_table=None, id='737')], id='738'), scenario=None), FeatureChild(rule=None, background=None, scenario=Scenario(location=Location(line=8, column=3), tags=[], keyword='Scenario', name='Create context <context>', description='', steps=[Step(location=Location(line=9, column=5), keyword='When ', keyword_type=<KeywordType.action: 'Action'>, text='God creates a MindWM context with the name \"<context>\"', doc_string=None, data_table=None, id='739'), Step(location=Location(line=10, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the context should be ready and operable', doc_string=None, data_table=None, id='740'), Step(location=Location(line=12, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the following knative services are in a ready state in the \"context-<context>\" namespace', doc_string=None, data_table=DataTable(location=Location(line=13, column=7), rows=[TableRow(location=Location(line=13, column=7), cells=[TableCell(location=Location(line=13, column=9), value='Knative service name')], id='741'), TableRow(location=Location(line=14, column=7), cells=[TableCell(location=Location(line=14, column=9), value='iocontext')], id='742'), TableRow(location=Location(line=15, column=7), cells=[TableCell(location=Location(line=15, column=9), value='pong')], id='743'), TableRow(location=Location(line=16, column=7), cells=[TableCell(location=Location(line=16, column=9), value='kafka-cdc')], id='744')]), id='745'), Step(location=Location(line=17, column=5), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='statefulset \"<context>-neo4j\" in namespace \"context-<context>\" is in ready state', doc_string=None, data_table=None, id='746')], examples=[Examples(location=Location(line=18, column=5), tags=[], keyword='Examples', name='', description='', table_header=TableRow(location=Location(line=19, column=5), cells=[TableCell(location=Location(line=19, column=7), value='context')], id='747'), table_body=[TableRow(location=Location(line=20, column=5), cells=[TableCell(location=Location(line=20, column=7), value='tokyo')], id='748')], id='749')], id='750')), FeatureChild(rule=None, background=None, scenario=Scenario(location=Location(line=22, column=3), tags=[], keyword='Scenario', name='Create <username> and connects it to <context>', description='', steps=[Step(location=Location(line=23, column=5), keyword='When ', keyword_type=<KeywordType.action: 'Action'>, text='God creates a MindWM user resource with the name \"<username>\" and connects it to the context \"<context>\"', doc_string=None, data_table=None, id='751'), Step(location=Location(line=24, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the user resource should be ready and operable', doc_string=None, data_table=None, id='752')], examples=[Examples(location=Location(line=25, column=5), tags=[], keyword='Examples', name='', description='', table_header=TableRow(location=Location(line=26, column=5), cells=[TableCell(location=Location(line=26, column=7), value='context'), TableCell(location=Location(line=26, column=17), value='username')], id='753'), table_body=[TableRow(location=Location(line=27, column=5), cells=[TableCell(location=Location(line=27, column=7), value='tokyo'), TableCell(location=Location(line=27, column=17), value='godzilla')], id='754'), TableRow(location=Location(line=28, column=5), cells=[TableCell(location=Location(line=28, column=7), value='tokyo'), TableCell(location=Location(line=28, column=17), value='tengu')], id='755')], id='756')], id='757')), FeatureChild(rule=None, background=None, scenario=Scenario(location=Location(line=29, column=3), tags=[], keyword='Scenario', name='Create <host> resource and connects it to <username> user', description='', steps=[Step(location=Location(line=30, column=5), keyword='When ', keyword_type=<KeywordType.action: 'Action'>, text='God creates a MindWM host resource with the name \"<host>\" and connects it to the user \"<username>\"', doc_string=None, data_table=None, id='758'), Step(location=Location(line=31, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the host resource should be ready and operable', doc_string=None, data_table=None, id='759')], examples=[Examples(location=Location(line=33, column=5), tags=[], keyword='Examples', name='', description='', table_header=TableRow(location=Location(line=34, column=5), cells=[TableCell(location=Location(line=34, column=7), value='username'), TableCell(location=Location(line=34, column=18), value='host')], id='760'), table_body=[TableRow(location=Location(line=35, column=5), cells=[TableCell(location=Location(line=35, column=7), value='godzilla'), TableCell(location=Location(line=35, column=18), value='laptop')], id='761'), TableRow(location=Location(line=36, column=5), cells=[TableCell(location=Location(line=36, column=7), value='tengu'), TableCell(location=Location(line=36, column=18), value='tablet')], id='762')], id='763')], id='764')), FeatureChild(rule=None, background=None, scenario=Scenario(location=Location(line=38, column=3), tags=[], keyword='Scenario', name='Send iodocument via nats host: <host>, user: <username> and check that second user received graph update', description='', steps=[Step(location=Location(line=39, column=5), keyword='When ', keyword_type=<KeywordType.action: 'Action'>, text='God creates a new cloudevent', doc_string=None, data_table=None, id='765'), Step(location=Location(line=40, column=7), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='God starts reading message from NATS topic \">\"', doc_string=None, data_table=None, id='766'), Step(location=Location(line=41, column=7), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='sets cloudevent header \"ce-subject\" to \"id\"', doc_string=None, data_table=None, id='767'), Step(location=Location(line=42, column=7), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='sets cloudevent header \"ce-type\" to \"org.mindwm.v1.iodocument\"', doc_string=None, data_table=None, id='768'), Step(location=Location(line=43, column=7), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='sets cloudevent header \"ce-source\" to \"org.mindwm.<src_user>.<src_host>.L3RtcC90bXV4LTEwMDAvZGVmYXVsdA==.8d839f82-79da-11ef-bc9f-f74fac7543ac.23.36.iodocument\"', doc_string=None, data_table=None, id='769'), Step(location=Location(line=44, column=7), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='sends cloudevent to nats topic \"org.mindwm.<src_user>.<src_host>.L3RtcC90bXV4LTEwMDAvZGVmYXVsdA==.8d839f82-79da-11ef-bc9f-f74fac7543ac.23.36.iodocument\"', doc_string=DocString(location=Location(line=45, column=7), media_type=None, content='{\\n  \"input\": \"id\",\\n  \"output\": \"uid=1000(pion) gid=1000(pion) groups=1000(pion),4(adm),100(users),112(tmux),988(docker)\",\\n  \"ps1\": \"pion@mindwm-stg1:~/work/dev/mindwm-manager$\",\\n  \"type\": \"org.mindwm.v1.iodocument\"\\n} ', delimiter='\"\"\"'), data_table=None, id='770'), Step(location=Location(line=54, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the following deployments are in a ready state in the \"context-<context>\" namespace', doc_string=None, data_table=DataTable(location=Location(line=55, column=7), rows=[TableRow(location=Location(line=55, column=7), cells=[TableCell(location=Location(line=55, column=9), value='Deployment name')], id='771'), TableRow(location=Location(line=56, column=7), cells=[TableCell(location=Location(line=56, column=9), value='iocontext-00001-deployment')], id='772'), TableRow(location=Location(line=57, column=7), cells=[TableCell(location=Location(line=57, column=9), value='kafka-cdc-00001-deployment')], id='773')]), id='774'), Step(location=Location(line=59, column=5), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='a cloudevent with type == \"org.mindwm.v1.graph.created\" should have been received from the NATS topic \"user-<dst_user>.<dst_host>-host-broker-kne-trigger._knative\"', doc_string=None, data_table=None, id='775')], examples=[Examples(location=Location(line=61, column=5), tags=[], keyword='Examples', name='', description='', table_header=TableRow(location=Location(line=62, column=5), cells=[TableCell(location=Location(line=62, column=7), value='context'), TableCell(location=Location(line=62, column=17), value='src_user'), TableCell(location=Location(line=62, column=28), value='src_host'), TableCell(location=Location(line=62, column=39), value='dst_user'), TableCell(location=Location(line=62, column=50), value='dst_host')], id='776'), table_body=[TableRow(location=Location(line=63, column=5), cells=[TableCell(location=Location(line=63, column=7), value='tokyo'), TableCell(location=Location(line=63, column=17), value='godzilla'), TableCell(location=Location(line=63, column=28), value='laptop'), TableCell(location=Location(line=63, column=39), value='tengu'), TableCell(location=Location(line=63, column=50), value='tablet')], id='777'), TableRow(location=Location(line=64, column=5), cells=[TableCell(location=Location(line=64, column=7), value='tokyo'), TableCell(location=Location(line=64, column=17), value='tengu'), TableCell(location=Location(line=64, column=28), value='tablet'), TableCell(location=Location(line=64, column=39), value='godzilla'), TableCell(location=Location(line=64, column=50), value='laptop')], id='778')], id='779')], id='780')), FeatureChild(rule=None, background=None, scenario=Scenario(location=Location(line=67, column=3), tags=[], keyword='Scenario', name='Cleanup <host> host for <username> username', description='', steps=[Step(location=Location(line=69, column=5), keyword='When ', keyword_type=<KeywordType.action: 'Action'>, text='God deletes the MindWM host resource \"<host>\"', doc_string=None, data_table=None, id='781'), Step(location=Location(line=70, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the host \"<host>\" should be deleted', doc_string=None, data_table=None, id='782')], examples=[Examples(location=Location(line=72, column=5), tags=[], keyword='Examples', name='', description='', table_header=TableRow(location=Location(line=73, column=5), cells=[TableCell(location=Location(line=73, column=7), value='username'), TableCell(location=Location(line=73, column=18), value='host')], id='783'), table_body=[TableRow(location=Location(line=74, column=5), cells=[TableCell(location=Location(line=74, column=7), value='godzilla'), TableCell(location=Location(line=74, column=18), value='laptop')], id='784'), TableRow(location=Location(line=75, column=5), cells=[TableCell(location=Location(line=75, column=7), value='tengu'), TableCell(location=Location(line=75, column=18), value='tablet')], id='785')], id='786')], id='787')), FeatureChild(rule=None, background=None, scenario=Scenario(location=Location(line=77, column=3), tags=[], keyword='Scenario', name='Cleanup <username> username', description='', steps=[Step(location=Location(line=78, column=5), keyword='When ', keyword_type=<KeywordType.action: 'Action'>, text='God deletes the MindWM user resource \"<username>\"', doc_string=None, data_table=None, id='788'), Step(location=Location(line=79, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the user \"<username>\" should be deleted', doc_string=None, data_table=None, id='789')], examples=[Examples(location=Location(line=81, column=5), tags=[], keyword='Examples', name='', description='', table_header=TableRow(location=Location(line=82, column=5), cells=[TableCell(location=Location(line=82, column=7), value='username')], id='790'), table_body=[TableRow(location=Location(line=83, column=5), cells=[TableCell(location=Location(line=83, column=7), value='godzilla')], id='791'), TableRow(location=Location(line=84, column=5), cells=[TableCell(location=Location(line=84, column=7), value='tengu')], id='792')], id='793')], id='794')), FeatureChild(rule=None, background=None, scenario=Scenario(location=Location(line=86, column=3), tags=[], keyword='Scenario', name='Cleanup <context> context', description='', steps=[Step(location=Location(line=87, column=5), keyword='When ', keyword_type=<KeywordType.action: 'Action'>, text='God deletes the MindWM context resource \"<context>\"', doc_string=None, data_table=None, id='795'), Step(location=Location(line=88, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the context \"<context>\" should be deleted', doc_string=None, data_table=None, id='796')], examples=[Examples(location=Location(line=90, column=5), tags=[], keyword='Examples', name='', description='', table_header=TableRow(location=Location(line=91, column=5), cells=[TableCell(location=Location(line=91, column=7), value='context')], id='797'), table_body=[TableRow(location=Location(line=92, column=5), cells=[TableCell(location=Location(line=92, column=7), value='tokyo')], id='798')], id='799')], id='800'))]), comments=[]), uri='file:features/7_mindwm_two_users_one_context.feature', filename='/home/ci/mindwm-gitops/tests/mindwm_bdd/features/7_mindwm_two_users_one_context.feature', registry={'801': Tag(location=Location(line=1, column=1), name='@mindwm_two_users_one_context', id='801'), '802': Tag(location=Location(line=2, column=1), name='@mindwm_test', id='802'), '738': Background(location=Location(line=4, column=3), keyword='Background', name='', description='', steps=[Step(location=Location(line=5, column=5), keyword='Given ', keyword_type=<KeywordType.context: 'Context'>, text='A MindWM environment', doc_string=None, data_table=None, id='736'), Step(location=Location(line=6, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='all nodes in Kubernetes are ready', doc_string=None, data_table=None, id='737')], id='738'), '736': Step(location=Location(line=5, column=5), keyword='Given ', keyword_type=<KeywordType.context: 'Context'>, text='A MindWM environment', doc_string=None, data_table=None, id='736'), '737': Step(location=Location(line=6, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='all nodes in Kubernetes are ready', doc_string=None, data_table=None, id='737'), '750': Scenario(location=Location(line=8, column=3), tags=[], keyword='Scenario', name='Create context <context>', description='', steps=[Step(location=Location(line=9, column=5), keyword='When ', keyword_type=<KeywordType.action: 'Action'>, text='God creates a MindWM context with the name \"<context>\"', doc_string=None, data_table=None, id='739'), Step(location=Location(line=10, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the context should be ready and operable', doc_string=None, data_table=None, id='740'), Step(location=Location(line=12, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the following knative services are in a ready state in the \"context-<context>\" namespace', doc_string=None, data_table=DataTable(location=Location(line=13, column=7), rows=[TableRow(location=Location(line=13, column=7), cells=[TableCell(location=Location(line=13, column=9), value='Knative service name')], id='741'), TableRow(location=Location(line=14, column=7), cells=[TableCell(location=Location(line=14, column=9), value='iocontext')], id='742'), TableRow(location=Location(line=15, column=7), cells=[TableCell(location=Location(line=15, column=9), value='pong')], id='743'), TableRow(location=Location(line=16, column=7), cells=[TableCell(location=Location(line=16, column=9), value='kafka-cdc')], id='744')]), id='745'), Step(location=Location(line=17, column=5), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='statefulset \"<context>-neo4j\" in namespace \"context-<context>\" is in ready state', doc_string=None, data_table=None, id='746')], examples=[Examples(location=Location(line=18, column=5), tags=[], keyword='Examples', name='', description='', table_header=TableRow(location=Location(line=19, column=5), cells=[TableCell(location=Location(line=19, column=7), value='context')], id='747'), table_body=[TableRow(location=Location(line=20, column=5), cells=[TableCell(location=Location(line=20, column=7), value='tokyo')], id='748')], id='749')], id='750'), '739': Step(location=Location(line=9, column=5), keyword='When ', keyword_type=<KeywordType.action: 'Action'>, text='God creates a MindWM context with the name \"<context>\"', doc_string=None, data_table=None, id='739'), '740': Step(location=Location(line=10, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the context should be ready and operable', doc_string=None, data_table=None, id='740'), '745': Step(location=Location(line=12, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the following knative services are in a ready state in the \"context-<context>\" namespace', doc_string=None, data_table=DataTable(location=Location(line=13, column=7), rows=[TableRow(location=Location(line=13, column=7), cells=[TableCell(location=Location(line=13, column=9), value='Knative service name')], id='741'), TableRow(location=Location(line=14, column=7), cells=[TableCell(location=Location(line=14, column=9), value='iocontext')], id='742'), TableRow(location=Location(line=15, column=7), cells=[TableCell(location=Location(line=15, column=9), value='pong')], id='743'), TableRow(location=Location(line=16, column=7), cells=[TableCell(location=Location(line=16, column=9), value='kafka-cdc')], id='744')]), id='745'), '746': Step(location=Location(line=17, column=5), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='statefulset \"<context>-neo4j\" in namespace \"context-<context>\" is in ready state', doc_string=None, data_table=None, id='746'), '749': Examples(location=Location(line=18, column=5), tags=[], keyword='Examples', name='', description='', table_header=TableRow(location=Location(line=19, column=5), cells=[TableCell(location=Location(line=19, column=7), value='context')], id='747'), table_body=[TableRow(location=Location(line=20, column=5), cells=[TableCell(location=Location(line=20, column=7), value='tokyo')], id='748')], id='749'), '747': TableRow(location=Location(line=19, column=5), cells=[TableCell(location=Location(line=19, column=7), value='context')], id='747'), '748': TableRow(location=Location(line=20, column=5), cells=[TableCell(location=Location(line=20, column=7), value='tokyo')], id='748'), '757': Scenario(location=Location(line=22, column=3), tags=[], keyword='Scenario', name='Create <username> and connects it to <context>', description='', steps=[Step(location=Location(line=23, column=5), keyword='When ', keyword_type=<KeywordType.action: 'Action'>, text='God creates a MindWM user resource with the name \"<username>\" and connects it to the context \"<context>\"', doc_string=None, data_table=None, id='751'), Step(location=Location(line=24, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the user resource should be ready and operable', doc_string=None, data_table=None, id='752')], examples=[Examples(location=Location(line=25, column=5), tags=[], keyword='Examples', name='', description='', table_header=TableRow(location=Location(line=26, column=5), cells=[TableCell(location=Location(line=26, column=7), value='context'), TableCell(location=Location(line=26, column=17), value='username')], id='753'), table_body=[TableRow(location=Location(line=27, column=5), cells=[TableCell(location=Location(line=27, column=7), value='tokyo'), TableCell(location=Location(line=27, column=17), value='godzilla')], id='754'), TableRow(location=Location(line=28, column=5), cells=[TableCell(location=Location(line=28, column=7), value='tokyo'), TableCell(location=Location(line=28, column=17), value='tengu')], id='755')], id='756')], id='757'), '751': Step(location=Location(line=23, column=5), keyword='When ', keyword_type=<KeywordType.action: 'Action'>, text='God creates a MindWM user resource with the name \"<username>\" and connects it to the context \"<context>\"', doc_string=None, data_table=None, id='751'), '752': Step(location=Location(line=24, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the user resource should be ready and operable', doc_string=None, data_table=None, id='752'), '756': Examples(location=Location(line=25, column=5), tags=[], keyword='Examples', name='', description='', table_header=TableRow(location=Location(line=26, column=5), cells=[TableCell(location=Location(line=26, column=7), value='context'), TableCell(location=Location(line=26, column=17), value='username')], id='753'), table_body=[TableRow(location=Location(line=27, column=5), cells=[TableCell(location=Location(line=27, column=7), value='tokyo'), TableCell(location=Location(line=27, column=17), value='godzilla')], id='754'), TableRow(location=Location(line=28, column=5), cells=[TableCell(location=Location(line=28, column=7), value='tokyo'), TableCell(location=Location(line=28, column=17), value='tengu')], id='755')], id='756'), '753': TableRow(location=Location(line=26, column=5), cells=[TableCell(location=Location(line=26, column=7), value='context'), TableCell(location=Location(line=26, column=17), value='username')], id='753'), '754': TableRow(location=Location(line=27, column=5), cells=[TableCell(location=Location(line=27, column=7), value='tokyo'), TableCell(location=Location(line=27, column=17), value='godzilla')], id='754'), '755': TableRow(location=Location(line=28, column=5), cells=[TableCell(location=Location(line=28, column=7), value='tokyo'), TableCell(location=Location(line=28, column=17), value='tengu')], id='755'), '764': Scenario(location=Location(line=29, column=3), tags=[], keyword='Scenario', name='Create <host> resource and connects it to <username> user', description='', steps=[Step(location=Location(line=30, column=5), keyword='When ', keyword_type=<KeywordType.action: 'Action'>, text='God creates a MindWM host resource with the name \"<host>\" and connects it to the user \"<username>\"', doc_string=None, data_table=None, id='758'), Step(location=Location(line=31, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the host resource should be ready and operable', doc_string=None, data_table=None, id='759')], examples=[Examples(location=Location(line=33, column=5), tags=[], keyword='Examples', name='', description='', table_header=TableRow(location=Location(line=34, column=5), cells=[TableCell(location=Location(line=34, column=7), value='username'), TableCell(location=Location(line=34, column=18), value='host')], id='760'), table_body=[TableRow(location=Location(line=35, column=5), cells=[TableCell(location=Location(line=35, column=7), value='godzilla'), TableCell(location=Location(line=35, column=18), value='laptop')], id='761'), TableRow(location=Location(line=36, column=5), cells=[TableCell(location=Location(line=36, column=7), value='tengu'), TableCell(location=Location(line=36, column=18), value='tablet')], id='762')], id='763')], id='764'), '758': Step(location=Location(line=30, column=5), keyword='When ', keyword_type=<KeywordType.action: 'Action'>, text='God creates a MindWM host resource with the name \"<host>\" and connects it to the user \"<username>\"', doc_string=None, data_table=None, id='758'), '759': Step(location=Location(line=31, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the host resource should be ready and operable', doc_string=None, data_table=None, id='759'), '763': Examples(location=Location(line=33, column=5), tags=[], keyword='Examples', name='', description='', table_header=TableRow(location=Location(line=34, column=5), cells=[TableCell(location=Location(line=34, column=7), value='username'), TableCell(location=Location(line=34, column=18), value='host')], id='760'), table_body=[TableRow(location=Location(line=35, column=5), cells=[TableCell(location=Location(line=35, column=7), value='godzilla'), TableCell(location=Location(line=35, column=18), value='laptop')], id='761'), TableRow(location=Location(line=36, column=5), cells=[TableCell(location=Location(line=36, column=7), value='tengu'), TableCell(location=Location(line=36, column=18), value='tablet')], id='762')], id='763'), '760': TableRow(location=Location(line=34, column=5), cells=[TableCell(location=Location(line=34, column=7), value='username'), TableCell(location=Location(line=34, column=18), value='host')], id='760'), '761': TableRow(location=Location(line=35, column=5), cells=[TableCell(location=Location(line=35, column=7), value='godzilla'), TableCell(location=Location(line=35, column=18), value='laptop')], id='761'), '762': TableRow(location=Location(line=36, column=5), cells=[TableCell(location=Location(line=36, column=7), value='tengu'), TableCell(location=Location(line=36, column=18), value='tablet')], id='762'), '780': Scenario(location=Location(line=38, column=3), tags=[], keyword='Scenario', name='Send iodocument via nats host: <host>, user: <username> and check that second user received graph update', description='', steps=[Step(location=Location(line=39, column=5), keyword='When ', keyword_type=<KeywordType.action: 'Action'>, text='God creates a new cloudevent', doc_string=None, data_table=None, id='765'), Step(location=Location(line=40, column=7), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='God starts reading message from NATS topic \">\"', doc_string=None, data_table=None, id='766'), Step(location=Location(line=41, column=7), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='sets cloudevent header \"ce-subject\" to \"id\"', doc_string=None, data_table=None, id='767'), Step(location=Location(line=42, column=7), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='sets cloudevent header \"ce-type\" to \"org.mindwm.v1.iodocument\"', doc_string=None, data_table=None, id='768'), Step(location=Location(line=43, column=7), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='sets cloudevent header \"ce-source\" to \"org.mindwm.<src_user>.<src_host>.L3RtcC90bXV4LTEwMDAvZGVmYXVsdA==.8d839f82-79da-11ef-bc9f-f74fac7543ac.23.36.iodocument\"', doc_string=None, data_table=None, id='769'), Step(location=Location(line=44, column=7), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='sends cloudevent to nats topic \"org.mindwm.<src_user>.<src_host>.L3RtcC90bXV4LTEwMDAvZGVmYXVsdA==.8d839f82-79da-11ef-bc9f-f74fac7543ac.23.36.iodocument\"', doc_string=DocString(location=Location(line=45, column=7), media_type=None, content='{\\n  \"input\": \"id\",\\n  \"output\": \"uid=1000(pion) gid=1000(pion) groups=1000(pion),4(adm),100(users),112(tmux),988(docker)\",\\n  \"ps1\": \"pion@mindwm-stg1:~/work/dev/mindwm-manager$\",\\n  \"type\": \"org.mindwm.v1.iodocument\"\\n} ', delimiter='\"\"\"'), data_table=None, id='770'), Step(location=Location(line=54, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the following deployments are in a ready state in the \"context-<context>\" namespace', doc_string=None, data_table=DataTable(location=Location(line=55, column=7), rows=[TableRow(location=Location(line=55, column=7), cells=[TableCell(location=Location(line=55, column=9), value='Deployment name')], id='771'), TableRow(location=Location(line=56, column=7), cells=[TableCell(location=Location(line=56, column=9), value='iocontext-00001-deployment')], id='772'), TableRow(location=Location(line=57, column=7), cells=[TableCell(location=Location(line=57, column=9), value='kafka-cdc-00001-deployment')], id='773')]), id='774'), Step(location=Location(line=59, column=5), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='a cloudevent with type == \"org.mindwm.v1.graph.created\" should have been received from the NATS topic \"user-<dst_user>.<dst_host>-host-broker-kne-trigger._knative\"', doc_string=None, data_table=None, id='775')], examples=[Examples(location=Location(line=61, column=5), tags=[], keyword='Examples', name='', description='', table_header=TableRow(location=Location(line=62, column=5), cells=[TableCell(location=Location(line=62, column=7), value='context'), TableCell(location=Location(line=62, column=17), value='src_user'), TableCell(location=Location(line=62, column=28), value='src_host'), TableCell(location=Location(line=62, column=39), value='dst_user'), TableCell(location=Location(line=62, column=50), value='dst_host')], id='776'), table_body=[TableRow(location=Location(line=63, column=5), cells=[TableCell(location=Location(line=63, column=7), value='tokyo'), TableCell(location=Location(line=63, column=17), value='godzilla'), TableCell(location=Location(line=63, column=28), value='laptop'), TableCell(location=Location(line=63, column=39), value='tengu'), TableCell(location=Location(line=63, column=50), value='tablet')], id='777'), TableRow(location=Location(line=64, column=5), cells=[TableCell(location=Location(line=64, column=7), value='tokyo'), TableCell(location=Location(line=64, column=17), value='tengu'), TableCell(location=Location(line=64, column=28), value='tablet'), TableCell(location=Location(line=64, column=39), value='godzilla'), TableCell(location=Location(line=64, column=50), value='laptop')], id='778')], id='779')], id='780'), '765': Step(location=Location(line=39, column=5), keyword='When ', keyword_type=<KeywordType.action: 'Action'>, text='God creates a new cloudevent', doc_string=None, data_table=None, id='765'), '766': Step(location=Location(line=40, column=7), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='God starts reading message from NATS topic \">\"', doc_string=None, data_table=None, id='766'), '767': Step(location=Location(line=41, column=7), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='sets cloudevent header \"ce-subject\" to \"id\"', doc_string=None, data_table=None, id='767'), '768': Step(location=Location(line=42, column=7), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='sets cloudevent header \"ce-type\" to \"org.mindwm.v1.iodocument\"', doc_string=None, data_table=None, id='768'), '769': Step(location=Location(line=43, column=7), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='sets cloudevent header \"ce-source\" to \"org.mindwm.<src_user>.<src_host>.L3RtcC90bXV4LTEwMDAvZGVmYXVsdA==.8d839f82-79da-11ef-bc9f-f74fac7543ac.23.36.iodocument\"', doc_string=None, data_table=None, id='769'), '770': Step(location=Location(line=44, column=7), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='sends cloudevent to nats topic \"org.mindwm.<src_user>.<src_host>.L3RtcC90bXV4LTEwMDAvZGVmYXVsdA==.8d839f82-79da-11ef-bc9f-f74fac7543ac.23.36.iodocument\"', doc_string=DocString(location=Location(line=45, column=7), media_type=None, content='{\\n  \"input\": \"id\",\\n  \"output\": \"uid=1000(pion) gid=1000(pion) groups=1000(pion),4(adm),100(users),112(tmux),988(docker)\",\\n  \"ps1\": \"pion@mindwm-stg1:~/work/dev/mindwm-manager$\",\\n  \"type\": \"org.mindwm.v1.iodocument\"\\n} ', delimiter='\"\"\"'), data_table=None, id='770'), '774': Step(location=Location(line=54, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the following deployments are in a ready state in the \"context-<context>\" namespace', doc_string=None, data_table=DataTable(location=Location(line=55, column=7), rows=[TableRow(location=Location(line=55, column=7), cells=[TableCell(location=Location(line=55, column=9), value='Deployment name')], id='771'), TableRow(location=Location(line=56, column=7), cells=[TableCell(location=Location(line=56, column=9), value='iocontext-00001-deployment')], id='772'), TableRow(location=Location(line=57, column=7), cells=[TableCell(location=Location(line=57, column=9), value='kafka-cdc-00001-deployment')], id='773')]), id='774'), '775': Step(location=Location(line=59, column=5), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='a cloudevent with type == \"org.mindwm.v1.graph.created\" should have been received from the NATS topic \"user-<dst_user>.<dst_host>-host-broker-kne-trigger._knative\"', doc_string=None, data_table=None, id='775'), '779': Examples(location=Location(line=61, column=5), tags=[], keyword='Examples', name='', description='', table_header=TableRow(location=Location(line=62, column=5), cells=[TableCell(location=Location(line=62, column=7), value='context'), TableCell(location=Location(line=62, column=17), value='src_user'), TableCell(location=Location(line=62, column=28), value='src_host'), TableCell(location=Location(line=62, column=39), value='dst_user'), TableCell(location=Location(line=62, column=50), value='dst_host')], id='776'), table_body=[TableRow(location=Location(line=63, column=5), cells=[TableCell(location=Location(line=63, column=7), value='tokyo'), TableCell(location=Location(line=63, column=17), value='godzilla'), TableCell(location=Location(line=63, column=28), value='laptop'), TableCell(location=Location(line=63, column=39), value='tengu'), TableCell(location=Location(line=63, column=50), value='tablet')], id='777'), TableRow(location=Location(line=64, column=5), cells=[TableCell(location=Location(line=64, column=7), value='tokyo'), TableCell(location=Location(line=64, column=17), value='tengu'), TableCell(location=Location(line=64, column=28), value='tablet'), TableCell(location=Location(line=64, column=39), value='godzilla'), TableCell(location=Location(line=64, column=50), value='laptop')], id='778')], id='779'), '776': TableRow(location=Location(line=62, column=5), cells=[TableCell(location=Location(line=62, column=7), value='context'), TableCell(location=Location(line=62, column=17), value='src_user'), TableCell(location=Location(line=62, column=28), value='src_host'), TableCell(location=Location(line=62, column=39), value='dst_user'), TableCell(location=Location(line=62, column=50), value='dst_host')], id='776'), '777': TableRow(location=Location(line=63, column=5), cells=[TableCell(location=Location(line=63, column=7), value='tokyo'), TableCell(location=Location(line=63, column=17), value='godzilla'), TableCell(location=Location(line=63, column=28), value='laptop'), TableCell(location=Location(line=63, column=39), value='tengu'), TableCell(location=Location(line=63, column=50), value='tablet')], id='777'), '778': TableRow(location=Location(line=64, column=5), cells=[TableCell(location=Location(line=64, column=7), value='tokyo'), TableCell(location=Location(line=64, column=17), value='tengu'), TableCell(location=Location(line=64, column=28), value='tablet'), TableCell(location=Location(line=64, column=39), value='godzilla'), TableCell(location=Location(line=64, column=50), value='laptop')], id='778'), '787': Scenario(location=Location(line=67, column=3), tags=[], keyword='Scenario', name='Cleanup <host> host for <username> username', description='', steps=[Step(location=Location(line=69, column=5), keyword='When ', keyword_type=<KeywordType.action: 'Action'>, text='God deletes the MindWM host resource \"<host>\"', doc_string=None, data_table=None, id='781'), Step(location=Location(line=70, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the host \"<host>\" should be deleted', doc_string=None, data_table=None, id='782')], examples=[Examples(location=Location(line=72, column=5), tags=[], keyword='Examples', name='', description='', table_header=TableRow(location=Location(line=73, column=5), cells=[TableCell(location=Location(line=73, column=7), value='username'), TableCell(location=Location(line=73, column=18), value='host')], id='783'), table_body=[TableRow(location=Location(line=74, column=5), cells=[TableCell(location=Location(line=74, column=7), value='godzilla'), TableCell(location=Location(line=74, column=18), value='laptop')], id='784'), TableRow(location=Location(line=75, column=5), cells=[TableCell(location=Location(line=75, column=7), value='tengu'), TableCell(location=Location(line=75, column=18), value='tablet')], id='785')], id='786')], id='787'), '781': Step(location=Location(line=69, column=5), keyword='When ', keyword_type=<KeywordType.action: 'Action'>, text='God deletes the MindWM host resource \"<host>\"', doc_string=None, data_table=None, id='781'), '782': Step(location=Location(line=70, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the host \"<host>\" should be deleted', doc_string=None, data_table=None, id='782'), '786': Examples(location=Location(line=72, column=5), tags=[], keyword='Examples', name='', description='', table_header=TableRow(location=Location(line=73, column=5), cells=[TableCell(location=Location(line=73, column=7), value='username'), TableCell(location=Location(line=73, column=18), value='host')], id='783'), table_body=[TableRow(location=Location(line=74, column=5), cells=[TableCell(location=Location(line=74, column=7), value='godzilla'), TableCell(location=Location(line=74, column=18), value='laptop')], id='784'), TableRow(location=Location(line=75, column=5), cells=[TableCell(location=Location(line=75, column=7), value='tengu'), TableCell(location=Location(line=75, column=18), value='tablet')], id='785')], id='786'), '783': TableRow(location=Location(line=73, column=5), cells=[TableCell(location=Location(line=73, column=7), value='username'), TableCell(location=Location(line=73, column=18), value='host')], id='783'), '784': TableRow(location=Location(line=74, column=5), cells=[TableCell(location=Location(line=74, column=7), value='godzilla'), TableCell(location=Location(line=74, column=18), value='laptop')], id='784'), '785': TableRow(location=Location(line=75, column=5), cells=[TableCell(location=Location(line=75, column=7), value='tengu'), TableCell(location=Location(line=75, column=18), value='tablet')], id='785'), '794': Scenario(location=Location(line=77, column=3), tags=[], keyword='Scenario', name='Cleanup <username> username', description='', steps=[Step(location=Location(line=78, column=5), keyword='When ', keyword_type=<KeywordType.action: 'Action'>, text='God deletes the MindWM user resource \"<username>\"', doc_string=None, data_table=None, id='788'), Step(location=Location(line=79, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the user \"<username>\" should be deleted', doc_string=None, data_table=None, id='789')], examples=[Examples(location=Location(line=81, column=5), tags=[], keyword='Examples', name='', description='', table_header=TableRow(location=Location(line=82, column=5), cells=[TableCell(location=Location(line=82, column=7), value='username')], id='790'), table_body=[TableRow(location=Location(line=83, column=5), cells=[TableCell(location=Location(line=83, column=7), value='godzilla')], id='791'), TableRow(location=Location(line=84, column=5), cells=[TableCell(location=Location(line=84, column=7), value='tengu')], id='792')], id='793')], id='794'), '788': Step(location=Location(line=78, column=5), keyword='When ', keyword_type=<KeywordType.action: 'Action'>, text='God deletes the MindWM user resource \"<username>\"', doc_string=None, data_table=None, id='788'), '789': Step(location=Location(line=79, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the user \"<username>\" should be deleted', doc_string=None, data_table=None, id='789'), '793': Examples(location=Location(line=81, column=5), tags=[], keyword='Examples', name='', description='', table_header=TableRow(location=Location(line=82, column=5), cells=[TableCell(location=Location(line=82, column=7), value='username')], id='790'), table_body=[TableRow(location=Location(line=83, column=5), cells=[TableCell(location=Location(line=83, column=7), value='godzilla')], id='791'), TableRow(location=Location(line=84, column=5), cells=[TableCell(location=Location(line=84, column=7), value='tengu')], id='792')], id='793'), '790': TableRow(location=Location(line=82, column=5), cells=[TableCell(location=Location(line=82, column=7), value='username')], id='790'), '791': TableRow(location=Location(line=83, column=5), cells=[TableCell(location=Location(line=83, column=7), value='godzilla')], id='791'), '792': TableRow(location=Location(line=84, column=5), cells=[TableCell(location=Location(line=84, column=7), value='tengu')], id='792'), '800': Scenario(location=Location(line=86, column=3), tags=[], keyword='Scenario', name='Cleanup <context> context', description='', steps=[Step(location=Location(line=87, column=5), keyword='When ', keyword_type=<KeywordType.action: 'Action'>, text='God deletes the MindWM context resource \"<context>\"', doc_string=None, data_table=None, id='795'), Step(location=Location(line=88, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the context \"<context>\" should be deleted', doc_string=None, data_table=None, id='796')], examples=[Examples(location=Location(line=90, column=5), tags=[], keyword='Examples', name='', description='', table_header=TableRow(location=Location(line=91, column=5), cells=[TableCell(location=Location(line=91, column=7), value='context')], id='797'), table_body=[TableRow(location=Location(line=92, column=5), cells=[TableCell(location=Location(line=92, column=7), value='tokyo')], id='798')], id='799')], id='800'), '795': Step(location=Location(line=87, column=5), keyword='When ', keyword_type=<KeywordType.action: 'Action'>, text='God deletes the MindWM context resource \"<context>\"', doc_string=None, data_table=None, id='795'), '796': Step(location=Location(line=88, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the context \"<context>\" should be deleted', doc_string=None, data_table=None, id='796'), '799': Examples(location=Location(line=90, column=5), tags=[], keyword='Examples', name='', description='', table_header=TableRow(location=Location(line=91, column=5), cells=[TableCell(location=Location(line=91, column=7), value='context')], id='797'), table_body=[TableRow(location=Location(line=92, column=5), cells=[TableCell(location=Location(line=92, column=7), value='tokyo')], id='798')], id='799'), '797': TableRow(location=Location(line=91, column=5), cells=[TableCell(location=Location(line=91, column=7), value='context')], id='797'), '798': TableRow(location=Location(line=92, column=5), cells=[TableCell(location=Location(line=92, column=7), value='tokyo')], id='798')}, pickles=[Pickle(id='809', uri='file:features/7_mindwm_two_users_one_context.feature', name='Create context tokyo', language='en', steps=[PickleStep(argument=None, ast_node_ids=['736'], id='803', type=<Type.context: 'Context'>, text='A MindWM environment'), PickleStep(argument=None, ast_node_ids=['737'], id='804', type=<Type.outcome: 'Outcome'>, text='all nodes in Kubernetes are ready'), PickleStep(argument=None, ast_node_ids=['739', '748'], id='805', type=<Type.action: 'Action'>, text='God creates a MindWM context with the name \"tokyo\"'), PickleStep(argument=None, ast_node_ids=['740', '748'], id='806', type=<Type.outcome: 'Outcome'>, text='the context should be ready and operable'), PickleStep(argument=PickleStepArgument(doc_string=None, data_table=PickleTable(rows=[PickleTableRow(cells=[PickleTableCell(value='Knative service name')]), PickleTableRow(cells=[PickleTableCell(value='iocontext')]), PickleTableRow(cells=[PickleTableCell(value='pong')]), PickleTableRow(cells=[PickleTableCell(value='kafka-cdc')])])), ast_node_ids=['745', '748'], id='807', type=<Type.outcome: 'Outcome'>, text='the following knative services are in a ready state in the \"context-tokyo\" namespace'), PickleStep(argument=None, ast_node_ids=['746', '748'], id='808', type=<Type.outcome: 'Outcome'>, text='statefulset \"tokyo-neo4j\" in namespace \"context-tokyo\" is in ready state')], tags=[PickleTag(name='@mindwm_two_users_one_context', ast_node_id='801'), PickleTag(name='@mindwm_test', ast_node_id='802')], ast_node_ids=['750', '748']), Pickle(id='814', uri='file:features/7_mindwm_two_users_one_context.feature', name='Create godzilla and connects it to tokyo', language='en', steps=[PickleStep(argument=None, ast_node_ids=['736'], id='810', type=<Type.context: 'Context'>, text='A MindWM environment'), PickleStep(argument=None, ast_node_ids=['737'], id='811', type=<Type.outcome: 'Outcome'>, text='all nodes in Kubernetes are ready'), PickleStep(argument=None, ast_node_ids=['751', '754'], id='812', type=<Type.action: 'Action'>, text='God creates a MindWM user resource with the name \"godzilla\" and connects it to the context \"tokyo\"'), PickleStep(argument=None, ast_node_ids=['752', '754'], id='813', type=<Type.outcome: 'Outcome'>, text='the user resource should be ready and operable')], tags=[PickleTag(name='@mindwm_two_users_one_context', ast_node_id='801'), PickleTag(name='@mindwm_test', ast_node_id='802')], ast_node_ids=['757', '754']), Pickle(id='819', uri='file:features/7_mindwm_two_users_one_context.feature', name='Create tengu and connects it to tokyo', language='en', steps=[PickleStep(argument=None, ast_node_ids=['736'], id='815', type=<Type.context: 'Context'>, text='A MindWM environment'), PickleStep(argument=None, ast_node_ids=['737'], id='816', type=<Type.outcome: 'Outcome'>, text='all nodes in Kubernetes are ready'), PickleStep(argument=None, ast_node_ids=['751', '755'], id='817', type=<Type.action: 'Action'>, text='God creates a MindWM user resource with the name \"tengu\" and connects it to the context \"tokyo\"'), PickleStep(argument=None, ast_node_ids=['752', '755'], id='818', type=<Type.outcome: 'Outcome'>, text='the user resource should be ready and operable')], tags=[PickleTag(name='@mindwm_two_users_one_context', ast_node_id='801'), PickleTag(name='@mindwm_test', ast_node_id='802')], ast_node_ids=['757', '755']), Pickle(id='824', uri='file:features/7_mindwm_two_users_one_context.feature', name='Create laptop resource and connects it to godzilla user', language='en', steps=[PickleStep(argument=None, ast_node_ids=['736'], id='820', type=<Type.context: 'Context'>, text='A MindWM environment'), PickleStep(argument=None, ast_node_ids=['737'], id='821', type=<Type.outcome: 'Outcome'>, text='all nodes in Kubernetes are ready'), PickleStep(argument=None, ast_node_ids=['758', '761'], id='822', type=<Type.action: 'Action'>, text='God creates a MindWM host resource with the name \"laptop\" and connects it to the user \"godzilla\"'), PickleStep(argument=None, ast_node_ids=['759', '761'], id='823', type=<Type.outcome: 'Outcome'>, text='the host resource should be ready and operable')], tags=[PickleTag(name='@mindwm_two_users_one_context', ast_node_id='801'), PickleTag(name='@mindwm_test', ast_node_id='802')], ast_node_ids=['764', '761']), Pickle(id='829', uri='file:features/7_mindwm_two_users_one_context.feature', name='Create tablet resource and connects it to tengu user', language='en', steps=[PickleStep(argument=None, ast_node_ids=['736'], id='825', type=<Type.context: 'Context'>, text='A MindWM environment'), PickleStep(argument=None, ast_node_ids=['737'], id='826', type=<Type.outcome: 'Outcome'>, text='all nodes in Kubernetes are ready'), PickleStep(argument=None, ast_node_ids=['758', '762'], id='827', type=<Type.action: 'Action'>, text='God creates a MindWM host resource with the name \"tablet\" and connects it to the user \"tengu\"'), PickleStep(argument=None, ast_node_ids=['759', '762'], id='828', type=<Type.outcome: 'Outcome'>, text='the host resource should be ready and operable')], tags=[PickleTag(name='@mindwm_two_users_one_context', ast_node_id='801'), PickleTag(name='@mindwm_test', ast_node_id='802')], ast_node_ids=['764', '762']), Pickle(id='840', uri='file:features/7_mindwm_two_users_one_context.feature', name='Send iodocument via nats host: <host>, user: <username> and check that second user received graph update', language='en', steps=[PickleStep(argument=None, ast_node_ids=['736'], id='830', type=<Type.context: 'Context'>, text='A MindWM environment'), PickleStep(argument=None, ast_node_ids=['737'], id='831', type=<Type.outcome: 'Outcome'>, text='all nodes in Kubernetes are ready'), PickleStep(argument=None, ast_node_ids=['765', '777'], id='832', type=<Type.action: 'Action'>, text='God creates a new cloudevent'), PickleStep(argument=None, ast_node_ids=['766', '777'], id='833', type=<Type.action: 'Action'>, text='God starts reading message from NATS topic \">\"'), PickleStep(argument=None, ast_node_ids=['767', '777'], id='834', type=<Type.action: 'Action'>, text='sets cloudevent header \"ce-subject\" to \"id\"'), PickleStep(argument=None, ast_node_ids=['768', '777'], id='835', type=<Type.action: 'Action'>, text='sets cloudevent header \"ce-type\" to \"org.mindwm.v1.iodocument\"'), PickleStep(argument=None, ast_node_ids=['769', '777'], id='836', type=<Type.action: 'Action'>, text='sets cloudevent header \"ce-source\" to \"org.mindwm.godzilla.laptop.L3RtcC90bXV4LTEwMDAvZGVmYXVsdA==.8d839f82-79da-11ef-bc9f-f74fac7543ac.23.36.iodocument\"'), PickleStep(argument=PickleStepArgument(doc_string=PickleDocString(media_type=None, content='{\\n  \"input\": \"id\",\\n  \"output\": \"uid=1000(pion) gid=1000(pion) groups=1000(pion),4(adm),100(users),112(tmux),988(docker)\",\\n  \"ps1\": \"pion@mindwm-stg1:~/work/dev/mindwm-manager$\",\\n  \"type\": \"org.mindwm.v1.iodocument\"\\n} '), data_table=None), ast_node_ids=['770', '777'], id='837', type=<Type.action: 'Action'>, text='sends cloudevent to nats topic \"org.mindwm.godzilla.laptop.L3RtcC90bXV4LTEwMDAvZGVmYXVsdA==.8d839f82-79da-11ef-bc9f-f74fac7543ac.23.36.iodocument\"'), PickleStep(argument=PickleStepArgument(doc_string=None, data_table=PickleTable(rows=[PickleTableRow(cells=[PickleTableCell(value='Deployment name')]), PickleTableRow(cells=[PickleTableCell(value='iocontext-00001-deployment')]), PickleTableRow(cells=[PickleTableCell(value='kafka-cdc-00001-deployment')])])), ast_node_ids=['774', '777'], id='838', type=<Type.outcome: 'Outcome'>, text='the following deployments are in a ready state in the \"context-tokyo\" namespace'), PickleStep(argument=None, ast_node_ids=['775', '777'], id='839', type=<Type.outcome: 'Outcome'>, text='a cloudevent with type == \"org.mindwm.v1.graph.created\" should have been received from the NATS topic \"user-tengu.tablet-host-broker-kne-trigger._knative\"')], tags=[PickleTag(name='@mindwm_two_users_one_context', ast_node_id='801'), PickleTag(name='@mindwm_test', ast_node_id='802')], ast_node_ids=['780', '777']), Pickle(id='851', uri='file:features/7_mindwm_two_users_one_context.feature', name='Send iodocument via nats host: <host>, user: <username> and check that second user received graph update', language='en', steps=[PickleStep(argument=None, ast_node_ids=['736'], id='841', type=<Type.context: 'Context'>, text='A MindWM environment'), PickleStep(argument=None, ast_node_ids=['737'], id='842', type=<Type.outcome: 'Outcome'>, text='all nodes in Kubernetes are ready'), PickleStep(argument=None, ast_node_ids=['765', '778'], id='843', type=<Type.action: 'Action'>, text='God creates a new cloudevent'), PickleStep(argument=None, ast_node_ids=['766', '778'], id='844', type=<Type.action: 'Action'>, text='God starts reading message from NATS topic \">\"'), PickleStep(argument=None, ast_node_ids=['767', '778'], id='845', type=<Type.action: 'Action'>, text='sets cloudevent header \"ce-subject\" to \"id\"'), PickleStep(argument=None, ast_node_ids=['768', '778'], id='846', type=<Type.action: 'Action'>, text='sets cloudevent header \"ce-type\" to \"org.mindwm.v1.iodocument\"'), PickleStep(argument=None, ast_node_ids=['769', '778'], id='847', type=<Type.action: 'Action'>, text='sets cloudevent header \"ce-source\" to \"org.mindwm.tengu.tablet.L3RtcC90bXV4LTEwMDAvZGVmYXVsdA==.8d839f82-79da-11ef-bc9f-f74fac7543ac.23.36.iodocument\"'), PickleStep(argument=PickleStepArgument(doc_string=PickleDocString(media_type=None, content='{\\n  \"input\": \"id\",\\n  \"output\": \"uid=1000(pion) gid=1000(pion) groups=1000(pion),4(adm),100(users),112(tmux),988(docker)\",\\n  \"ps1\": \"pion@mindwm-stg1:~/work/dev/mindwm-manager$\",\\n  \"type\": \"org.mindwm.v1.iodocument\"\\n} '), data_table=None), ast_node_ids=['770', '778'], id='848', type=<Type.action: 'Action'>, text='sends cloudevent to nats topic \"org.mindwm.tengu.tablet.L3RtcC90bXV4LTEwMDAvZGVmYXVsdA==.8d839f82-79da-11ef-bc9f-f74fac7543ac.23.36.iodocument\"'), PickleStep(argument=PickleStepArgument(doc_string=None, data_table=PickleTable(rows=[PickleTableRow(cells=[PickleTableCell(value='Deployment name')]), PickleTableRow(cells=[PickleTableCell(value='iocontext-00001-deployment')]), PickleTableRow(cells=[PickleTableCell(value='kafka-cdc-00001-deployment')])])), ast_node_ids=['774', '778'], id='849', type=<Type.outcome: 'Outcome'>, text='the following deployments are in a ready state in the \"context-tokyo\" namespace'), PickleStep(argument=None, ast_node_ids=['775', '778'], id='850', type=<Type.outcome: 'Outcome'>, text='a cloudevent with type == \"org.mindwm.v1.graph.created\" should have been received from the NATS topic \"user-godzilla.laptop-host-broker-kne-trigger._knative\"')], tags=[PickleTag(name='@mindwm_two_users_one_context', ast_node_id='801'), PickleTag(name='@mindwm_test', ast_node_id='802')], ast_node_ids=['780', '778']), Pickle(id='856', uri='file:features/7_mindwm_two_users_one_context.feature', name='Cleanup laptop host for godzilla username', language='en', steps=[PickleStep(argument=None, ast_node_ids=['736'], id='852', type=<Type.context: 'Context'>, text='A MindWM environment'), PickleStep(argument=None, ast_node_ids=['737'], id='853', type=<Type.outcome: 'Outcome'>, text='all nodes in Kubernetes are ready'), PickleStep(argument=None, ast_node_ids=['781', '784'], id='854', type=<Type.action: 'Action'>, text='God deletes the MindWM host resource \"laptop\"'), PickleStep(argument=None, ast_node_ids=['782', '784'], id='855', type=<Type.outcome: 'Outcome'>, text='the host \"laptop\" should be deleted')], tags=[PickleTag(name='@mindwm_two_users_one_context', ast_node_id='801'), PickleTag(name='@mindwm_test', ast_node_id='802')], ast_node_ids=['787', '784']), Pickle(id='861', uri='file:features/7_mindwm_two_users_one_context.feature', name='Cleanup tablet host for tengu username', language='en', steps=[PickleStep(argument=None, ast_node_ids=['736'], id='857', type=<Type.context: 'Context'>, text='A MindWM environment'), PickleStep(argument=None, ast_node_ids=['737'], id='858', type=<Type.outcome: 'Outcome'>, text='all nodes in Kubernetes are ready'), PickleStep(argument=None, ast_node_ids=['781', '785'], id='859', type=<Type.action: 'Action'>, text='God deletes the MindWM host resource \"tablet\"'), PickleStep(argument=None, ast_node_ids=['782', '785'], id='860', type=<Type.outcome: 'Outcome'>, text='the host \"tablet\" should be deleted')], tags=[PickleTag(name='@mindwm_two_users_one_context', ast_node_id='801'), PickleTag(name='@mindwm_test', ast_node_id='802')], ast_node_ids=['787', '785']), Pickle(id='866', uri='file:features/7_mindwm_two_users_one_context.feature', name='Cleanup godzilla username', language='en', steps=[PickleStep(argument=None, ast_node_ids=['736'], id='862', type=<Type.context: 'Context'>, text='A MindWM environment'), PickleStep(argument=None, ast_node_ids=['737'], id='863', type=<Type.outcome: 'Outcome'>, text='all nodes in Kubernetes are ready'), PickleStep(argument=None, ast_node_ids=['788', '791'], id='864', type=<Type.action: 'Action'>, text='God deletes the MindWM user resource \"godzilla\"'), PickleStep(argument=None, ast_node_ids=['789', '791'], id='865', type=<Type.outcome: 'Outcome'>, text='the user \"godzilla\" should be deleted')], tags=[PickleTag(name='@mindwm_two_users_one_context', ast_node_id='801'), PickleTag(name='@mindwm_test', ast_node_id='802')], ast_node_ids=['794', '791']), Pickle(id='871', uri='file:features/7_mindwm_two_users_one_context.feature', name='Cleanup tengu username', language='en', steps=[PickleStep(argument=None, ast_node_ids=['736'], id='867', type=<Type.context: 'Context'>, text='A MindWM environment'), PickleStep(argument=None, ast_node_ids=['737'], id='868', type=<Type.outcome: 'Outcome'>, text='all nodes in Kubernetes are ready'), PickleStep(argument=None, ast_node_ids=['788', '792'], id='869', type=<Type.action: 'Action'>, text='God deletes the MindWM user resource \"tengu\"'), PickleStep(argument=None, ast_node_ids=['789', '792'], id='870', type=<Type.outcome: 'Outcome'>, text='the user \"tengu\" should be deleted')], tags=[PickleTag(name='@mindwm_two_users_one_context', ast_node_id='801'), PickleTag(name='@mindwm_test', ast_node_id='802')], ast_node_ids=['794', '792']), Pickle(id='876', uri='file:features/7_mindwm_two_users_one_context.feature', name='Cleanup tokyo context', language='en', steps=[PickleStep(argument=None, ast_node_ids=['736'], id='872', type=<Type.context: 'Context'>, text='A MindWM environment'), PickleStep(argument=None, ast_node_ids=['737'], id='873', type=<Type.outcome: 'Outcome'>, text='all nodes in Kubernetes are ready'), PickleStep(argument=None, ast_node_ids=['795', '798'], id='874', type=<Type.action: 'Action'>, text='God deletes the MindWM context resource \"tokyo\"'), PickleStep(argument=None, ast_node_ids=['796', '798'], id='875', type=<Type.outcome: 'Outcome'>, text='the context \"tokyo\" should be deleted')], tags=[PickleTag(name='@mindwm_two_users_one_context', ast_node_id='801'), PickleTag(name='@mindwm_test', ast_node_id='802')], ast_node_ids=['800', '798'])])"},{"name":"feature_source","value":"Source(uri='file:features/7_mindwm_two_users_one_context.feature', data='@mindwm_two_users_one_context\\n@mindwm_test\\nFeature: MindWM two users one context function test\\n  Background:\\n    Given A MindWM environment\\n    Then all nodes in Kubernetes are ready\\n\\n  Scenario: Create context <context>\\n    When God creates a MindWM context with the name \"<context>\"\\n    Then the context should be ready and operable\\n\\n    Then the following knative services are in a ready state in the \"context-<context>\" namespace\\n      | Knative service name |\\n      | iocontext            |\\n      | pong                 |\\n      | kafka-cdc            |\\n    And statefulset \"<context>-neo4j\" in namespace \"context-<context>\" is in ready state\\n    Examples:\\n    | context | \\n    | tokyo   | \\n    \\n  Scenario: Create <username> and connects it to <context>\\n    When God creates a MindWM user resource with the name \"<username>\" and connects it to the context \"<context>\"\\n    Then the user resource should be ready and operable\\n    Examples:\\n    | context | username |\\n    | tokyo   | godzilla |\\n    | tokyo   | tengu    |\\n  Scenario: Create <host> resource and connects it to <username> user\\n    When God creates a MindWM host resource with the name \"<host>\" and connects it to the user \"<username>\"\\n    Then the host resource should be ready and operable\\n\\n    Examples: \\n    | username | host   |\\n    | godzilla | laptop | \\n    | tengu    | tablet | \\n\\n  Scenario: Send iodocument via nats host: <host>, user: <username> and check that second user received graph update\\n    When God creates a new cloudevent \\n      And God starts reading message from NATS topic \">\"\\n      And sets cloudevent header \"ce-subject\" to \"id\"\\n      And sets cloudevent header \"ce-type\" to \"org.mindwm.v1.iodocument\"\\n      And sets cloudevent header \"ce-source\" to \"org.mindwm.<src_user>.<src_host>.L3RtcC90bXV4LTEwMDAvZGVmYXVsdA==.8d839f82-79da-11ef-bc9f-f74fac7543ac.23.36.iodocument\"\\n      And sends cloudevent to nats topic \"org.mindwm.<src_user>.<src_host>.L3RtcC90bXV4LTEwMDAvZGVmYXVsdA==.8d839f82-79da-11ef-bc9f-f74fac7543ac.23.36.iodocument\"\\n      \"\"\"\\n      {\\n        \"input\": \"id\",\\n        \"output\": \"uid=1000(pion) gid=1000(pion) groups=1000(pion),4(adm),100(users),112(tmux),988(docker)\",\\n        \"ps1\": \"pion@mindwm-stg1:~/work/dev/mindwm-manager$\",\\n        \"type\": \"org.mindwm.v1.iodocument\"\\n      } \\n      \"\"\"\\n\\n    Then the following deployments are in a ready state in the \"context-<context>\" namespace\\n      | Deployment name            |\\n      | iocontext-00001-deployment |\\n      | kafka-cdc-00001-deployment |\\n\\n    And a cloudevent with type == \"org.mindwm.v1.graph.created\" should have been received from the NATS topic \"user-<dst_user>.<dst_host>-host-broker-kne-trigger._knative\"\\n\\n    Examples:\\n    | context | src_user | src_host | dst_user | dst_host |  \\n    | tokyo   | godzilla | laptop   | tengu    | tablet   |\\n    | tokyo   | tengu    | tablet   | godzilla | laptop   | \\n\\n\\n  Scenario: Cleanup <host> host for <username> username\\n\\n    When God deletes the MindWM host resource \"<host>\"\\n    Then the host \"<host>\" should be deleted\\n\\n    Examples:\\n    | username | host   |\\n    | godzilla | laptop | \\n    | tengu    | tablet | \\n\\n  Scenario: Cleanup <username> username\\n    When God deletes the MindWM user resource \"<username>\"\\n    Then the user \"<username>\" should be deleted\\n\\n    Examples:\\n    | username | \\n    | godzilla |\\n    | tengu    | \\n\\n  Scenario: Cleanup <context> context\\n    When God deletes the MindWM context resource \"<context>\"\\n    Then the context \"<context>\" should be deleted\\n\\n    Examples:\\n    | context | \\n    | tokyo   |\\n', media_type='text/x.cucumber.gherkin+plain')"},{"name":"scenario","value":"Pickle(id='809', uri='file:features/7_mindwm_two_users_one_context.feature', name='Create context tokyo', language='en', steps=[PickleStep(argument=None, ast_node_ids=['736'], id='803', type=<Type.context: 'Context'>, text='A MindWM environment'), PickleStep(argument=None, ast_node_ids=['737'], id='804', type=<Type.outcome: 'Outcome'>, text='all nodes in Kubernetes are ready'), PickleStep(argument=None, ast_node_ids=['739', '748'], id='805', type=<Type.action: 'Action'>, text='God creates a MindWM context with the name \"tokyo\"'), PickleStep(argument=None, ast_node_ids=['740', '748'], id='806', type=<Type.outcome: 'Outcome'>, text='the context should be ready and operable'), PickleStep(argument=PickleStepArgument(doc_string=None, data_table=PickleTable(rows=[PickleTableRow(cells=[PickleTableCell(value='Knative service name')]), PickleTableRow(cells=[PickleTableCell(value='iocontext')]), PickleTableRow(cells=[PickleTableCell(value='pong')]), PickleTableRow(cells=[PickleTableCell(value='kafka-cdc')])])), ast_node_ids=['745', '748'], id='807', type=<Type.outcome: 'Outcome'>, text='the following knative services are in a ready state in the \"context-tokyo\" namespace'), PickleStep(argument=None, ast_node_ids=['746', '748'], id='808', type=<Type.outcome: 'Outcome'>, text='statefulset \"tokyo-neo4j\" in namespace \"context-tokyo\" is in ready state')], tags=[PickleTag(name='@mindwm_two_users_one_context', ast_node_id='801'), PickleTag(name='@mindwm_test', ast_node_id='802')], ast_node_ids=['750', '748'])"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"history":{"statistic":{"failed":0,"broken":0,"skipped":0,"passed":5,"unknown":0,"total":5},"items":[{"uid":"94bd80080781e93c","reportUrl":"https://mindwm.github.io/mindwm-gitops/181//#testresult/94bd80080781e93c","status":"passed","time":{"start":1728385634692,"stop":1728385738079,"duration":103387}},{"uid":"3fb718bb3ebc0c29","reportUrl":"https://mindwm.github.io/mindwm-gitops/179//#testresult/3fb718bb3ebc0c29","status":"passed","time":{"start":1728337108696,"stop":1728337208114,"duration":99418}},{"uid":"a5d856d4788d935f","reportUrl":"https://mindwm.github.io/mindwm-gitops/178//#testresult/a5d856d4788d935f","status":"passed","time":{"start":1728325520124,"stop":1728325619558,"duration":99434}},{"uid":"59458b2dce80569e","reportUrl":"https://mindwm.github.io/mindwm-gitops/176//#testresult/59458b2dce80569e","status":"passed","time":{"start":1728050705373,"stop":1728050808412,"duration":103039}}]},"tags":["scenarios(PosixPath('/home/ci/mindwm-gitops/tests/mindwm_bdd/features/7_mindwm_two_users_one_context.feature'), filter_=None, encoding='utf-8', features_base_dir=None, features_base_url=None, features_path_type=<FeaturePathType.PATH: 'path'>, features_mimetype=None, parser_type=None, parse_args=Args(args=(), kwargs={}), locators=())","pytest_bdd_scenario","@pytest.mark.usefixtures('feature', 'scenario', 'feature_source')","mindwm_test","mindwm_two_users_one_context","namespace(create=False, name='default')"]},"source":"a14921619313ede0.json","parameterValues":["Feature(gherkin_document=GherkinDocument(uri='file:features/7_mindwm_two_users_one_context.feature', feature=Feature(location=Location(line=3, column=1), tags=[Tag(location=Location(line=1, column=1), name='@mindwm_two_users_one_context', id='801'), Tag(location=Location(line=2, column=1), name='@mindwm_test', id='802')], language='en', keyword='Feature', name='MindWM two users one context function test', description='', children=[FeatureChild(rule=None, background=Background(location=Location(line=4, column=3), keyword='Background', name='', description='', steps=[Step(location=Location(line=5, column=5), keyword='Given ', keyword_type=<KeywordType.context: 'Context'>, text='A MindWM environment', doc_string=None, data_table=None, id='736'), Step(location=Location(line=6, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='all nodes in Kubernetes are ready', doc_string=None, data_table=None, id='737')], id='738'), scenario=None), FeatureChild(rule=None, background=None, scenario=Scenario(location=Location(line=8, column=3), tags=[], keyword='Scenario', name='Create context <context>', description='', steps=[Step(location=Location(line=9, column=5), keyword='When ', keyword_type=<KeywordType.action: 'Action'>, text='God creates a MindWM context with the name \"<context>\"', doc_string=None, data_table=None, id='739'), Step(location=Location(line=10, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the context should be ready and operable', doc_string=None, data_table=None, id='740'), Step(location=Location(line=12, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the following knative services are in a ready state in the \"context-<context>\" namespace', doc_string=None, data_table=DataTable(location=Location(line=13, column=7), rows=[TableRow(location=Location(line=13, column=7), cells=[TableCell(location=Location(line=13, column=9), value='Knative service name')], id='741'), TableRow(location=Location(line=14, column=7), cells=[TableCell(location=Location(line=14, column=9), value='iocontext')], id='742'), TableRow(location=Location(line=15, column=7), cells=[TableCell(location=Location(line=15, column=9), value='pong')], id='743'), TableRow(location=Location(line=16, column=7), cells=[TableCell(location=Location(line=16, column=9), value='kafka-cdc')], id='744')]), id='745'), Step(location=Location(line=17, column=5), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='statefulset \"<context>-neo4j\" in namespace \"context-<context>\" is in ready state', doc_string=None, data_table=None, id='746')], examples=[Examples(location=Location(line=18, column=5), tags=[], keyword='Examples', name='', description='', table_header=TableRow(location=Location(line=19, column=5), cells=[TableCell(location=Location(line=19, column=7), value='context')], id='747'), table_body=[TableRow(location=Location(line=20, column=5), cells=[TableCell(location=Location(line=20, column=7), value='tokyo')], id='748')], id='749')], id='750')), FeatureChild(rule=None, background=None, scenario=Scenario(location=Location(line=22, column=3), tags=[], keyword='Scenario', name='Create <username> and connects it to <context>', description='', steps=[Step(location=Location(line=23, column=5), keyword='When ', keyword_type=<KeywordType.action: 'Action'>, text='God creates a MindWM user resource with the name \"<username>\" and connects it to the context \"<context>\"', doc_string=None, data_table=None, id='751'), Step(location=Location(line=24, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the user resource should be ready and operable', doc_string=None, data_table=None, id='752')], examples=[Examples(location=Location(line=25, column=5), tags=[], keyword='Examples', name='', description='', table_header=TableRow(location=Location(line=26, column=5), cells=[TableCell(location=Location(line=26, column=7), value='context'), TableCell(location=Location(line=26, column=17), value='username')], id='753'), table_body=[TableRow(location=Location(line=27, column=5), cells=[TableCell(location=Location(line=27, column=7), value='tokyo'), TableCell(location=Location(line=27, column=17), value='godzilla')], id='754'), TableRow(location=Location(line=28, column=5), cells=[TableCell(location=Location(line=28, column=7), value='tokyo'), TableCell(location=Location(line=28, column=17), value='tengu')], id='755')], id='756')], id='757')), FeatureChild(rule=None, background=None, scenario=Scenario(location=Location(line=29, column=3), tags=[], keyword='Scenario', name='Create <host> resource and connects it to <username> user', description='', steps=[Step(location=Location(line=30, column=5), keyword='When ', keyword_type=<KeywordType.action: 'Action'>, text='God creates a MindWM host resource with the name \"<host>\" and connects it to the user \"<username>\"', doc_string=None, data_table=None, id='758'), Step(location=Location(line=31, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the host resource should be ready and operable', doc_string=None, data_table=None, id='759')], examples=[Examples(location=Location(line=33, column=5), tags=[], keyword='Examples', name='', description='', table_header=TableRow(location=Location(line=34, column=5), cells=[TableCell(location=Location(line=34, column=7), value='username'), TableCell(location=Location(line=34, column=18), value='host')], id='760'), table_body=[TableRow(location=Location(line=35, column=5), cells=[TableCell(location=Location(line=35, column=7), value='godzilla'), TableCell(location=Location(line=35, column=18), value='laptop')], id='761'), TableRow(location=Location(line=36, column=5), cells=[TableCell(location=Location(line=36, column=7), value='tengu'), TableCell(location=Location(line=36, column=18), value='tablet')], id='762')], id='763')], id='764')), FeatureChild(rule=None, background=None, scenario=Scenario(location=Location(line=38, column=3), tags=[], keyword='Scenario', name='Send iodocument via nats host: <host>, user: <username> and check that second user received graph update', description='', steps=[Step(location=Location(line=39, column=5), keyword='When ', keyword_type=<KeywordType.action: 'Action'>, text='God creates a new cloudevent', doc_string=None, data_table=None, id='765'), Step(location=Location(line=40, column=7), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='God starts reading message from NATS topic \">\"', doc_string=None, data_table=None, id='766'), Step(location=Location(line=41, column=7), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='sets cloudevent header \"ce-subject\" to \"id\"', doc_string=None, data_table=None, id='767'), Step(location=Location(line=42, column=7), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='sets cloudevent header \"ce-type\" to \"org.mindwm.v1.iodocument\"', doc_string=None, data_table=None, id='768'), Step(location=Location(line=43, column=7), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='sets cloudevent header \"ce-source\" to \"org.mindwm.<src_user>.<src_host>.L3RtcC90bXV4LTEwMDAvZGVmYXVsdA==.8d839f82-79da-11ef-bc9f-f74fac7543ac.23.36.iodocument\"', doc_string=None, data_table=None, id='769'), Step(location=Location(line=44, column=7), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='sends cloudevent to nats topic \"org.mindwm.<src_user>.<src_host>.L3RtcC90bXV4LTEwMDAvZGVmYXVsdA==.8d839f82-79da-11ef-bc9f-f74fac7543ac.23.36.iodocument\"', doc_string=DocString(location=Location(line=45, column=7), media_type=None, content='{\\n  \"input\": \"id\",\\n  \"output\": \"uid=1000(pion) gid=1000(pion) groups=1000(pion),4(adm),100(users),112(tmux),988(docker)\",\\n  \"ps1\": \"pion@mindwm-stg1:~/work/dev/mindwm-manager$\",\\n  \"type\": \"org.mindwm.v1.iodocument\"\\n} ', delimiter='\"\"\"'), data_table=None, id='770'), Step(location=Location(line=54, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the following deployments are in a ready state in the \"context-<context>\" namespace', doc_string=None, data_table=DataTable(location=Location(line=55, column=7), rows=[TableRow(location=Location(line=55, column=7), cells=[TableCell(location=Location(line=55, column=9), value='Deployment name')], id='771'), TableRow(location=Location(line=56, column=7), cells=[TableCell(location=Location(line=56, column=9), value='iocontext-00001-deployment')], id='772'), TableRow(location=Location(line=57, column=7), cells=[TableCell(location=Location(line=57, column=9), value='kafka-cdc-00001-deployment')], id='773')]), id='774'), Step(location=Location(line=59, column=5), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='a cloudevent with type == \"org.mindwm.v1.graph.created\" should have been received from the NATS topic \"user-<dst_user>.<dst_host>-host-broker-kne-trigger._knative\"', doc_string=None, data_table=None, id='775')], examples=[Examples(location=Location(line=61, column=5), tags=[], keyword='Examples', name='', description='', table_header=TableRow(location=Location(line=62, column=5), cells=[TableCell(location=Location(line=62, column=7), value='context'), TableCell(location=Location(line=62, column=17), value='src_user'), TableCell(location=Location(line=62, column=28), value='src_host'), TableCell(location=Location(line=62, column=39), value='dst_user'), TableCell(location=Location(line=62, column=50), value='dst_host')], id='776'), table_body=[TableRow(location=Location(line=63, column=5), cells=[TableCell(location=Location(line=63, column=7), value='tokyo'), TableCell(location=Location(line=63, column=17), value='godzilla'), TableCell(location=Location(line=63, column=28), value='laptop'), TableCell(location=Location(line=63, column=39), value='tengu'), TableCell(location=Location(line=63, column=50), value='tablet')], id='777'), TableRow(location=Location(line=64, column=5), cells=[TableCell(location=Location(line=64, column=7), value='tokyo'), TableCell(location=Location(line=64, column=17), value='tengu'), TableCell(location=Location(line=64, column=28), value='tablet'), TableCell(location=Location(line=64, column=39), value='godzilla'), TableCell(location=Location(line=64, column=50), value='laptop')], id='778')], id='779')], id='780')), FeatureChild(rule=None, background=None, scenario=Scenario(location=Location(line=67, column=3), tags=[], keyword='Scenario', name='Cleanup <host> host for <username> username', description='', steps=[Step(location=Location(line=69, column=5), keyword='When ', keyword_type=<KeywordType.action: 'Action'>, text='God deletes the MindWM host resource \"<host>\"', doc_string=None, data_table=None, id='781'), Step(location=Location(line=70, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the host \"<host>\" should be deleted', doc_string=None, data_table=None, id='782')], examples=[Examples(location=Location(line=72, column=5), tags=[], keyword='Examples', name='', description='', table_header=TableRow(location=Location(line=73, column=5), cells=[TableCell(location=Location(line=73, column=7), value='username'), TableCell(location=Location(line=73, column=18), value='host')], id='783'), table_body=[TableRow(location=Location(line=74, column=5), cells=[TableCell(location=Location(line=74, column=7), value='godzilla'), TableCell(location=Location(line=74, column=18), value='laptop')], id='784'), TableRow(location=Location(line=75, column=5), cells=[TableCell(location=Location(line=75, column=7), value='tengu'), TableCell(location=Location(line=75, column=18), value='tablet')], id='785')], id='786')], id='787')), FeatureChild(rule=None, background=None, scenario=Scenario(location=Location(line=77, column=3), tags=[], keyword='Scenario', name='Cleanup <username> username', description='', steps=[Step(location=Location(line=78, column=5), keyword='When ', keyword_type=<KeywordType.action: 'Action'>, text='God deletes the MindWM user resource \"<username>\"', doc_string=None, data_table=None, id='788'), Step(location=Location(line=79, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the user \"<username>\" should be deleted', doc_string=None, data_table=None, id='789')], examples=[Examples(location=Location(line=81, column=5), tags=[], keyword='Examples', name='', description='', table_header=TableRow(location=Location(line=82, column=5), cells=[TableCell(location=Location(line=82, column=7), value='username')], id='790'), table_body=[TableRow(location=Location(line=83, column=5), cells=[TableCell(location=Location(line=83, column=7), value='godzilla')], id='791'), TableRow(location=Location(line=84, column=5), cells=[TableCell(location=Location(line=84, column=7), value='tengu')], id='792')], id='793')], id='794')), FeatureChild(rule=None, background=None, scenario=Scenario(location=Location(line=86, column=3), tags=[], keyword='Scenario', name='Cleanup <context> context', description='', steps=[Step(location=Location(line=87, column=5), keyword='When ', keyword_type=<KeywordType.action: 'Action'>, text='God deletes the MindWM context resource \"<context>\"', doc_string=None, data_table=None, id='795'), Step(location=Location(line=88, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the context \"<context>\" should be deleted', doc_string=None, data_table=None, id='796')], examples=[Examples(location=Location(line=90, column=5), tags=[], keyword='Examples', name='', description='', table_header=TableRow(location=Location(line=91, column=5), cells=[TableCell(location=Location(line=91, column=7), value='context')], id='797'), table_body=[TableRow(location=Location(line=92, column=5), cells=[TableCell(location=Location(line=92, column=7), value='tokyo')], id='798')], id='799')], id='800'))]), comments=[]), uri='file:features/7_mindwm_two_users_one_context.feature', filename='/home/ci/mindwm-gitops/tests/mindwm_bdd/features/7_mindwm_two_users_one_context.feature', registry={'801': Tag(location=Location(line=1, column=1), name='@mindwm_two_users_one_context', id='801'), '802': Tag(location=Location(line=2, column=1), name='@mindwm_test', id='802'), '738': Background(location=Location(line=4, column=3), keyword='Background', name='', description='', steps=[Step(location=Location(line=5, column=5), keyword='Given ', keyword_type=<KeywordType.context: 'Context'>, text='A MindWM environment', doc_string=None, data_table=None, id='736'), Step(location=Location(line=6, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='all nodes in Kubernetes are ready', doc_string=None, data_table=None, id='737')], id='738'), '736': Step(location=Location(line=5, column=5), keyword='Given ', keyword_type=<KeywordType.context: 'Context'>, text='A MindWM environment', doc_string=None, data_table=None, id='736'), '737': Step(location=Location(line=6, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='all nodes in Kubernetes are ready', doc_string=None, data_table=None, id='737'), '750': Scenario(location=Location(line=8, column=3), tags=[], keyword='Scenario', name='Create context <context>', description='', steps=[Step(location=Location(line=9, column=5), keyword='When ', keyword_type=<KeywordType.action: 'Action'>, text='God creates a MindWM context with the name \"<context>\"', doc_string=None, data_table=None, id='739'), Step(location=Location(line=10, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the context should be ready and operable', doc_string=None, data_table=None, id='740'), Step(location=Location(line=12, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the following knative services are in a ready state in the \"context-<context>\" namespace', doc_string=None, data_table=DataTable(location=Location(line=13, column=7), rows=[TableRow(location=Location(line=13, column=7), cells=[TableCell(location=Location(line=13, column=9), value='Knative service name')], id='741'), TableRow(location=Location(line=14, column=7), cells=[TableCell(location=Location(line=14, column=9), value='iocontext')], id='742'), TableRow(location=Location(line=15, column=7), cells=[TableCell(location=Location(line=15, column=9), value='pong')], id='743'), TableRow(location=Location(line=16, column=7), cells=[TableCell(location=Location(line=16, column=9), value='kafka-cdc')], id='744')]), id='745'), Step(location=Location(line=17, column=5), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='statefulset \"<context>-neo4j\" in namespace \"context-<context>\" is in ready state', doc_string=None, data_table=None, id='746')], examples=[Examples(location=Location(line=18, column=5), tags=[], keyword='Examples', name='', description='', table_header=TableRow(location=Location(line=19, column=5), cells=[TableCell(location=Location(line=19, column=7), value='context')], id='747'), table_body=[TableRow(location=Location(line=20, column=5), cells=[TableCell(location=Location(line=20, column=7), value='tokyo')], id='748')], id='749')], id='750'), '739': Step(location=Location(line=9, column=5), keyword='When ', keyword_type=<KeywordType.action: 'Action'>, text='God creates a MindWM context with the name \"<context>\"', doc_string=None, data_table=None, id='739'), '740': Step(location=Location(line=10, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the context should be ready and operable', doc_string=None, data_table=None, id='740'), '745': Step(location=Location(line=12, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the following knative services are in a ready state in the \"context-<context>\" namespace', doc_string=None, data_table=DataTable(location=Location(line=13, column=7), rows=[TableRow(location=Location(line=13, column=7), cells=[TableCell(location=Location(line=13, column=9), value='Knative service name')], id='741'), TableRow(location=Location(line=14, column=7), cells=[TableCell(location=Location(line=14, column=9), value='iocontext')], id='742'), TableRow(location=Location(line=15, column=7), cells=[TableCell(location=Location(line=15, column=9), value='pong')], id='743'), TableRow(location=Location(line=16, column=7), cells=[TableCell(location=Location(line=16, column=9), value='kafka-cdc')], id='744')]), id='745'), '746': Step(location=Location(line=17, column=5), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='statefulset \"<context>-neo4j\" in namespace \"context-<context>\" is in ready state', doc_string=None, data_table=None, id='746'), '749': Examples(location=Location(line=18, column=5), tags=[], keyword='Examples', name='', description='', table_header=TableRow(location=Location(line=19, column=5), cells=[TableCell(location=Location(line=19, column=7), value='context')], id='747'), table_body=[TableRow(location=Location(line=20, column=5), cells=[TableCell(location=Location(line=20, column=7), value='tokyo')], id='748')], id='749'), '747': TableRow(location=Location(line=19, column=5), cells=[TableCell(location=Location(line=19, column=7), value='context')], id='747'), '748': TableRow(location=Location(line=20, column=5), cells=[TableCell(location=Location(line=20, column=7), value='tokyo')], id='748'), '757': Scenario(location=Location(line=22, column=3), tags=[], keyword='Scenario', name='Create <username> and connects it to <context>', description='', steps=[Step(location=Location(line=23, column=5), keyword='When ', keyword_type=<KeywordType.action: 'Action'>, text='God creates a MindWM user resource with the name \"<username>\" and connects it to the context \"<context>\"', doc_string=None, data_table=None, id='751'), Step(location=Location(line=24, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the user resource should be ready and operable', doc_string=None, data_table=None, id='752')], examples=[Examples(location=Location(line=25, column=5), tags=[], keyword='Examples', name='', description='', table_header=TableRow(location=Location(line=26, column=5), cells=[TableCell(location=Location(line=26, column=7), value='context'), TableCell(location=Location(line=26, column=17), value='username')], id='753'), table_body=[TableRow(location=Location(line=27, column=5), cells=[TableCell(location=Location(line=27, column=7), value='tokyo'), TableCell(location=Location(line=27, column=17), value='godzilla')], id='754'), TableRow(location=Location(line=28, column=5), cells=[TableCell(location=Location(line=28, column=7), value='tokyo'), TableCell(location=Location(line=28, column=17), value='tengu')], id='755')], id='756')], id='757'), '751': Step(location=Location(line=23, column=5), keyword='When ', keyword_type=<KeywordType.action: 'Action'>, text='God creates a MindWM user resource with the name \"<username>\" and connects it to the context \"<context>\"', doc_string=None, data_table=None, id='751'), '752': Step(location=Location(line=24, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the user resource should be ready and operable', doc_string=None, data_table=None, id='752'), '756': Examples(location=Location(line=25, column=5), tags=[], keyword='Examples', name='', description='', table_header=TableRow(location=Location(line=26, column=5), cells=[TableCell(location=Location(line=26, column=7), value='context'), TableCell(location=Location(line=26, column=17), value='username')], id='753'), table_body=[TableRow(location=Location(line=27, column=5), cells=[TableCell(location=Location(line=27, column=7), value='tokyo'), TableCell(location=Location(line=27, column=17), value='godzilla')], id='754'), TableRow(location=Location(line=28, column=5), cells=[TableCell(location=Location(line=28, column=7), value='tokyo'), TableCell(location=Location(line=28, column=17), value='tengu')], id='755')], id='756'), '753': TableRow(location=Location(line=26, column=5), cells=[TableCell(location=Location(line=26, column=7), value='context'), TableCell(location=Location(line=26, column=17), value='username')], id='753'), '754': TableRow(location=Location(line=27, column=5), cells=[TableCell(location=Location(line=27, column=7), value='tokyo'), TableCell(location=Location(line=27, column=17), value='godzilla')], id='754'), '755': TableRow(location=Location(line=28, column=5), cells=[TableCell(location=Location(line=28, column=7), value='tokyo'), TableCell(location=Location(line=28, column=17), value='tengu')], id='755'), '764': Scenario(location=Location(line=29, column=3), tags=[], keyword='Scenario', name='Create <host> resource and connects it to <username> user', description='', steps=[Step(location=Location(line=30, column=5), keyword='When ', keyword_type=<KeywordType.action: 'Action'>, text='God creates a MindWM host resource with the name \"<host>\" and connects it to the user \"<username>\"', doc_string=None, data_table=None, id='758'), Step(location=Location(line=31, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the host resource should be ready and operable', doc_string=None, data_table=None, id='759')], examples=[Examples(location=Location(line=33, column=5), tags=[], keyword='Examples', name='', description='', table_header=TableRow(location=Location(line=34, column=5), cells=[TableCell(location=Location(line=34, column=7), value='username'), TableCell(location=Location(line=34, column=18), value='host')], id='760'), table_body=[TableRow(location=Location(line=35, column=5), cells=[TableCell(location=Location(line=35, column=7), value='godzilla'), TableCell(location=Location(line=35, column=18), value='laptop')], id='761'), TableRow(location=Location(line=36, column=5), cells=[TableCell(location=Location(line=36, column=7), value='tengu'), TableCell(location=Location(line=36, column=18), value='tablet')], id='762')], id='763')], id='764'), '758': Step(location=Location(line=30, column=5), keyword='When ', keyword_type=<KeywordType.action: 'Action'>, text='God creates a MindWM host resource with the name \"<host>\" and connects it to the user \"<username>\"', doc_string=None, data_table=None, id='758'), '759': Step(location=Location(line=31, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the host resource should be ready and operable', doc_string=None, data_table=None, id='759'), '763': Examples(location=Location(line=33, column=5), tags=[], keyword='Examples', name='', description='', table_header=TableRow(location=Location(line=34, column=5), cells=[TableCell(location=Location(line=34, column=7), value='username'), TableCell(location=Location(line=34, column=18), value='host')], id='760'), table_body=[TableRow(location=Location(line=35, column=5), cells=[TableCell(location=Location(line=35, column=7), value='godzilla'), TableCell(location=Location(line=35, column=18), value='laptop')], id='761'), TableRow(location=Location(line=36, column=5), cells=[TableCell(location=Location(line=36, column=7), value='tengu'), TableCell(location=Location(line=36, column=18), value='tablet')], id='762')], id='763'), '760': TableRow(location=Location(line=34, column=5), cells=[TableCell(location=Location(line=34, column=7), value='username'), TableCell(location=Location(line=34, column=18), value='host')], id='760'), '761': TableRow(location=Location(line=35, column=5), cells=[TableCell(location=Location(line=35, column=7), value='godzilla'), TableCell(location=Location(line=35, column=18), value='laptop')], id='761'), '762': TableRow(location=Location(line=36, column=5), cells=[TableCell(location=Location(line=36, column=7), value='tengu'), TableCell(location=Location(line=36, column=18), value='tablet')], id='762'), '780': Scenario(location=Location(line=38, column=3), tags=[], keyword='Scenario', name='Send iodocument via nats host: <host>, user: <username> and check that second user received graph update', description='', steps=[Step(location=Location(line=39, column=5), keyword='When ', keyword_type=<KeywordType.action: 'Action'>, text='God creates a new cloudevent', doc_string=None, data_table=None, id='765'), Step(location=Location(line=40, column=7), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='God starts reading message from NATS topic \">\"', doc_string=None, data_table=None, id='766'), Step(location=Location(line=41, column=7), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='sets cloudevent header \"ce-subject\" to \"id\"', doc_string=None, data_table=None, id='767'), Step(location=Location(line=42, column=7), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='sets cloudevent header \"ce-type\" to \"org.mindwm.v1.iodocument\"', doc_string=None, data_table=None, id='768'), Step(location=Location(line=43, column=7), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='sets cloudevent header \"ce-source\" to \"org.mindwm.<src_user>.<src_host>.L3RtcC90bXV4LTEwMDAvZGVmYXVsdA==.8d839f82-79da-11ef-bc9f-f74fac7543ac.23.36.iodocument\"', doc_string=None, data_table=None, id='769'), Step(location=Location(line=44, column=7), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='sends cloudevent to nats topic \"org.mindwm.<src_user>.<src_host>.L3RtcC90bXV4LTEwMDAvZGVmYXVsdA==.8d839f82-79da-11ef-bc9f-f74fac7543ac.23.36.iodocument\"', doc_string=DocString(location=Location(line=45, column=7), media_type=None, content='{\\n  \"input\": \"id\",\\n  \"output\": \"uid=1000(pion) gid=1000(pion) groups=1000(pion),4(adm),100(users),112(tmux),988(docker)\",\\n  \"ps1\": \"pion@mindwm-stg1:~/work/dev/mindwm-manager$\",\\n  \"type\": \"org.mindwm.v1.iodocument\"\\n} ', delimiter='\"\"\"'), data_table=None, id='770'), Step(location=Location(line=54, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the following deployments are in a ready state in the \"context-<context>\" namespace', doc_string=None, data_table=DataTable(location=Location(line=55, column=7), rows=[TableRow(location=Location(line=55, column=7), cells=[TableCell(location=Location(line=55, column=9), value='Deployment name')], id='771'), TableRow(location=Location(line=56, column=7), cells=[TableCell(location=Location(line=56, column=9), value='iocontext-00001-deployment')], id='772'), TableRow(location=Location(line=57, column=7), cells=[TableCell(location=Location(line=57, column=9), value='kafka-cdc-00001-deployment')], id='773')]), id='774'), Step(location=Location(line=59, column=5), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='a cloudevent with type == \"org.mindwm.v1.graph.created\" should have been received from the NATS topic \"user-<dst_user>.<dst_host>-host-broker-kne-trigger._knative\"', doc_string=None, data_table=None, id='775')], examples=[Examples(location=Location(line=61, column=5), tags=[], keyword='Examples', name='', description='', table_header=TableRow(location=Location(line=62, column=5), cells=[TableCell(location=Location(line=62, column=7), value='context'), TableCell(location=Location(line=62, column=17), value='src_user'), TableCell(location=Location(line=62, column=28), value='src_host'), TableCell(location=Location(line=62, column=39), value='dst_user'), TableCell(location=Location(line=62, column=50), value='dst_host')], id='776'), table_body=[TableRow(location=Location(line=63, column=5), cells=[TableCell(location=Location(line=63, column=7), value='tokyo'), TableCell(location=Location(line=63, column=17), value='godzilla'), TableCell(location=Location(line=63, column=28), value='laptop'), TableCell(location=Location(line=63, column=39), value='tengu'), TableCell(location=Location(line=63, column=50), value='tablet')], id='777'), TableRow(location=Location(line=64, column=5), cells=[TableCell(location=Location(line=64, column=7), value='tokyo'), TableCell(location=Location(line=64, column=17), value='tengu'), TableCell(location=Location(line=64, column=28), value='tablet'), TableCell(location=Location(line=64, column=39), value='godzilla'), TableCell(location=Location(line=64, column=50), value='laptop')], id='778')], id='779')], id='780'), '765': Step(location=Location(line=39, column=5), keyword='When ', keyword_type=<KeywordType.action: 'Action'>, text='God creates a new cloudevent', doc_string=None, data_table=None, id='765'), '766': Step(location=Location(line=40, column=7), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='God starts reading message from NATS topic \">\"', doc_string=None, data_table=None, id='766'), '767': Step(location=Location(line=41, column=7), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='sets cloudevent header \"ce-subject\" to \"id\"', doc_string=None, data_table=None, id='767'), '768': Step(location=Location(line=42, column=7), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='sets cloudevent header \"ce-type\" to \"org.mindwm.v1.iodocument\"', doc_string=None, data_table=None, id='768'), '769': Step(location=Location(line=43, column=7), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='sets cloudevent header \"ce-source\" to \"org.mindwm.<src_user>.<src_host>.L3RtcC90bXV4LTEwMDAvZGVmYXVsdA==.8d839f82-79da-11ef-bc9f-f74fac7543ac.23.36.iodocument\"', doc_string=None, data_table=None, id='769'), '770': Step(location=Location(line=44, column=7), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='sends cloudevent to nats topic \"org.mindwm.<src_user>.<src_host>.L3RtcC90bXV4LTEwMDAvZGVmYXVsdA==.8d839f82-79da-11ef-bc9f-f74fac7543ac.23.36.iodocument\"', doc_string=DocString(location=Location(line=45, column=7), media_type=None, content='{\\n  \"input\": \"id\",\\n  \"output\": \"uid=1000(pion) gid=1000(pion) groups=1000(pion),4(adm),100(users),112(tmux),988(docker)\",\\n  \"ps1\": \"pion@mindwm-stg1:~/work/dev/mindwm-manager$\",\\n  \"type\": \"org.mindwm.v1.iodocument\"\\n} ', delimiter='\"\"\"'), data_table=None, id='770'), '774': Step(location=Location(line=54, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the following deployments are in a ready state in the \"context-<context>\" namespace', doc_string=None, data_table=DataTable(location=Location(line=55, column=7), rows=[TableRow(location=Location(line=55, column=7), cells=[TableCell(location=Location(line=55, column=9), value='Deployment name')], id='771'), TableRow(location=Location(line=56, column=7), cells=[TableCell(location=Location(line=56, column=9), value='iocontext-00001-deployment')], id='772'), TableRow(location=Location(line=57, column=7), cells=[TableCell(location=Location(line=57, column=9), value='kafka-cdc-00001-deployment')], id='773')]), id='774'), '775': Step(location=Location(line=59, column=5), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='a cloudevent with type == \"org.mindwm.v1.graph.created\" should have been received from the NATS topic \"user-<dst_user>.<dst_host>-host-broker-kne-trigger._knative\"', doc_string=None, data_table=None, id='775'), '779': Examples(location=Location(line=61, column=5), tags=[], keyword='Examples', name='', description='', table_header=TableRow(location=Location(line=62, column=5), cells=[TableCell(location=Location(line=62, column=7), value='context'), TableCell(location=Location(line=62, column=17), value='src_user'), TableCell(location=Location(line=62, column=28), value='src_host'), TableCell(location=Location(line=62, column=39), value='dst_user'), TableCell(location=Location(line=62, column=50), value='dst_host')], id='776'), table_body=[TableRow(location=Location(line=63, column=5), cells=[TableCell(location=Location(line=63, column=7), value='tokyo'), TableCell(location=Location(line=63, column=17), value='godzilla'), TableCell(location=Location(line=63, column=28), value='laptop'), TableCell(location=Location(line=63, column=39), value='tengu'), TableCell(location=Location(line=63, column=50), value='tablet')], id='777'), TableRow(location=Location(line=64, column=5), cells=[TableCell(location=Location(line=64, column=7), value='tokyo'), TableCell(location=Location(line=64, column=17), value='tengu'), TableCell(location=Location(line=64, column=28), value='tablet'), TableCell(location=Location(line=64, column=39), value='godzilla'), TableCell(location=Location(line=64, column=50), value='laptop')], id='778')], id='779'), '776': TableRow(location=Location(line=62, column=5), cells=[TableCell(location=Location(line=62, column=7), value='context'), TableCell(location=Location(line=62, column=17), value='src_user'), TableCell(location=Location(line=62, column=28), value='src_host'), TableCell(location=Location(line=62, column=39), value='dst_user'), TableCell(location=Location(line=62, column=50), value='dst_host')], id='776'), '777': TableRow(location=Location(line=63, column=5), cells=[TableCell(location=Location(line=63, column=7), value='tokyo'), TableCell(location=Location(line=63, column=17), value='godzilla'), TableCell(location=Location(line=63, column=28), value='laptop'), TableCell(location=Location(line=63, column=39), value='tengu'), TableCell(location=Location(line=63, column=50), value='tablet')], id='777'), '778': TableRow(location=Location(line=64, column=5), cells=[TableCell(location=Location(line=64, column=7), value='tokyo'), TableCell(location=Location(line=64, column=17), value='tengu'), TableCell(location=Location(line=64, column=28), value='tablet'), TableCell(location=Location(line=64, column=39), value='godzilla'), TableCell(location=Location(line=64, column=50), value='laptop')], id='778'), '787': Scenario(location=Location(line=67, column=3), tags=[], keyword='Scenario', name='Cleanup <host> host for <username> username', description='', steps=[Step(location=Location(line=69, column=5), keyword='When ', keyword_type=<KeywordType.action: 'Action'>, text='God deletes the MindWM host resource \"<host>\"', doc_string=None, data_table=None, id='781'), Step(location=Location(line=70, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the host \"<host>\" should be deleted', doc_string=None, data_table=None, id='782')], examples=[Examples(location=Location(line=72, column=5), tags=[], keyword='Examples', name='', description='', table_header=TableRow(location=Location(line=73, column=5), cells=[TableCell(location=Location(line=73, column=7), value='username'), TableCell(location=Location(line=73, column=18), value='host')], id='783'), table_body=[TableRow(location=Location(line=74, column=5), cells=[TableCell(location=Location(line=74, column=7), value='godzilla'), TableCell(location=Location(line=74, column=18), value='laptop')], id='784'), TableRow(location=Location(line=75, column=5), cells=[TableCell(location=Location(line=75, column=7), value='tengu'), TableCell(location=Location(line=75, column=18), value='tablet')], id='785')], id='786')], id='787'), '781': Step(location=Location(line=69, column=5), keyword='When ', keyword_type=<KeywordType.action: 'Action'>, text='God deletes the MindWM host resource \"<host>\"', doc_string=None, data_table=None, id='781'), '782': Step(location=Location(line=70, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the host \"<host>\" should be deleted', doc_string=None, data_table=None, id='782'), '786': Examples(location=Location(line=72, column=5), tags=[], keyword='Examples', name='', description='', table_header=TableRow(location=Location(line=73, column=5), cells=[TableCell(location=Location(line=73, column=7), value='username'), TableCell(location=Location(line=73, column=18), value='host')], id='783'), table_body=[TableRow(location=Location(line=74, column=5), cells=[TableCell(location=Location(line=74, column=7), value='godzilla'), TableCell(location=Location(line=74, column=18), value='laptop')], id='784'), TableRow(location=Location(line=75, column=5), cells=[TableCell(location=Location(line=75, column=7), value='tengu'), TableCell(location=Location(line=75, column=18), value='tablet')], id='785')], id='786'), '783': TableRow(location=Location(line=73, column=5), cells=[TableCell(location=Location(line=73, column=7), value='username'), TableCell(location=Location(line=73, column=18), value='host')], id='783'), '784': TableRow(location=Location(line=74, column=5), cells=[TableCell(location=Location(line=74, column=7), value='godzilla'), TableCell(location=Location(line=74, column=18), value='laptop')], id='784'), '785': TableRow(location=Location(line=75, column=5), cells=[TableCell(location=Location(line=75, column=7), value='tengu'), TableCell(location=Location(line=75, column=18), value='tablet')], id='785'), '794': Scenario(location=Location(line=77, column=3), tags=[], keyword='Scenario', name='Cleanup <username> username', description='', steps=[Step(location=Location(line=78, column=5), keyword='When ', keyword_type=<KeywordType.action: 'Action'>, text='God deletes the MindWM user resource \"<username>\"', doc_string=None, data_table=None, id='788'), Step(location=Location(line=79, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the user \"<username>\" should be deleted', doc_string=None, data_table=None, id='789')], examples=[Examples(location=Location(line=81, column=5), tags=[], keyword='Examples', name='', description='', table_header=TableRow(location=Location(line=82, column=5), cells=[TableCell(location=Location(line=82, column=7), value='username')], id='790'), table_body=[TableRow(location=Location(line=83, column=5), cells=[TableCell(location=Location(line=83, column=7), value='godzilla')], id='791'), TableRow(location=Location(line=84, column=5), cells=[TableCell(location=Location(line=84, column=7), value='tengu')], id='792')], id='793')], id='794'), '788': Step(location=Location(line=78, column=5), keyword='When ', keyword_type=<KeywordType.action: 'Action'>, text='God deletes the MindWM user resource \"<username>\"', doc_string=None, data_table=None, id='788'), '789': Step(location=Location(line=79, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the user \"<username>\" should be deleted', doc_string=None, data_table=None, id='789'), '793': Examples(location=Location(line=81, column=5), tags=[], keyword='Examples', name='', description='', table_header=TableRow(location=Location(line=82, column=5), cells=[TableCell(location=Location(line=82, column=7), value='username')], id='790'), table_body=[TableRow(location=Location(line=83, column=5), cells=[TableCell(location=Location(line=83, column=7), value='godzilla')], id='791'), TableRow(location=Location(line=84, column=5), cells=[TableCell(location=Location(line=84, column=7), value='tengu')], id='792')], id='793'), '790': TableRow(location=Location(line=82, column=5), cells=[TableCell(location=Location(line=82, column=7), value='username')], id='790'), '791': TableRow(location=Location(line=83, column=5), cells=[TableCell(location=Location(line=83, column=7), value='godzilla')], id='791'), '792': TableRow(location=Location(line=84, column=5), cells=[TableCell(location=Location(line=84, column=7), value='tengu')], id='792'), '800': Scenario(location=Location(line=86, column=3), tags=[], keyword='Scenario', name='Cleanup <context> context', description='', steps=[Step(location=Location(line=87, column=5), keyword='When ', keyword_type=<KeywordType.action: 'Action'>, text='God deletes the MindWM context resource \"<context>\"', doc_string=None, data_table=None, id='795'), Step(location=Location(line=88, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the context \"<context>\" should be deleted', doc_string=None, data_table=None, id='796')], examples=[Examples(location=Location(line=90, column=5), tags=[], keyword='Examples', name='', description='', table_header=TableRow(location=Location(line=91, column=5), cells=[TableCell(location=Location(line=91, column=7), value='context')], id='797'), table_body=[TableRow(location=Location(line=92, column=5), cells=[TableCell(location=Location(line=92, column=7), value='tokyo')], id='798')], id='799')], id='800'), '795': Step(location=Location(line=87, column=5), keyword='When ', keyword_type=<KeywordType.action: 'Action'>, text='God deletes the MindWM context resource \"<context>\"', doc_string=None, data_table=None, id='795'), '796': Step(location=Location(line=88, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the context \"<context>\" should be deleted', doc_string=None, data_table=None, id='796'), '799': Examples(location=Location(line=90, column=5), tags=[], keyword='Examples', name='', description='', table_header=TableRow(location=Location(line=91, column=5), cells=[TableCell(location=Location(line=91, column=7), value='context')], id='797'), table_body=[TableRow(location=Location(line=92, column=5), cells=[TableCell(location=Location(line=92, column=7), value='tokyo')], id='798')], id='799'), '797': TableRow(location=Location(line=91, column=5), cells=[TableCell(location=Location(line=91, column=7), value='context')], id='797'), '798': TableRow(location=Location(line=92, column=5), cells=[TableCell(location=Location(line=92, column=7), value='tokyo')], id='798')}, pickles=[Pickle(id='809', uri='file:features/7_mindwm_two_users_one_context.feature', name='Create context tokyo', language='en', steps=[PickleStep(argument=None, ast_node_ids=['736'], id='803', type=<Type.context: 'Context'>, text='A MindWM environment'), PickleStep(argument=None, ast_node_ids=['737'], id='804', type=<Type.outcome: 'Outcome'>, text='all nodes in Kubernetes are ready'), PickleStep(argument=None, ast_node_ids=['739', '748'], id='805', type=<Type.action: 'Action'>, text='God creates a MindWM context with the name \"tokyo\"'), PickleStep(argument=None, ast_node_ids=['740', '748'], id='806', type=<Type.outcome: 'Outcome'>, text='the context should be ready and operable'), PickleStep(argument=PickleStepArgument(doc_string=None, data_table=PickleTable(rows=[PickleTableRow(cells=[PickleTableCell(value='Knative service name')]), PickleTableRow(cells=[PickleTableCell(value='iocontext')]), PickleTableRow(cells=[PickleTableCell(value='pong')]), PickleTableRow(cells=[PickleTableCell(value='kafka-cdc')])])), ast_node_ids=['745', '748'], id='807', type=<Type.outcome: 'Outcome'>, text='the following knative services are in a ready state in the \"context-tokyo\" namespace'), PickleStep(argument=None, ast_node_ids=['746', '748'], id='808', type=<Type.outcome: 'Outcome'>, text='statefulset \"tokyo-neo4j\" in namespace \"context-tokyo\" is in ready state')], tags=[PickleTag(name='@mindwm_two_users_one_context', ast_node_id='801'), PickleTag(name='@mindwm_test', ast_node_id='802')], ast_node_ids=['750', '748']), Pickle(id='814', uri='file:features/7_mindwm_two_users_one_context.feature', name='Create godzilla and connects it to tokyo', language='en', steps=[PickleStep(argument=None, ast_node_ids=['736'], id='810', type=<Type.context: 'Context'>, text='A MindWM environment'), PickleStep(argument=None, ast_node_ids=['737'], id='811', type=<Type.outcome: 'Outcome'>, text='all nodes in Kubernetes are ready'), PickleStep(argument=None, ast_node_ids=['751', '754'], id='812', type=<Type.action: 'Action'>, text='God creates a MindWM user resource with the name \"godzilla\" and connects it to the context \"tokyo\"'), PickleStep(argument=None, ast_node_ids=['752', '754'], id='813', type=<Type.outcome: 'Outcome'>, text='the user resource should be ready and operable')], tags=[PickleTag(name='@mindwm_two_users_one_context', ast_node_id='801'), PickleTag(name='@mindwm_test', ast_node_id='802')], ast_node_ids=['757', '754']), Pickle(id='819', uri='file:features/7_mindwm_two_users_one_context.feature', name='Create tengu and connects it to tokyo', language='en', steps=[PickleStep(argument=None, ast_node_ids=['736'], id='815', type=<Type.context: 'Context'>, text='A MindWM environment'), PickleStep(argument=None, ast_node_ids=['737'], id='816', type=<Type.outcome: 'Outcome'>, text='all nodes in Kubernetes are ready'), PickleStep(argument=None, ast_node_ids=['751', '755'], id='817', type=<Type.action: 'Action'>, text='God creates a MindWM user resource with the name \"tengu\" and connects it to the context \"tokyo\"'), PickleStep(argument=None, ast_node_ids=['752', '755'], id='818', type=<Type.outcome: 'Outcome'>, text='the user resource should be ready and operable')], tags=[PickleTag(name='@mindwm_two_users_one_context', ast_node_id='801'), PickleTag(name='@mindwm_test', ast_node_id='802')], ast_node_ids=['757', '755']), Pickle(id='824', uri='file:features/7_mindwm_two_users_one_context.feature', name='Create laptop resource and connects it to godzilla user', language='en', steps=[PickleStep(argument=None, ast_node_ids=['736'], id='820', type=<Type.context: 'Context'>, text='A MindWM environment'), PickleStep(argument=None, ast_node_ids=['737'], id='821', type=<Type.outcome: 'Outcome'>, text='all nodes in Kubernetes are ready'), PickleStep(argument=None, ast_node_ids=['758', '761'], id='822', type=<Type.action: 'Action'>, text='God creates a MindWM host resource with the name \"laptop\" and connects it to the user \"godzilla\"'), PickleStep(argument=None, ast_node_ids=['759', '761'], id='823', type=<Type.outcome: 'Outcome'>, text='the host resource should be ready and operable')], tags=[PickleTag(name='@mindwm_two_users_one_context', ast_node_id='801'), PickleTag(name='@mindwm_test', ast_node_id='802')], ast_node_ids=['764', '761']), Pickle(id='829', uri='file:features/7_mindwm_two_users_one_context.feature', name='Create tablet resource and connects it to tengu user', language='en', steps=[PickleStep(argument=None, ast_node_ids=['736'], id='825', type=<Type.context: 'Context'>, text='A MindWM environment'), PickleStep(argument=None, ast_node_ids=['737'], id='826', type=<Type.outcome: 'Outcome'>, text='all nodes in Kubernetes are ready'), PickleStep(argument=None, ast_node_ids=['758', '762'], id='827', type=<Type.action: 'Action'>, text='God creates a MindWM host resource with the name \"tablet\" and connects it to the user \"tengu\"'), PickleStep(argument=None, ast_node_ids=['759', '762'], id='828', type=<Type.outcome: 'Outcome'>, text='the host resource should be ready and operable')], tags=[PickleTag(name='@mindwm_two_users_one_context', ast_node_id='801'), PickleTag(name='@mindwm_test', ast_node_id='802')], ast_node_ids=['764', '762']), Pickle(id='840', uri='file:features/7_mindwm_two_users_one_context.feature', name='Send iodocument via nats host: <host>, user: <username> and check that second user received graph update', language='en', steps=[PickleStep(argument=None, ast_node_ids=['736'], id='830', type=<Type.context: 'Context'>, text='A MindWM environment'), PickleStep(argument=None, ast_node_ids=['737'], id='831', type=<Type.outcome: 'Outcome'>, text='all nodes in Kubernetes are ready'), PickleStep(argument=None, ast_node_ids=['765', '777'], id='832', type=<Type.action: 'Action'>, text='God creates a new cloudevent'), PickleStep(argument=None, ast_node_ids=['766', '777'], id='833', type=<Type.action: 'Action'>, text='God starts reading message from NATS topic \">\"'), PickleStep(argument=None, ast_node_ids=['767', '777'], id='834', type=<Type.action: 'Action'>, text='sets cloudevent header \"ce-subject\" to \"id\"'), PickleStep(argument=None, ast_node_ids=['768', '777'], id='835', type=<Type.action: 'Action'>, text='sets cloudevent header \"ce-type\" to \"org.mindwm.v1.iodocument\"'), PickleStep(argument=None, ast_node_ids=['769', '777'], id='836', type=<Type.action: 'Action'>, text='sets cloudevent header \"ce-source\" to \"org.mindwm.godzilla.laptop.L3RtcC90bXV4LTEwMDAvZGVmYXVsdA==.8d839f82-79da-11ef-bc9f-f74fac7543ac.23.36.iodocument\"'), PickleStep(argument=PickleStepArgument(doc_string=PickleDocString(media_type=None, content='{\\n  \"input\": \"id\",\\n  \"output\": \"uid=1000(pion) gid=1000(pion) groups=1000(pion),4(adm),100(users),112(tmux),988(docker)\",\\n  \"ps1\": \"pion@mindwm-stg1:~/work/dev/mindwm-manager$\",\\n  \"type\": \"org.mindwm.v1.iodocument\"\\n} '), data_table=None), ast_node_ids=['770', '777'], id='837', type=<Type.action: 'Action'>, text='sends cloudevent to nats topic \"org.mindwm.godzilla.laptop.L3RtcC90bXV4LTEwMDAvZGVmYXVsdA==.8d839f82-79da-11ef-bc9f-f74fac7543ac.23.36.iodocument\"'), PickleStep(argument=PickleStepArgument(doc_string=None, data_table=PickleTable(rows=[PickleTableRow(cells=[PickleTableCell(value='Deployment name')]), PickleTableRow(cells=[PickleTableCell(value='iocontext-00001-deployment')]), PickleTableRow(cells=[PickleTableCell(value='kafka-cdc-00001-deployment')])])), ast_node_ids=['774', '777'], id='838', type=<Type.outcome: 'Outcome'>, text='the following deployments are in a ready state in the \"context-tokyo\" namespace'), PickleStep(argument=None, ast_node_ids=['775', '777'], id='839', type=<Type.outcome: 'Outcome'>, text='a cloudevent with type == \"org.mindwm.v1.graph.created\" should have been received from the NATS topic \"user-tengu.tablet-host-broker-kne-trigger._knative\"')], tags=[PickleTag(name='@mindwm_two_users_one_context', ast_node_id='801'), PickleTag(name='@mindwm_test', ast_node_id='802')], ast_node_ids=['780', '777']), Pickle(id='851', uri='file:features/7_mindwm_two_users_one_context.feature', name='Send iodocument via nats host: <host>, user: <username> and check that second user received graph update', language='en', steps=[PickleStep(argument=None, ast_node_ids=['736'], id='841', type=<Type.context: 'Context'>, text='A MindWM environment'), PickleStep(argument=None, ast_node_ids=['737'], id='842', type=<Type.outcome: 'Outcome'>, text='all nodes in Kubernetes are ready'), PickleStep(argument=None, ast_node_ids=['765', '778'], id='843', type=<Type.action: 'Action'>, text='God creates a new cloudevent'), PickleStep(argument=None, ast_node_ids=['766', '778'], id='844', type=<Type.action: 'Action'>, text='God starts reading message from NATS topic \">\"'), PickleStep(argument=None, ast_node_ids=['767', '778'], id='845', type=<Type.action: 'Action'>, text='sets cloudevent header \"ce-subject\" to \"id\"'), PickleStep(argument=None, ast_node_ids=['768', '778'], id='846', type=<Type.action: 'Action'>, text='sets cloudevent header \"ce-type\" to \"org.mindwm.v1.iodocument\"'), PickleStep(argument=None, ast_node_ids=['769', '778'], id='847', type=<Type.action: 'Action'>, text='sets cloudevent header \"ce-source\" to \"org.mindwm.tengu.tablet.L3RtcC90bXV4LTEwMDAvZGVmYXVsdA==.8d839f82-79da-11ef-bc9f-f74fac7543ac.23.36.iodocument\"'), PickleStep(argument=PickleStepArgument(doc_string=PickleDocString(media_type=None, content='{\\n  \"input\": \"id\",\\n  \"output\": \"uid=1000(pion) gid=1000(pion) groups=1000(pion),4(adm),100(users),112(tmux),988(docker)\",\\n  \"ps1\": \"pion@mindwm-stg1:~/work/dev/mindwm-manager$\",\\n  \"type\": \"org.mindwm.v1.iodocument\"\\n} '), data_table=None), ast_node_ids=['770', '778'], id='848', type=<Type.action: 'Action'>, text='sends cloudevent to nats topic \"org.mindwm.tengu.tablet.L3RtcC90bXV4LTEwMDAvZGVmYXVsdA==.8d839f82-79da-11ef-bc9f-f74fac7543ac.23.36.iodocument\"'), PickleStep(argument=PickleStepArgument(doc_string=None, data_table=PickleTable(rows=[PickleTableRow(cells=[PickleTableCell(value='Deployment name')]), PickleTableRow(cells=[PickleTableCell(value='iocontext-00001-deployment')]), PickleTableRow(cells=[PickleTableCell(value='kafka-cdc-00001-deployment')])])), ast_node_ids=['774', '778'], id='849', type=<Type.outcome: 'Outcome'>, text='the following deployments are in a ready state in the \"context-tokyo\" namespace'), PickleStep(argument=None, ast_node_ids=['775', '778'], id='850', type=<Type.outcome: 'Outcome'>, text='a cloudevent with type == \"org.mindwm.v1.graph.created\" should have been received from the NATS topic \"user-godzilla.laptop-host-broker-kne-trigger._knative\"')], tags=[PickleTag(name='@mindwm_two_users_one_context', ast_node_id='801'), PickleTag(name='@mindwm_test', ast_node_id='802')], ast_node_ids=['780', '778']), Pickle(id='856', uri='file:features/7_mindwm_two_users_one_context.feature', name='Cleanup laptop host for godzilla username', language='en', steps=[PickleStep(argument=None, ast_node_ids=['736'], id='852', type=<Type.context: 'Context'>, text='A MindWM environment'), PickleStep(argument=None, ast_node_ids=['737'], id='853', type=<Type.outcome: 'Outcome'>, text='all nodes in Kubernetes are ready'), PickleStep(argument=None, ast_node_ids=['781', '784'], id='854', type=<Type.action: 'Action'>, text='God deletes the MindWM host resource \"laptop\"'), PickleStep(argument=None, ast_node_ids=['782', '784'], id='855', type=<Type.outcome: 'Outcome'>, text='the host \"laptop\" should be deleted')], tags=[PickleTag(name='@mindwm_two_users_one_context', ast_node_id='801'), PickleTag(name='@mindwm_test', ast_node_id='802')], ast_node_ids=['787', '784']), Pickle(id='861', uri='file:features/7_mindwm_two_users_one_context.feature', name='Cleanup tablet host for tengu username', language='en', steps=[PickleStep(argument=None, ast_node_ids=['736'], id='857', type=<Type.context: 'Context'>, text='A MindWM environment'), PickleStep(argument=None, ast_node_ids=['737'], id='858', type=<Type.outcome: 'Outcome'>, text='all nodes in Kubernetes are ready'), PickleStep(argument=None, ast_node_ids=['781', '785'], id='859', type=<Type.action: 'Action'>, text='God deletes the MindWM host resource \"tablet\"'), PickleStep(argument=None, ast_node_ids=['782', '785'], id='860', type=<Type.outcome: 'Outcome'>, text='the host \"tablet\" should be deleted')], tags=[PickleTag(name='@mindwm_two_users_one_context', ast_node_id='801'), PickleTag(name='@mindwm_test', ast_node_id='802')], ast_node_ids=['787', '785']), Pickle(id='866', uri='file:features/7_mindwm_two_users_one_context.feature', name='Cleanup godzilla username', language='en', steps=[PickleStep(argument=None, ast_node_ids=['736'], id='862', type=<Type.context: 'Context'>, text='A MindWM environment'), PickleStep(argument=None, ast_node_ids=['737'], id='863', type=<Type.outcome: 'Outcome'>, text='all nodes in Kubernetes are ready'), PickleStep(argument=None, ast_node_ids=['788', '791'], id='864', type=<Type.action: 'Action'>, text='God deletes the MindWM user resource \"godzilla\"'), PickleStep(argument=None, ast_node_ids=['789', '791'], id='865', type=<Type.outcome: 'Outcome'>, text='the user \"godzilla\" should be deleted')], tags=[PickleTag(name='@mindwm_two_users_one_context', ast_node_id='801'), PickleTag(name='@mindwm_test', ast_node_id='802')], ast_node_ids=['794', '791']), Pickle(id='871', uri='file:features/7_mindwm_two_users_one_context.feature', name='Cleanup tengu username', language='en', steps=[PickleStep(argument=None, ast_node_ids=['736'], id='867', type=<Type.context: 'Context'>, text='A MindWM environment'), PickleStep(argument=None, ast_node_ids=['737'], id='868', type=<Type.outcome: 'Outcome'>, text='all nodes in Kubernetes are ready'), PickleStep(argument=None, ast_node_ids=['788', '792'], id='869', type=<Type.action: 'Action'>, text='God deletes the MindWM user resource \"tengu\"'), PickleStep(argument=None, ast_node_ids=['789', '792'], id='870', type=<Type.outcome: 'Outcome'>, text='the user \"tengu\" should be deleted')], tags=[PickleTag(name='@mindwm_two_users_one_context', ast_node_id='801'), PickleTag(name='@mindwm_test', ast_node_id='802')], ast_node_ids=['794', '792']), Pickle(id='876', uri='file:features/7_mindwm_two_users_one_context.feature', name='Cleanup tokyo context', language='en', steps=[PickleStep(argument=None, ast_node_ids=['736'], id='872', type=<Type.context: 'Context'>, text='A MindWM environment'), PickleStep(argument=None, ast_node_ids=['737'], id='873', type=<Type.outcome: 'Outcome'>, text='all nodes in Kubernetes are ready'), PickleStep(argument=None, ast_node_ids=['795', '798'], id='874', type=<Type.action: 'Action'>, text='God deletes the MindWM context resource \"tokyo\"'), PickleStep(argument=None, ast_node_ids=['796', '798'], id='875', type=<Type.outcome: 'Outcome'>, text='the context \"tokyo\" should be deleted')], tags=[PickleTag(name='@mindwm_two_users_one_context', ast_node_id='801'), PickleTag(name='@mindwm_test', ast_node_id='802')], ast_node_ids=['800', '798'])])","Source(uri='file:features/7_mindwm_two_users_one_context.feature', data='@mindwm_two_users_one_context\\n@mindwm_test\\nFeature: MindWM two users one context function test\\n  Background:\\n    Given A MindWM environment\\n    Then all nodes in Kubernetes are ready\\n\\n  Scenario: Create context <context>\\n    When God creates a MindWM context with the name \"<context>\"\\n    Then the context should be ready and operable\\n\\n    Then the following knative services are in a ready state in the \"context-<context>\" namespace\\n      | Knative service name |\\n      | iocontext            |\\n      | pong                 |\\n      | kafka-cdc            |\\n    And statefulset \"<context>-neo4j\" in namespace \"context-<context>\" is in ready state\\n    Examples:\\n    | context | \\n    | tokyo   | \\n    \\n  Scenario: Create <username> and connects it to <context>\\n    When God creates a MindWM user resource with the name \"<username>\" and connects it to the context \"<context>\"\\n    Then the user resource should be ready and operable\\n    Examples:\\n    | context | username |\\n    | tokyo   | godzilla |\\n    | tokyo   | tengu    |\\n  Scenario: Create <host> resource and connects it to <username> user\\n    When God creates a MindWM host resource with the name \"<host>\" and connects it to the user \"<username>\"\\n    Then the host resource should be ready and operable\\n\\n    Examples: \\n    | username | host   |\\n    | godzilla | laptop | \\n    | tengu    | tablet | \\n\\n  Scenario: Send iodocument via nats host: <host>, user: <username> and check that second user received graph update\\n    When God creates a new cloudevent \\n      And God starts reading message from NATS topic \">\"\\n      And sets cloudevent header \"ce-subject\" to \"id\"\\n      And sets cloudevent header \"ce-type\" to \"org.mindwm.v1.iodocument\"\\n      And sets cloudevent header \"ce-source\" to \"org.mindwm.<src_user>.<src_host>.L3RtcC90bXV4LTEwMDAvZGVmYXVsdA==.8d839f82-79da-11ef-bc9f-f74fac7543ac.23.36.iodocument\"\\n      And sends cloudevent to nats topic \"org.mindwm.<src_user>.<src_host>.L3RtcC90bXV4LTEwMDAvZGVmYXVsdA==.8d839f82-79da-11ef-bc9f-f74fac7543ac.23.36.iodocument\"\\n      \"\"\"\\n      {\\n        \"input\": \"id\",\\n        \"output\": \"uid=1000(pion) gid=1000(pion) groups=1000(pion),4(adm),100(users),112(tmux),988(docker)\",\\n        \"ps1\": \"pion@mindwm-stg1:~/work/dev/mindwm-manager$\",\\n        \"type\": \"org.mindwm.v1.iodocument\"\\n      } \\n      \"\"\"\\n\\n    Then the following deployments are in a ready state in the \"context-<context>\" namespace\\n      | Deployment name            |\\n      | iocontext-00001-deployment |\\n      | kafka-cdc-00001-deployment |\\n\\n    And a cloudevent with type == \"org.mindwm.v1.graph.created\" should have been received from the NATS topic \"user-<dst_user>.<dst_host>-host-broker-kne-trigger._knative\"\\n\\n    Examples:\\n    | context | src_user | src_host | dst_user | dst_host |  \\n    | tokyo   | godzilla | laptop   | tengu    | tablet   |\\n    | tokyo   | tengu    | tablet   | godzilla | laptop   | \\n\\n\\n  Scenario: Cleanup <host> host for <username> username\\n\\n    When God deletes the MindWM host resource \"<host>\"\\n    Then the host \"<host>\" should be deleted\\n\\n    Examples:\\n    | username | host   |\\n    | godzilla | laptop | \\n    | tengu    | tablet | \\n\\n  Scenario: Cleanup <username> username\\n    When God deletes the MindWM user resource \"<username>\"\\n    Then the user \"<username>\" should be deleted\\n\\n    Examples:\\n    | username | \\n    | godzilla |\\n    | tengu    | \\n\\n  Scenario: Cleanup <context> context\\n    When God deletes the MindWM context resource \"<context>\"\\n    Then the context \"<context>\" should be deleted\\n\\n    Examples:\\n    | context | \\n    | tokyo   |\\n', media_type='text/x.cucumber.gherkin+plain')","Pickle(id='809', uri='file:features/7_mindwm_two_users_one_context.feature', name='Create context tokyo', language='en', steps=[PickleStep(argument=None, ast_node_ids=['736'], id='803', type=<Type.context: 'Context'>, text='A MindWM environment'), PickleStep(argument=None, ast_node_ids=['737'], id='804', type=<Type.outcome: 'Outcome'>, text='all nodes in Kubernetes are ready'), PickleStep(argument=None, ast_node_ids=['739', '748'], id='805', type=<Type.action: 'Action'>, text='God creates a MindWM context with the name \"tokyo\"'), PickleStep(argument=None, ast_node_ids=['740', '748'], id='806', type=<Type.outcome: 'Outcome'>, text='the context should be ready and operable'), PickleStep(argument=PickleStepArgument(doc_string=None, data_table=PickleTable(rows=[PickleTableRow(cells=[PickleTableCell(value='Knative service name')]), PickleTableRow(cells=[PickleTableCell(value='iocontext')]), PickleTableRow(cells=[PickleTableCell(value='pong')]), PickleTableRow(cells=[PickleTableCell(value='kafka-cdc')])])), ast_node_ids=['745', '748'], id='807', type=<Type.outcome: 'Outcome'>, text='the following knative services are in a ready state in the \"context-tokyo\" namespace'), PickleStep(argument=None, ast_node_ids=['746', '748'], id='808', type=<Type.outcome: 'Outcome'>, text='statefulset \"tokyo-neo4j\" in namespace \"context-tokyo\" is in ready state')], tags=[PickleTag(name='@mindwm_two_users_one_context', ast_node_id='801'), PickleTag(name='@mindwm_test', ast_node_id='802')], ast_node_ids=['750', '748'])"]}