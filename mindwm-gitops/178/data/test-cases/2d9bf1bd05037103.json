{"uid":"2d9bf1bd05037103","name":"test_scenarios[file:features/4_mindwm_io_context.feature-MindWM io context function test-io context red[table_rows:[line: 57]]]","fullName":"features.4_mindwm_io_context#test_scenarios","historyId":"233ce389a296f5c0d1c69a45845bd068","time":{"start":1728325023828,"stop":1728325173602,"duration":149774},"status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"pytestconfig","time":{"start":1728323533410,"stop":1728323533410,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"steps_left","time":{"start":1728325023828,"stop":1728325023829,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"step_registry","time":{"start":1728325023829,"stop":1728325023829,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"parameter_type_registry","time":{"start":1728325023829,"stop":1728325023829,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"step_matcher","time":{"start":1728325023829,"stop":1728325023829,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"step_registry","time":{"start":1728325023829,"stop":1728325023829,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"kube","time":{"start":1728325023832,"stop":1728325023837,"duration":5},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"kubecontext","time":{"start":1728325023832,"stop":1728325023832,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"kubeconfig","time":{"start":1728325023832,"stop":1728325023832,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"ctx","time":{"start":1728325024024,"stop":1728325024024,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"cloudevent","time":{"start":1728325147928,"stop":1728325147928,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"http_response","time":{"start":1728325147966,"stop":1728325147966,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"trace_data","time":{"start":1728325162901,"stop":1728325162901,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false}],"testStage":{"status":"passed","steps":[{"name":"Mindwm crd 'xcontexts' is exist","time":{"start":1728325023888,"stop":1728325023888,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"Mindwm crd 'xhosts' is exist","time":{"start":1728325023917,"stop":1728325023917,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"Mindwm crd 'xusers' is exist","time":{"start":1728325023945,"stop":1728325023945,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"Kubernetes node 'localhost' are True","time":{"start":1728325024006,"stop":1728325024006,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"Create context 'red'","time":{"start":1728325024053,"stop":1728325024053,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"Knative service 'context-red'/'iocontext' ready state is Unknown","time":{"start":1728325030320,"stop":1728325030320,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"Statefulset 'red-neo4j' in 'context-red' is ready","time":{"start":1728325125689,"stop":1728325125690,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"Create user 'kitty' with context red","time":{"start":1728325125714,"stop":1728325125714,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"Host 'tablet' has created","time":{"start":1728325136850,"stop":1728325136850,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"Wait for deployment 'iocontext-00001-deployment' ready state","time":{"start":1728325162850,"stop":1728325162850,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"Node 'User' has property username == kitty in red","time":{"start":1728325173208,"stop":1728325173208,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"Node 'Host' has property hostname == tablet in red","time":{"start":1728325173400,"stop":1728325173400,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"Node 'IoDocument' has property input == id in red","time":{"start":1728325173600,"stop":1728325173600,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":13,"attachmentsCount":0,"hasContent":true},"afterStages":[],"labels":[{"name":"tag","value":"scenarios(PosixPath('/home/ci/mindwm-gitops/tests/mindwm_bdd/features/4_mindwm_io_context.feature'), filter_=None, encoding='utf-8', features_base_dir=None, features_base_url=None, features_path_type=<FeaturePathType.PATH: 'path'>, features_mimetype=None, parser_type=None, parse_args=Args(args=(), kwargs={}), locators=())"},{"name":"tag","value":"@pytest.mark.usefixtures('feature', 'scenario', 'feature_source')"},{"name":"tag","value":"pytest_bdd_scenario"},{"name":"tag","value":"mindwm_io_context"},{"name":"tag","value":"mindwm_test"},{"name":"tag","value":"namespace(create=False, name='default')"},{"name":"parentSuite","value":"features"},{"name":"suite","value":"4_mindwm_io_context"},{"name":"host","value":"localhost"},{"name":"thread","value":"4270-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"features.4_mindwm_io_context"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"feature","value":"Feature(gherkin_document=GherkinDocument(uri='file:features/4_mindwm_io_context.feature', feature=Feature(location=Location(line=3, column=1), tags=[Tag(location=Location(line=1, column=1), name='@mindwm_io_context', id='493'), Tag(location=Location(line=2, column=1), name='@mindwm_test', id='494')], language='en', keyword='Feature', name='MindWM io context function test', description='', children=[FeatureChild(rule=None, background=Background(location=Location(line=4, column=3), keyword='Background', name='', description='', steps=[Step(location=Location(line=5, column=5), keyword='Given ', keyword_type=<KeywordType.context: 'Context'>, text='A MindWM environment', doc_string=None, data_table=None, id='449'), Step(location=Location(line=6, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='all nodes in Kubernetes are ready', doc_string=None, data_table=None, id='450')], id='451'), scenario=None), FeatureChild(rule=None, background=None, scenario=Scenario(location=Location(line=8, column=3), tags=[], keyword='Scenario', name='io context <context>', description='', steps=[Step(location=Location(line=10, column=5), keyword='When ', keyword_type=<KeywordType.action: 'Action'>, text='God creates a MindWM context with the name \"<context>\"', doc_string=None, data_table=None, id='452'), Step(location=Location(line=11, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the context should be ready and operable', doc_string=None, data_table=None, id='453'), Step(location=Location(line=12, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the following knative services are in a ready state in the \"context-<context>\" namespace', doc_string=None, data_table=DataTable(location=Location(line=13, column=7), rows=[TableRow(location=Location(line=13, column=7), cells=[TableCell(location=Location(line=13, column=9), value='Knative service name')], id='454'), TableRow(location=Location(line=14, column=7), cells=[TableCell(location=Location(line=14, column=9), value='iocontext')], id='455')]), id='456'), Step(location=Location(line=15, column=5), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='statefulset \"<context>-neo4j\" in namespace \"context-<context>\" is in ready state', doc_string=None, data_table=None, id='457'), Step(location=Location(line=17, column=5), keyword='When ', keyword_type=<KeywordType.action: 'Action'>, text='God creates a MindWM user resource with the name \"<username>\" and connects it to the context \"<context>\"', doc_string=None, data_table=None, id='458'), Step(location=Location(line=18, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the user resource should be ready and operable', doc_string=None, data_table=None, id='459'), Step(location=Location(line=20, column=5), keyword='When ', keyword_type=<KeywordType.action: 'Action'>, text='God creates a MindWM host resource with the name \"<host>\" and connects it to the user \"<username>\"', doc_string=None, data_table=None, id='460'), Step(location=Location(line=21, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the host resource should be ready and operable', doc_string=None, data_table=None, id='461'), Step(location=Location(line=27, column=5), keyword='When ', keyword_type=<KeywordType.action: 'Action'>, text='God creates a new cloudevent', doc_string=None, data_table=None, id='462'), Step(location=Location(line=28, column=7), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='sets cloudevent header \"ce-id\" to \"<cloudevent_id>\"', doc_string=None, data_table=None, id='463'), Step(location=Location(line=29, column=7), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='sets cloudevent header \"traceparent\" to \"<traceparent>\"', doc_string=None, data_table=None, id='464'), Step(location=Location(line=30, column=7), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='sets cloudevent header \"ce-subject\" to \"id\"', doc_string=None, data_table=None, id='465'), Step(location=Location(line=31, column=7), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='sets cloudevent header \"ce-source\" to \"org.mindwm.<username>.<host>.L3RtcC90bXV4LTEwMDAvZGVmYXVsdA==.09fb195c-c419-6d62-15e0-51b6ee990922.23.36.iodocument\"', doc_string=None, data_table=None, id='466'), Step(location=Location(line=32, column=7), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='sets cloudevent header \"ce-type\" to \"org.mindwm.v1.iodocument\"', doc_string=None, data_table=None, id='467'), Step(location=Location(line=33, column=7), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='sends cloudevent to \"broker-ingress.knative-eventing/context-<context>/context-broker\"', doc_string=DocString(location=Location(line=34, column=9), media_type=None, content='{\\t\\n  \"input\": \"id\",\\n  \"output\": \"uid=1000(pion) gid=1000(pion) groups=1000(pion),4(adm),100(users),112(tmux),988(docker)\",\\n  \"ps1\": \"pion@mindwm-stg1:~/work/dev/mindwm-manager$\",\\n  \"type\": \"org.mindwm.v1.iodocument\"\\n}', delimiter='\"\"\"'), data_table=None, id='468'), Step(location=Location(line=42, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the response http code should be \"202\"', doc_string=None, data_table=None, id='469'), Step(location=Location(line=43, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the following deployments are in a ready state in the \"context-<context>\" namespace', doc_string=None, data_table=DataTable(location=Location(line=44, column=7), rows=[TableRow(location=Location(line=44, column=7), cells=[TableCell(location=Location(line=44, column=9), value='Deployment name')], id='470'), TableRow(location=Location(line=45, column=7), cells=[TableCell(location=Location(line=45, column=9), value='iocontext-00001-deployment')], id='471')]), id='472'), Step(location=Location(line=46, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the trace with \"<traceparent>\" should appear in TraceQL', doc_string=None, data_table=None, id='473'), Step(location=Location(line=47, column=5), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='the trace should contains', doc_string=None, data_table=DataTable(location=Location(line=48, column=7), rows=[TableRow(location=Location(line=48, column=7), cells=[TableCell(location=Location(line=48, column=9), value='service name')], id='474'), TableRow(location=Location(line=49, column=7), cells=[TableCell(location=Location(line=49, column=9), value='broker-ingress.knative-eventing')], id='475'), TableRow(location=Location(line=50, column=7), cells=[TableCell(location=Location(line=50, column=9), value='unknown_service')], id='476')]), id='477'), Step(location=Location(line=51, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='graph have node \"User\" with property \"username\" = \"<username>\" in context \"<context>\"', doc_string=None, data_table=None, id='478'), Step(location=Location(line=52, column=5), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='graph have node \"Host\" with property \"hostname\" = \"<host>\" in context \"<context>\"', doc_string=None, data_table=None, id='479'), Step(location=Location(line=53, column=5), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='graph have node \"IoDocument\" with property \"input\" = \"id\" in context \"<context>\"', doc_string=None, data_table=None, id='480')], examples=[Examples(location=Location(line=55, column=5), tags=[], keyword='Examples', name='', description='', table_header=TableRow(location=Location(line=56, column=6), cells=[TableCell(location=Location(line=56, column=8), value='context'), TableCell(location=Location(line=56, column=18), value='username'), TableCell(location=Location(line=56, column=31), value='host'), TableCell(location=Location(line=56, column=43), value='cloudevent_id'), TableCell(location=Location(line=56, column=82), value='traceparent')], id='481'), table_body=[TableRow(location=Location(line=57, column=6), cells=[TableCell(location=Location(line=57, column=8), value='red'), TableCell(location=Location(line=57, column=18), value='kitty'), TableCell(location=Location(line=57, column=31), value='tablet'), TableCell(location=Location(line=57, column=43), value='442af213-c860-4535-b639-355f13b2d883'), TableCell(location=Location(line=57, column=82), value='00-7df92f3577b34da6a3ce930d0e0e4734-00f064aa0ba902b8-00')], id='482')], id='483')], id='484')), FeatureChild(rule=None, background=None, scenario=Scenario(location=Location(line=60, column=3), tags=[], keyword='Scenario', name='Cleanup <username>@<host> in <context>', description='', steps=[Step(location=Location(line=61, column=5), keyword='When ', keyword_type=<KeywordType.action: 'Action'>, text='God deletes the MindWM host resource \"<host>\"', doc_string=None, data_table=None, id='485'), Step(location=Location(line=62, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the host \"<host>\" should be deleted', doc_string=None, data_table=None, id='486'), Step(location=Location(line=64, column=5), keyword='When ', keyword_type=<KeywordType.action: 'Action'>, text='God deletes the MindWM user resource \"<username>\"', doc_string=None, data_table=None, id='487'), Step(location=Location(line=66, column=5), keyword='When ', keyword_type=<KeywordType.action: 'Action'>, text='God deletes the MindWM context resource \"<context>\"', doc_string=None, data_table=None, id='488')], examples=[Examples(location=Location(line=68, column=5), tags=[], keyword='Examples', name='', description='', table_header=TableRow(location=Location(line=69, column=5), cells=[TableCell(location=Location(line=69, column=7), value='context'), TableCell(location=Location(line=69, column=17), value='username'), TableCell(location=Location(line=69, column=28), value='host')], id='489'), table_body=[TableRow(location=Location(line=70, column=5), cells=[TableCell(location=Location(line=70, column=7), value='red'), TableCell(location=Location(line=70, column=17), value='kitty'), TableCell(location=Location(line=70, column=28), value='tablet')], id='490')], id='491')], id='492'))]), comments=[Comment(location=Location(line=22, column=1), text='    # When God makes graph query in context \"<context>\"'), Comment(location=Location(line=23, column=1), text='    #   \"\"\"'), Comment(location=Location(line=24, column=1), text='    #   MATCH (N) DETACH DELETE N;'), Comment(location=Location(line=25, column=1), text='    #   \"\"\"')]), uri='file:features/4_mindwm_io_context.feature', filename='/home/ci/mindwm-gitops/tests/mindwm_bdd/features/4_mindwm_io_context.feature', registry={'493': Tag(location=Location(line=1, column=1), name='@mindwm_io_context', id='493'), '494': Tag(location=Location(line=2, column=1), name='@mindwm_test', id='494'), '451': Background(location=Location(line=4, column=3), keyword='Background', name='', description='', steps=[Step(location=Location(line=5, column=5), keyword='Given ', keyword_type=<KeywordType.context: 'Context'>, text='A MindWM environment', doc_string=None, data_table=None, id='449'), Step(location=Location(line=6, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='all nodes in Kubernetes are ready', doc_string=None, data_table=None, id='450')], id='451'), '449': Step(location=Location(line=5, column=5), keyword='Given ', keyword_type=<KeywordType.context: 'Context'>, text='A MindWM environment', doc_string=None, data_table=None, id='449'), '450': Step(location=Location(line=6, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='all nodes in Kubernetes are ready', doc_string=None, data_table=None, id='450'), '484': Scenario(location=Location(line=8, column=3), tags=[], keyword='Scenario', name='io context <context>', description='', steps=[Step(location=Location(line=10, column=5), keyword='When ', keyword_type=<KeywordType.action: 'Action'>, text='God creates a MindWM context with the name \"<context>\"', doc_string=None, data_table=None, id='452'), Step(location=Location(line=11, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the context should be ready and operable', doc_string=None, data_table=None, id='453'), Step(location=Location(line=12, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the following knative services are in a ready state in the \"context-<context>\" namespace', doc_string=None, data_table=DataTable(location=Location(line=13, column=7), rows=[TableRow(location=Location(line=13, column=7), cells=[TableCell(location=Location(line=13, column=9), value='Knative service name')], id='454'), TableRow(location=Location(line=14, column=7), cells=[TableCell(location=Location(line=14, column=9), value='iocontext')], id='455')]), id='456'), Step(location=Location(line=15, column=5), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='statefulset \"<context>-neo4j\" in namespace \"context-<context>\" is in ready state', doc_string=None, data_table=None, id='457'), Step(location=Location(line=17, column=5), keyword='When ', keyword_type=<KeywordType.action: 'Action'>, text='God creates a MindWM user resource with the name \"<username>\" and connects it to the context \"<context>\"', doc_string=None, data_table=None, id='458'), Step(location=Location(line=18, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the user resource should be ready and operable', doc_string=None, data_table=None, id='459'), Step(location=Location(line=20, column=5), keyword='When ', keyword_type=<KeywordType.action: 'Action'>, text='God creates a MindWM host resource with the name \"<host>\" and connects it to the user \"<username>\"', doc_string=None, data_table=None, id='460'), Step(location=Location(line=21, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the host resource should be ready and operable', doc_string=None, data_table=None, id='461'), Step(location=Location(line=27, column=5), keyword='When ', keyword_type=<KeywordType.action: 'Action'>, text='God creates a new cloudevent', doc_string=None, data_table=None, id='462'), Step(location=Location(line=28, column=7), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='sets cloudevent header \"ce-id\" to \"<cloudevent_id>\"', doc_string=None, data_table=None, id='463'), Step(location=Location(line=29, column=7), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='sets cloudevent header \"traceparent\" to \"<traceparent>\"', doc_string=None, data_table=None, id='464'), Step(location=Location(line=30, column=7), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='sets cloudevent header \"ce-subject\" to \"id\"', doc_string=None, data_table=None, id='465'), Step(location=Location(line=31, column=7), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='sets cloudevent header \"ce-source\" to \"org.mindwm.<username>.<host>.L3RtcC90bXV4LTEwMDAvZGVmYXVsdA==.09fb195c-c419-6d62-15e0-51b6ee990922.23.36.iodocument\"', doc_string=None, data_table=None, id='466'), Step(location=Location(line=32, column=7), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='sets cloudevent header \"ce-type\" to \"org.mindwm.v1.iodocument\"', doc_string=None, data_table=None, id='467'), Step(location=Location(line=33, column=7), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='sends cloudevent to \"broker-ingress.knative-eventing/context-<context>/context-broker\"', doc_string=DocString(location=Location(line=34, column=9), media_type=None, content='{\\t\\n  \"input\": \"id\",\\n  \"output\": \"uid=1000(pion) gid=1000(pion) groups=1000(pion),4(adm),100(users),112(tmux),988(docker)\",\\n  \"ps1\": \"pion@mindwm-stg1:~/work/dev/mindwm-manager$\",\\n  \"type\": \"org.mindwm.v1.iodocument\"\\n}', delimiter='\"\"\"'), data_table=None, id='468'), Step(location=Location(line=42, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the response http code should be \"202\"', doc_string=None, data_table=None, id='469'), Step(location=Location(line=43, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the following deployments are in a ready state in the \"context-<context>\" namespace', doc_string=None, data_table=DataTable(location=Location(line=44, column=7), rows=[TableRow(location=Location(line=44, column=7), cells=[TableCell(location=Location(line=44, column=9), value='Deployment name')], id='470'), TableRow(location=Location(line=45, column=7), cells=[TableCell(location=Location(line=45, column=9), value='iocontext-00001-deployment')], id='471')]), id='472'), Step(location=Location(line=46, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the trace with \"<traceparent>\" should appear in TraceQL', doc_string=None, data_table=None, id='473'), Step(location=Location(line=47, column=5), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='the trace should contains', doc_string=None, data_table=DataTable(location=Location(line=48, column=7), rows=[TableRow(location=Location(line=48, column=7), cells=[TableCell(location=Location(line=48, column=9), value='service name')], id='474'), TableRow(location=Location(line=49, column=7), cells=[TableCell(location=Location(line=49, column=9), value='broker-ingress.knative-eventing')], id='475'), TableRow(location=Location(line=50, column=7), cells=[TableCell(location=Location(line=50, column=9), value='unknown_service')], id='476')]), id='477'), Step(location=Location(line=51, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='graph have node \"User\" with property \"username\" = \"<username>\" in context \"<context>\"', doc_string=None, data_table=None, id='478'), Step(location=Location(line=52, column=5), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='graph have node \"Host\" with property \"hostname\" = \"<host>\" in context \"<context>\"', doc_string=None, data_table=None, id='479'), Step(location=Location(line=53, column=5), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='graph have node \"IoDocument\" with property \"input\" = \"id\" in context \"<context>\"', doc_string=None, data_table=None, id='480')], examples=[Examples(location=Location(line=55, column=5), tags=[], keyword='Examples', name='', description='', table_header=TableRow(location=Location(line=56, column=6), cells=[TableCell(location=Location(line=56, column=8), value='context'), TableCell(location=Location(line=56, column=18), value='username'), TableCell(location=Location(line=56, column=31), value='host'), TableCell(location=Location(line=56, column=43), value='cloudevent_id'), TableCell(location=Location(line=56, column=82), value='traceparent')], id='481'), table_body=[TableRow(location=Location(line=57, column=6), cells=[TableCell(location=Location(line=57, column=8), value='red'), TableCell(location=Location(line=57, column=18), value='kitty'), TableCell(location=Location(line=57, column=31), value='tablet'), TableCell(location=Location(line=57, column=43), value='442af213-c860-4535-b639-355f13b2d883'), TableCell(location=Location(line=57, column=82), value='00-7df92f3577b34da6a3ce930d0e0e4734-00f064aa0ba902b8-00')], id='482')], id='483')], id='484'), '452': Step(location=Location(line=10, column=5), keyword='When ', keyword_type=<KeywordType.action: 'Action'>, text='God creates a MindWM context with the name \"<context>\"', doc_string=None, data_table=None, id='452'), '453': Step(location=Location(line=11, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the context should be ready and operable', doc_string=None, data_table=None, id='453'), '456': Step(location=Location(line=12, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the following knative services are in a ready state in the \"context-<context>\" namespace', doc_string=None, data_table=DataTable(location=Location(line=13, column=7), rows=[TableRow(location=Location(line=13, column=7), cells=[TableCell(location=Location(line=13, column=9), value='Knative service name')], id='454'), TableRow(location=Location(line=14, column=7), cells=[TableCell(location=Location(line=14, column=9), value='iocontext')], id='455')]), id='456'), '457': Step(location=Location(line=15, column=5), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='statefulset \"<context>-neo4j\" in namespace \"context-<context>\" is in ready state', doc_string=None, data_table=None, id='457'), '458': Step(location=Location(line=17, column=5), keyword='When ', keyword_type=<KeywordType.action: 'Action'>, text='God creates a MindWM user resource with the name \"<username>\" and connects it to the context \"<context>\"', doc_string=None, data_table=None, id='458'), '459': Step(location=Location(line=18, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the user resource should be ready and operable', doc_string=None, data_table=None, id='459'), '460': Step(location=Location(line=20, column=5), keyword='When ', keyword_type=<KeywordType.action: 'Action'>, text='God creates a MindWM host resource with the name \"<host>\" and connects it to the user \"<username>\"', doc_string=None, data_table=None, id='460'), '461': Step(location=Location(line=21, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the host resource should be ready and operable', doc_string=None, data_table=None, id='461'), '462': Step(location=Location(line=27, column=5), keyword='When ', keyword_type=<KeywordType.action: 'Action'>, text='God creates a new cloudevent', doc_string=None, data_table=None, id='462'), '463': Step(location=Location(line=28, column=7), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='sets cloudevent header \"ce-id\" to \"<cloudevent_id>\"', doc_string=None, data_table=None, id='463'), '464': Step(location=Location(line=29, column=7), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='sets cloudevent header \"traceparent\" to \"<traceparent>\"', doc_string=None, data_table=None, id='464'), '465': Step(location=Location(line=30, column=7), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='sets cloudevent header \"ce-subject\" to \"id\"', doc_string=None, data_table=None, id='465'), '466': Step(location=Location(line=31, column=7), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='sets cloudevent header \"ce-source\" to \"org.mindwm.<username>.<host>.L3RtcC90bXV4LTEwMDAvZGVmYXVsdA==.09fb195c-c419-6d62-15e0-51b6ee990922.23.36.iodocument\"', doc_string=None, data_table=None, id='466'), '467': Step(location=Location(line=32, column=7), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='sets cloudevent header \"ce-type\" to \"org.mindwm.v1.iodocument\"', doc_string=None, data_table=None, id='467'), '468': Step(location=Location(line=33, column=7), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='sends cloudevent to \"broker-ingress.knative-eventing/context-<context>/context-broker\"', doc_string=DocString(location=Location(line=34, column=9), media_type=None, content='{\\t\\n  \"input\": \"id\",\\n  \"output\": \"uid=1000(pion) gid=1000(pion) groups=1000(pion),4(adm),100(users),112(tmux),988(docker)\",\\n  \"ps1\": \"pion@mindwm-stg1:~/work/dev/mindwm-manager$\",\\n  \"type\": \"org.mindwm.v1.iodocument\"\\n}', delimiter='\"\"\"'), data_table=None, id='468'), '469': Step(location=Location(line=42, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the response http code should be \"202\"', doc_string=None, data_table=None, id='469'), '472': Step(location=Location(line=43, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the following deployments are in a ready state in the \"context-<context>\" namespace', doc_string=None, data_table=DataTable(location=Location(line=44, column=7), rows=[TableRow(location=Location(line=44, column=7), cells=[TableCell(location=Location(line=44, column=9), value='Deployment name')], id='470'), TableRow(location=Location(line=45, column=7), cells=[TableCell(location=Location(line=45, column=9), value='iocontext-00001-deployment')], id='471')]), id='472'), '473': Step(location=Location(line=46, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the trace with \"<traceparent>\" should appear in TraceQL', doc_string=None, data_table=None, id='473'), '477': Step(location=Location(line=47, column=5), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='the trace should contains', doc_string=None, data_table=DataTable(location=Location(line=48, column=7), rows=[TableRow(location=Location(line=48, column=7), cells=[TableCell(location=Location(line=48, column=9), value='service name')], id='474'), TableRow(location=Location(line=49, column=7), cells=[TableCell(location=Location(line=49, column=9), value='broker-ingress.knative-eventing')], id='475'), TableRow(location=Location(line=50, column=7), cells=[TableCell(location=Location(line=50, column=9), value='unknown_service')], id='476')]), id='477'), '478': Step(location=Location(line=51, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='graph have node \"User\" with property \"username\" = \"<username>\" in context \"<context>\"', doc_string=None, data_table=None, id='478'), '479': Step(location=Location(line=52, column=5), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='graph have node \"Host\" with property \"hostname\" = \"<host>\" in context \"<context>\"', doc_string=None, data_table=None, id='479'), '480': Step(location=Location(line=53, column=5), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='graph have node \"IoDocument\" with property \"input\" = \"id\" in context \"<context>\"', doc_string=None, data_table=None, id='480'), '483': Examples(location=Location(line=55, column=5), tags=[], keyword='Examples', name='', description='', table_header=TableRow(location=Location(line=56, column=6), cells=[TableCell(location=Location(line=56, column=8), value='context'), TableCell(location=Location(line=56, column=18), value='username'), TableCell(location=Location(line=56, column=31), value='host'), TableCell(location=Location(line=56, column=43), value='cloudevent_id'), TableCell(location=Location(line=56, column=82), value='traceparent')], id='481'), table_body=[TableRow(location=Location(line=57, column=6), cells=[TableCell(location=Location(line=57, column=8), value='red'), TableCell(location=Location(line=57, column=18), value='kitty'), TableCell(location=Location(line=57, column=31), value='tablet'), TableCell(location=Location(line=57, column=43), value='442af213-c860-4535-b639-355f13b2d883'), TableCell(location=Location(line=57, column=82), value='00-7df92f3577b34da6a3ce930d0e0e4734-00f064aa0ba902b8-00')], id='482')], id='483'), '481': TableRow(location=Location(line=56, column=6), cells=[TableCell(location=Location(line=56, column=8), value='context'), TableCell(location=Location(line=56, column=18), value='username'), TableCell(location=Location(line=56, column=31), value='host'), TableCell(location=Location(line=56, column=43), value='cloudevent_id'), TableCell(location=Location(line=56, column=82), value='traceparent')], id='481'), '482': TableRow(location=Location(line=57, column=6), cells=[TableCell(location=Location(line=57, column=8), value='red'), TableCell(location=Location(line=57, column=18), value='kitty'), TableCell(location=Location(line=57, column=31), value='tablet'), TableCell(location=Location(line=57, column=43), value='442af213-c860-4535-b639-355f13b2d883'), TableCell(location=Location(line=57, column=82), value='00-7df92f3577b34da6a3ce930d0e0e4734-00f064aa0ba902b8-00')], id='482'), '492': Scenario(location=Location(line=60, column=3), tags=[], keyword='Scenario', name='Cleanup <username>@<host> in <context>', description='', steps=[Step(location=Location(line=61, column=5), keyword='When ', keyword_type=<KeywordType.action: 'Action'>, text='God deletes the MindWM host resource \"<host>\"', doc_string=None, data_table=None, id='485'), Step(location=Location(line=62, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the host \"<host>\" should be deleted', doc_string=None, data_table=None, id='486'), Step(location=Location(line=64, column=5), keyword='When ', keyword_type=<KeywordType.action: 'Action'>, text='God deletes the MindWM user resource \"<username>\"', doc_string=None, data_table=None, id='487'), Step(location=Location(line=66, column=5), keyword='When ', keyword_type=<KeywordType.action: 'Action'>, text='God deletes the MindWM context resource \"<context>\"', doc_string=None, data_table=None, id='488')], examples=[Examples(location=Location(line=68, column=5), tags=[], keyword='Examples', name='', description='', table_header=TableRow(location=Location(line=69, column=5), cells=[TableCell(location=Location(line=69, column=7), value='context'), TableCell(location=Location(line=69, column=17), value='username'), TableCell(location=Location(line=69, column=28), value='host')], id='489'), table_body=[TableRow(location=Location(line=70, column=5), cells=[TableCell(location=Location(line=70, column=7), value='red'), TableCell(location=Location(line=70, column=17), value='kitty'), TableCell(location=Location(line=70, column=28), value='tablet')], id='490')], id='491')], id='492'), '485': Step(location=Location(line=61, column=5), keyword='When ', keyword_type=<KeywordType.action: 'Action'>, text='God deletes the MindWM host resource \"<host>\"', doc_string=None, data_table=None, id='485'), '486': Step(location=Location(line=62, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the host \"<host>\" should be deleted', doc_string=None, data_table=None, id='486'), '487': Step(location=Location(line=64, column=5), keyword='When ', keyword_type=<KeywordType.action: 'Action'>, text='God deletes the MindWM user resource \"<username>\"', doc_string=None, data_table=None, id='487'), '488': Step(location=Location(line=66, column=5), keyword='When ', keyword_type=<KeywordType.action: 'Action'>, text='God deletes the MindWM context resource \"<context>\"', doc_string=None, data_table=None, id='488'), '491': Examples(location=Location(line=68, column=5), tags=[], keyword='Examples', name='', description='', table_header=TableRow(location=Location(line=69, column=5), cells=[TableCell(location=Location(line=69, column=7), value='context'), TableCell(location=Location(line=69, column=17), value='username'), TableCell(location=Location(line=69, column=28), value='host')], id='489'), table_body=[TableRow(location=Location(line=70, column=5), cells=[TableCell(location=Location(line=70, column=7), value='red'), TableCell(location=Location(line=70, column=17), value='kitty'), TableCell(location=Location(line=70, column=28), value='tablet')], id='490')], id='491'), '489': TableRow(location=Location(line=69, column=5), cells=[TableCell(location=Location(line=69, column=7), value='context'), TableCell(location=Location(line=69, column=17), value='username'), TableCell(location=Location(line=69, column=28), value='host')], id='489'), '490': TableRow(location=Location(line=70, column=5), cells=[TableCell(location=Location(line=70, column=7), value='red'), TableCell(location=Location(line=70, column=17), value='kitty'), TableCell(location=Location(line=70, column=28), value='tablet')], id='490')}, pickles=[Pickle(id='519', uri='file:features/4_mindwm_io_context.feature', name='io context red', language='en', steps=[PickleStep(argument=None, ast_node_ids=['449'], id='495', type=<Type.context: 'Context'>, text='A MindWM environment'), PickleStep(argument=None, ast_node_ids=['450'], id='496', type=<Type.outcome: 'Outcome'>, text='all nodes in Kubernetes are ready'), PickleStep(argument=None, ast_node_ids=['452', '482'], id='497', type=<Type.action: 'Action'>, text='God creates a MindWM context with the name \"red\"'), PickleStep(argument=None, ast_node_ids=['453', '482'], id='498', type=<Type.outcome: 'Outcome'>, text='the context should be ready and operable'), PickleStep(argument=PickleStepArgument(doc_string=None, data_table=PickleTable(rows=[PickleTableRow(cells=[PickleTableCell(value='Knative service name')]), PickleTableRow(cells=[PickleTableCell(value='iocontext')])])), ast_node_ids=['456', '482'], id='499', type=<Type.outcome: 'Outcome'>, text='the following knative services are in a ready state in the \"context-red\" namespace'), PickleStep(argument=None, ast_node_ids=['457', '482'], id='500', type=<Type.outcome: 'Outcome'>, text='statefulset \"red-neo4j\" in namespace \"context-red\" is in ready state'), PickleStep(argument=None, ast_node_ids=['458', '482'], id='501', type=<Type.action: 'Action'>, text='God creates a MindWM user resource with the name \"kitty\" and connects it to the context \"red\"'), PickleStep(argument=None, ast_node_ids=['459', '482'], id='502', type=<Type.outcome: 'Outcome'>, text='the user resource should be ready and operable'), PickleStep(argument=None, ast_node_ids=['460', '482'], id='503', type=<Type.action: 'Action'>, text='God creates a MindWM host resource with the name \"tablet\" and connects it to the user \"kitty\"'), PickleStep(argument=None, ast_node_ids=['461', '482'], id='504', type=<Type.outcome: 'Outcome'>, text='the host resource should be ready and operable'), PickleStep(argument=None, ast_node_ids=['462', '482'], id='505', type=<Type.action: 'Action'>, text='God creates a new cloudevent'), PickleStep(argument=None, ast_node_ids=['463', '482'], id='506', type=<Type.action: 'Action'>, text='sets cloudevent header \"ce-id\" to \"442af213-c860-4535-b639-355f13b2d883\"'), PickleStep(argument=None, ast_node_ids=['464', '482'], id='507', type=<Type.action: 'Action'>, text='sets cloudevent header \"traceparent\" to \"00-7df92f3577b34da6a3ce930d0e0e4734-00f064aa0ba902b8-00\"'), PickleStep(argument=None, ast_node_ids=['465', '482'], id='508', type=<Type.action: 'Action'>, text='sets cloudevent header \"ce-subject\" to \"id\"'), PickleStep(argument=None, ast_node_ids=['466', '482'], id='509', type=<Type.action: 'Action'>, text='sets cloudevent header \"ce-source\" to \"org.mindwm.kitty.tablet.L3RtcC90bXV4LTEwMDAvZGVmYXVsdA==.09fb195c-c419-6d62-15e0-51b6ee990922.23.36.iodocument\"'), PickleStep(argument=None, ast_node_ids=['467', '482'], id='510', type=<Type.action: 'Action'>, text='sets cloudevent header \"ce-type\" to \"org.mindwm.v1.iodocument\"'), PickleStep(argument=PickleStepArgument(doc_string=PickleDocString(media_type=None, content='{\\t\\n  \"input\": \"id\",\\n  \"output\": \"uid=1000(pion) gid=1000(pion) groups=1000(pion),4(adm),100(users),112(tmux),988(docker)\",\\n  \"ps1\": \"pion@mindwm-stg1:~/work/dev/mindwm-manager$\",\\n  \"type\": \"org.mindwm.v1.iodocument\"\\n}'), data_table=None), ast_node_ids=['468', '482'], id='511', type=<Type.action: 'Action'>, text='sends cloudevent to \"broker-ingress.knative-eventing/context-red/context-broker\"'), PickleStep(argument=None, ast_node_ids=['469', '482'], id='512', type=<Type.outcome: 'Outcome'>, text='the response http code should be \"202\"'), PickleStep(argument=PickleStepArgument(doc_string=None, data_table=PickleTable(rows=[PickleTableRow(cells=[PickleTableCell(value='Deployment name')]), PickleTableRow(cells=[PickleTableCell(value='iocontext-00001-deployment')])])), ast_node_ids=['472', '482'], id='513', type=<Type.outcome: 'Outcome'>, text='the following deployments are in a ready state in the \"context-red\" namespace'), PickleStep(argument=None, ast_node_ids=['473', '482'], id='514', type=<Type.outcome: 'Outcome'>, text='the trace with \"00-7df92f3577b34da6a3ce930d0e0e4734-00f064aa0ba902b8-00\" should appear in TraceQL'), PickleStep(argument=PickleStepArgument(doc_string=None, data_table=PickleTable(rows=[PickleTableRow(cells=[PickleTableCell(value='service name')]), PickleTableRow(cells=[PickleTableCell(value='broker-ingress.knative-eventing')]), PickleTableRow(cells=[PickleTableCell(value='unknown_service')])])), ast_node_ids=['477', '482'], id='515', type=<Type.outcome: 'Outcome'>, text='the trace should contains'), PickleStep(argument=None, ast_node_ids=['478', '482'], id='516', type=<Type.outcome: 'Outcome'>, text='graph have node \"User\" with property \"username\" = \"kitty\" in context \"red\"'), PickleStep(argument=None, ast_node_ids=['479', '482'], id='517', type=<Type.outcome: 'Outcome'>, text='graph have node \"Host\" with property \"hostname\" = \"tablet\" in context \"red\"'), PickleStep(argument=None, ast_node_ids=['480', '482'], id='518', type=<Type.outcome: 'Outcome'>, text='graph have node \"IoDocument\" with property \"input\" = \"id\" in context \"red\"')], tags=[PickleTag(name='@mindwm_io_context', ast_node_id='493'), PickleTag(name='@mindwm_test', ast_node_id='494')], ast_node_ids=['484', '482']), Pickle(id='526', uri='file:features/4_mindwm_io_context.feature', name='Cleanup kitty@tablet in red', language='en', steps=[PickleStep(argument=None, ast_node_ids=['449'], id='520', type=<Type.context: 'Context'>, text='A MindWM environment'), PickleStep(argument=None, ast_node_ids=['450'], id='521', type=<Type.outcome: 'Outcome'>, text='all nodes in Kubernetes are ready'), PickleStep(argument=None, ast_node_ids=['485', '490'], id='522', type=<Type.action: 'Action'>, text='God deletes the MindWM host resource \"tablet\"'), PickleStep(argument=None, ast_node_ids=['486', '490'], id='523', type=<Type.outcome: 'Outcome'>, text='the host \"tablet\" should be deleted'), PickleStep(argument=None, ast_node_ids=['487', '490'], id='524', type=<Type.action: 'Action'>, text='God deletes the MindWM user resource \"kitty\"'), PickleStep(argument=None, ast_node_ids=['488', '490'], id='525', type=<Type.action: 'Action'>, text='God deletes the MindWM context resource \"red\"')], tags=[PickleTag(name='@mindwm_io_context', ast_node_id='493'), PickleTag(name='@mindwm_test', ast_node_id='494')], ast_node_ids=['492', '490'])])"},{"name":"feature_source","value":"Source(uri='file:features/4_mindwm_io_context.feature', data='@mindwm_io_context\\n@mindwm_test\\nFeature: MindWM io context function test\\n  Background:\\n    Given A MindWM environment\\n    Then all nodes in Kubernetes are ready\\n\\n  Scenario: io context <context>\\n\\n    When God creates a MindWM context with the name \"<context>\"\\n    Then the context should be ready and operable\\n    Then the following knative services are in a ready state in the \"context-<context>\" namespace\\n      | Knative service name |\\n      | iocontext            |\\n    And statefulset \"<context>-neo4j\" in namespace \"context-<context>\" is in ready state\\n\\n    When God creates a MindWM user resource with the name \"<username>\" and connects it to the context \"<context>\"\\n    Then the user resource should be ready and operable\\n\\n    When God creates a MindWM host resource with the name \"<host>\" and connects it to the user \"<username>\"\\n    Then the host resource should be ready and operable\\n    # When God makes graph query in context \"<context>\"\\n    #   \"\"\"\\n    #   MATCH (N) DETACH DELETE N;\\n    #   \"\"\"\\n\\n    When God creates a new cloudevent \\n      And sets cloudevent header \"ce-id\" to \"<cloudevent_id>\"\\n      And sets cloudevent header \"traceparent\" to \"<traceparent>\"\\n      And sets cloudevent header \"ce-subject\" to \"id\"\\n      And sets cloudevent header \"ce-source\" to \"org.mindwm.<username>.<host>.L3RtcC90bXV4LTEwMDAvZGVmYXVsdA==.09fb195c-c419-6d62-15e0-51b6ee990922.23.36.iodocument\"\\n      And sets cloudevent header \"ce-type\" to \"org.mindwm.v1.iodocument\"\\n      And sends cloudevent to \"broker-ingress.knative-eventing/context-<context>/context-broker\"\\n        \"\"\"\\n        {\\t\\n          \"input\": \"id\",\\n          \"output\": \"uid=1000(pion) gid=1000(pion) groups=1000(pion),4(adm),100(users),112(tmux),988(docker)\",\\n          \"ps1\": \"pion@mindwm-stg1:~/work/dev/mindwm-manager$\",\\n          \"type\": \"org.mindwm.v1.iodocument\"\\n        }\\n        \"\"\"\\n    Then the response http code should be \"202\"\\n    Then the following deployments are in a ready state in the \"context-<context>\" namespace\\n      | Deployment name            |\\n      | iocontext-00001-deployment |\\n    Then the trace with \"<traceparent>\" should appear in TraceQL\\n    And the trace should contains\\n      | service name                    |\\n      | broker-ingress.knative-eventing |\\n      | unknown_service                 |\\n    Then graph have node \"User\" with property \"username\" = \"<username>\" in context \"<context>\"\\n    And graph have node \"Host\" with property \"hostname\" = \"<host>\" in context \"<context>\"\\n    And graph have node \"IoDocument\" with property \"input\" = \"id\" in context \"<context>\"\\n\\n    Examples:\\n     | context | username   | host      | cloudevent_id                        | traceparent \\t\\t\\t\\t\\t         |\\n     | red     | kitty      | tablet    | 442af213-c860-4535-b639-355f13b2d883 | 00-7df92f3577b34da6a3ce930d0e0e4734-00f064aa0ba902b8-00 |\\n\\n\\n  Scenario: Cleanup <username>@<host> in <context>\\n    When God deletes the MindWM host resource \"<host>\"\\n    Then the host \"<host>\" should be deleted\\n\\n    When God deletes the MindWM user resource \"<username>\"\\n\\n    When God deletes the MindWM context resource \"<context>\"\\n\\n    Examples:\\n    | context | username | host        | \\n    | red     | kitty    | tablet      |\\n\\n', media_type='text/x.cucumber.gherkin+plain')"},{"name":"scenario","value":"Pickle(id='519', uri='file:features/4_mindwm_io_context.feature', name='io context red', language='en', steps=[PickleStep(argument=None, ast_node_ids=['449'], id='495', type=<Type.context: 'Context'>, text='A MindWM environment'), PickleStep(argument=None, ast_node_ids=['450'], id='496', type=<Type.outcome: 'Outcome'>, text='all nodes in Kubernetes are ready'), PickleStep(argument=None, ast_node_ids=['452', '482'], id='497', type=<Type.action: 'Action'>, text='God creates a MindWM context with the name \"red\"'), PickleStep(argument=None, ast_node_ids=['453', '482'], id='498', type=<Type.outcome: 'Outcome'>, text='the context should be ready and operable'), PickleStep(argument=PickleStepArgument(doc_string=None, data_table=PickleTable(rows=[PickleTableRow(cells=[PickleTableCell(value='Knative service name')]), PickleTableRow(cells=[PickleTableCell(value='iocontext')])])), ast_node_ids=['456', '482'], id='499', type=<Type.outcome: 'Outcome'>, text='the following knative services are in a ready state in the \"context-red\" namespace'), PickleStep(argument=None, ast_node_ids=['457', '482'], id='500', type=<Type.outcome: 'Outcome'>, text='statefulset \"red-neo4j\" in namespace \"context-red\" is in ready state'), PickleStep(argument=None, ast_node_ids=['458', '482'], id='501', type=<Type.action: 'Action'>, text='God creates a MindWM user resource with the name \"kitty\" and connects it to the context \"red\"'), PickleStep(argument=None, ast_node_ids=['459', '482'], id='502', type=<Type.outcome: 'Outcome'>, text='the user resource should be ready and operable'), PickleStep(argument=None, ast_node_ids=['460', '482'], id='503', type=<Type.action: 'Action'>, text='God creates a MindWM host resource with the name \"tablet\" and connects it to the user \"kitty\"'), PickleStep(argument=None, ast_node_ids=['461', '482'], id='504', type=<Type.outcome: 'Outcome'>, text='the host resource should be ready and operable'), PickleStep(argument=None, ast_node_ids=['462', '482'], id='505', type=<Type.action: 'Action'>, text='God creates a new cloudevent'), PickleStep(argument=None, ast_node_ids=['463', '482'], id='506', type=<Type.action: 'Action'>, text='sets cloudevent header \"ce-id\" to \"442af213-c860-4535-b639-355f13b2d883\"'), PickleStep(argument=None, ast_node_ids=['464', '482'], id='507', type=<Type.action: 'Action'>, text='sets cloudevent header \"traceparent\" to \"00-7df92f3577b34da6a3ce930d0e0e4734-00f064aa0ba902b8-00\"'), PickleStep(argument=None, ast_node_ids=['465', '482'], id='508', type=<Type.action: 'Action'>, text='sets cloudevent header \"ce-subject\" to \"id\"'), PickleStep(argument=None, ast_node_ids=['466', '482'], id='509', type=<Type.action: 'Action'>, text='sets cloudevent header \"ce-source\" to \"org.mindwm.kitty.tablet.L3RtcC90bXV4LTEwMDAvZGVmYXVsdA==.09fb195c-c419-6d62-15e0-51b6ee990922.23.36.iodocument\"'), PickleStep(argument=None, ast_node_ids=['467', '482'], id='510', type=<Type.action: 'Action'>, text='sets cloudevent header \"ce-type\" to \"org.mindwm.v1.iodocument\"'), PickleStep(argument=PickleStepArgument(doc_string=PickleDocString(media_type=None, content='{\\t\\n  \"input\": \"id\",\\n  \"output\": \"uid=1000(pion) gid=1000(pion) groups=1000(pion),4(adm),100(users),112(tmux),988(docker)\",\\n  \"ps1\": \"pion@mindwm-stg1:~/work/dev/mindwm-manager$\",\\n  \"type\": \"org.mindwm.v1.iodocument\"\\n}'), data_table=None), ast_node_ids=['468', '482'], id='511', type=<Type.action: 'Action'>, text='sends cloudevent to \"broker-ingress.knative-eventing/context-red/context-broker\"'), PickleStep(argument=None, ast_node_ids=['469', '482'], id='512', type=<Type.outcome: 'Outcome'>, text='the response http code should be \"202\"'), PickleStep(argument=PickleStepArgument(doc_string=None, data_table=PickleTable(rows=[PickleTableRow(cells=[PickleTableCell(value='Deployment name')]), PickleTableRow(cells=[PickleTableCell(value='iocontext-00001-deployment')])])), ast_node_ids=['472', '482'], id='513', type=<Type.outcome: 'Outcome'>, text='the following deployments are in a ready state in the \"context-red\" namespace'), PickleStep(argument=None, ast_node_ids=['473', '482'], id='514', type=<Type.outcome: 'Outcome'>, text='the trace with \"00-7df92f3577b34da6a3ce930d0e0e4734-00f064aa0ba902b8-00\" should appear in TraceQL'), PickleStep(argument=PickleStepArgument(doc_string=None, data_table=PickleTable(rows=[PickleTableRow(cells=[PickleTableCell(value='service name')]), PickleTableRow(cells=[PickleTableCell(value='broker-ingress.knative-eventing')]), PickleTableRow(cells=[PickleTableCell(value='unknown_service')])])), ast_node_ids=['477', '482'], id='515', type=<Type.outcome: 'Outcome'>, text='the trace should contains'), PickleStep(argument=None, ast_node_ids=['478', '482'], id='516', type=<Type.outcome: 'Outcome'>, text='graph have node \"User\" with property \"username\" = \"kitty\" in context \"red\"'), PickleStep(argument=None, ast_node_ids=['479', '482'], id='517', type=<Type.outcome: 'Outcome'>, text='graph have node \"Host\" with property \"hostname\" = \"tablet\" in context \"red\"'), PickleStep(argument=None, ast_node_ids=['480', '482'], id='518', type=<Type.outcome: 'Outcome'>, text='graph have node \"IoDocument\" with property \"input\" = \"id\" in context \"red\"')], tags=[PickleTag(name='@mindwm_io_context', ast_node_id='493'), PickleTag(name='@mindwm_test', ast_node_id='494')], ast_node_ids=['484', '482'])"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"history":{"statistic":{"failed":0,"broken":0,"skipped":0,"passed":2,"unknown":0,"total":2},"items":[{"uid":"fc809b3d6610e3e3","reportUrl":"https://mindwm.github.io/mindwm-gitops/176//#testresult/fc809b3d6610e3e3","status":"passed","time":{"start":1728050205876,"stop":1728050354279,"duration":148403}}]},"tags":["mindwm_io_context","pytest_bdd_scenario","@pytest.mark.usefixtures('feature', 'scenario', 'feature_source')","mindwm_test","scenarios(PosixPath('/home/ci/mindwm-gitops/tests/mindwm_bdd/features/4_mindwm_io_context.feature'), filter_=None, encoding='utf-8', features_base_dir=None, features_base_url=None, features_path_type=<FeaturePathType.PATH: 'path'>, features_mimetype=None, parser_type=None, parse_args=Args(args=(), kwargs={}), locators=())","namespace(create=False, name='default')"]},"source":"2d9bf1bd05037103.json","parameterValues":["Feature(gherkin_document=GherkinDocument(uri='file:features/4_mindwm_io_context.feature', feature=Feature(location=Location(line=3, column=1), tags=[Tag(location=Location(line=1, column=1), name='@mindwm_io_context', id='493'), Tag(location=Location(line=2, column=1), name='@mindwm_test', id='494')], language='en', keyword='Feature', name='MindWM io context function test', description='', children=[FeatureChild(rule=None, background=Background(location=Location(line=4, column=3), keyword='Background', name='', description='', steps=[Step(location=Location(line=5, column=5), keyword='Given ', keyword_type=<KeywordType.context: 'Context'>, text='A MindWM environment', doc_string=None, data_table=None, id='449'), Step(location=Location(line=6, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='all nodes in Kubernetes are ready', doc_string=None, data_table=None, id='450')], id='451'), scenario=None), FeatureChild(rule=None, background=None, scenario=Scenario(location=Location(line=8, column=3), tags=[], keyword='Scenario', name='io context <context>', description='', steps=[Step(location=Location(line=10, column=5), keyword='When ', keyword_type=<KeywordType.action: 'Action'>, text='God creates a MindWM context with the name \"<context>\"', doc_string=None, data_table=None, id='452'), Step(location=Location(line=11, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the context should be ready and operable', doc_string=None, data_table=None, id='453'), Step(location=Location(line=12, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the following knative services are in a ready state in the \"context-<context>\" namespace', doc_string=None, data_table=DataTable(location=Location(line=13, column=7), rows=[TableRow(location=Location(line=13, column=7), cells=[TableCell(location=Location(line=13, column=9), value='Knative service name')], id='454'), TableRow(location=Location(line=14, column=7), cells=[TableCell(location=Location(line=14, column=9), value='iocontext')], id='455')]), id='456'), Step(location=Location(line=15, column=5), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='statefulset \"<context>-neo4j\" in namespace \"context-<context>\" is in ready state', doc_string=None, data_table=None, id='457'), Step(location=Location(line=17, column=5), keyword='When ', keyword_type=<KeywordType.action: 'Action'>, text='God creates a MindWM user resource with the name \"<username>\" and connects it to the context \"<context>\"', doc_string=None, data_table=None, id='458'), Step(location=Location(line=18, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the user resource should be ready and operable', doc_string=None, data_table=None, id='459'), Step(location=Location(line=20, column=5), keyword='When ', keyword_type=<KeywordType.action: 'Action'>, text='God creates a MindWM host resource with the name \"<host>\" and connects it to the user \"<username>\"', doc_string=None, data_table=None, id='460'), Step(location=Location(line=21, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the host resource should be ready and operable', doc_string=None, data_table=None, id='461'), Step(location=Location(line=27, column=5), keyword='When ', keyword_type=<KeywordType.action: 'Action'>, text='God creates a new cloudevent', doc_string=None, data_table=None, id='462'), Step(location=Location(line=28, column=7), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='sets cloudevent header \"ce-id\" to \"<cloudevent_id>\"', doc_string=None, data_table=None, id='463'), Step(location=Location(line=29, column=7), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='sets cloudevent header \"traceparent\" to \"<traceparent>\"', doc_string=None, data_table=None, id='464'), Step(location=Location(line=30, column=7), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='sets cloudevent header \"ce-subject\" to \"id\"', doc_string=None, data_table=None, id='465'), Step(location=Location(line=31, column=7), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='sets cloudevent header \"ce-source\" to \"org.mindwm.<username>.<host>.L3RtcC90bXV4LTEwMDAvZGVmYXVsdA==.09fb195c-c419-6d62-15e0-51b6ee990922.23.36.iodocument\"', doc_string=None, data_table=None, id='466'), Step(location=Location(line=32, column=7), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='sets cloudevent header \"ce-type\" to \"org.mindwm.v1.iodocument\"', doc_string=None, data_table=None, id='467'), Step(location=Location(line=33, column=7), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='sends cloudevent to \"broker-ingress.knative-eventing/context-<context>/context-broker\"', doc_string=DocString(location=Location(line=34, column=9), media_type=None, content='{\\t\\n  \"input\": \"id\",\\n  \"output\": \"uid=1000(pion) gid=1000(pion) groups=1000(pion),4(adm),100(users),112(tmux),988(docker)\",\\n  \"ps1\": \"pion@mindwm-stg1:~/work/dev/mindwm-manager$\",\\n  \"type\": \"org.mindwm.v1.iodocument\"\\n}', delimiter='\"\"\"'), data_table=None, id='468'), Step(location=Location(line=42, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the response http code should be \"202\"', doc_string=None, data_table=None, id='469'), Step(location=Location(line=43, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the following deployments are in a ready state in the \"context-<context>\" namespace', doc_string=None, data_table=DataTable(location=Location(line=44, column=7), rows=[TableRow(location=Location(line=44, column=7), cells=[TableCell(location=Location(line=44, column=9), value='Deployment name')], id='470'), TableRow(location=Location(line=45, column=7), cells=[TableCell(location=Location(line=45, column=9), value='iocontext-00001-deployment')], id='471')]), id='472'), Step(location=Location(line=46, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the trace with \"<traceparent>\" should appear in TraceQL', doc_string=None, data_table=None, id='473'), Step(location=Location(line=47, column=5), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='the trace should contains', doc_string=None, data_table=DataTable(location=Location(line=48, column=7), rows=[TableRow(location=Location(line=48, column=7), cells=[TableCell(location=Location(line=48, column=9), value='service name')], id='474'), TableRow(location=Location(line=49, column=7), cells=[TableCell(location=Location(line=49, column=9), value='broker-ingress.knative-eventing')], id='475'), TableRow(location=Location(line=50, column=7), cells=[TableCell(location=Location(line=50, column=9), value='unknown_service')], id='476')]), id='477'), Step(location=Location(line=51, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='graph have node \"User\" with property \"username\" = \"<username>\" in context \"<context>\"', doc_string=None, data_table=None, id='478'), Step(location=Location(line=52, column=5), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='graph have node \"Host\" with property \"hostname\" = \"<host>\" in context \"<context>\"', doc_string=None, data_table=None, id='479'), Step(location=Location(line=53, column=5), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='graph have node \"IoDocument\" with property \"input\" = \"id\" in context \"<context>\"', doc_string=None, data_table=None, id='480')], examples=[Examples(location=Location(line=55, column=5), tags=[], keyword='Examples', name='', description='', table_header=TableRow(location=Location(line=56, column=6), cells=[TableCell(location=Location(line=56, column=8), value='context'), TableCell(location=Location(line=56, column=18), value='username'), TableCell(location=Location(line=56, column=31), value='host'), TableCell(location=Location(line=56, column=43), value='cloudevent_id'), TableCell(location=Location(line=56, column=82), value='traceparent')], id='481'), table_body=[TableRow(location=Location(line=57, column=6), cells=[TableCell(location=Location(line=57, column=8), value='red'), TableCell(location=Location(line=57, column=18), value='kitty'), TableCell(location=Location(line=57, column=31), value='tablet'), TableCell(location=Location(line=57, column=43), value='442af213-c860-4535-b639-355f13b2d883'), TableCell(location=Location(line=57, column=82), value='00-7df92f3577b34da6a3ce930d0e0e4734-00f064aa0ba902b8-00')], id='482')], id='483')], id='484')), FeatureChild(rule=None, background=None, scenario=Scenario(location=Location(line=60, column=3), tags=[], keyword='Scenario', name='Cleanup <username>@<host> in <context>', description='', steps=[Step(location=Location(line=61, column=5), keyword='When ', keyword_type=<KeywordType.action: 'Action'>, text='God deletes the MindWM host resource \"<host>\"', doc_string=None, data_table=None, id='485'), Step(location=Location(line=62, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the host \"<host>\" should be deleted', doc_string=None, data_table=None, id='486'), Step(location=Location(line=64, column=5), keyword='When ', keyword_type=<KeywordType.action: 'Action'>, text='God deletes the MindWM user resource \"<username>\"', doc_string=None, data_table=None, id='487'), Step(location=Location(line=66, column=5), keyword='When ', keyword_type=<KeywordType.action: 'Action'>, text='God deletes the MindWM context resource \"<context>\"', doc_string=None, data_table=None, id='488')], examples=[Examples(location=Location(line=68, column=5), tags=[], keyword='Examples', name='', description='', table_header=TableRow(location=Location(line=69, column=5), cells=[TableCell(location=Location(line=69, column=7), value='context'), TableCell(location=Location(line=69, column=17), value='username'), TableCell(location=Location(line=69, column=28), value='host')], id='489'), table_body=[TableRow(location=Location(line=70, column=5), cells=[TableCell(location=Location(line=70, column=7), value='red'), TableCell(location=Location(line=70, column=17), value='kitty'), TableCell(location=Location(line=70, column=28), value='tablet')], id='490')], id='491')], id='492'))]), comments=[Comment(location=Location(line=22, column=1), text='    # When God makes graph query in context \"<context>\"'), Comment(location=Location(line=23, column=1), text='    #   \"\"\"'), Comment(location=Location(line=24, column=1), text='    #   MATCH (N) DETACH DELETE N;'), Comment(location=Location(line=25, column=1), text='    #   \"\"\"')]), uri='file:features/4_mindwm_io_context.feature', filename='/home/ci/mindwm-gitops/tests/mindwm_bdd/features/4_mindwm_io_context.feature', registry={'493': Tag(location=Location(line=1, column=1), name='@mindwm_io_context', id='493'), '494': Tag(location=Location(line=2, column=1), name='@mindwm_test', id='494'), '451': Background(location=Location(line=4, column=3), keyword='Background', name='', description='', steps=[Step(location=Location(line=5, column=5), keyword='Given ', keyword_type=<KeywordType.context: 'Context'>, text='A MindWM environment', doc_string=None, data_table=None, id='449'), Step(location=Location(line=6, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='all nodes in Kubernetes are ready', doc_string=None, data_table=None, id='450')], id='451'), '449': Step(location=Location(line=5, column=5), keyword='Given ', keyword_type=<KeywordType.context: 'Context'>, text='A MindWM environment', doc_string=None, data_table=None, id='449'), '450': Step(location=Location(line=6, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='all nodes in Kubernetes are ready', doc_string=None, data_table=None, id='450'), '484': Scenario(location=Location(line=8, column=3), tags=[], keyword='Scenario', name='io context <context>', description='', steps=[Step(location=Location(line=10, column=5), keyword='When ', keyword_type=<KeywordType.action: 'Action'>, text='God creates a MindWM context with the name \"<context>\"', doc_string=None, data_table=None, id='452'), Step(location=Location(line=11, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the context should be ready and operable', doc_string=None, data_table=None, id='453'), Step(location=Location(line=12, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the following knative services are in a ready state in the \"context-<context>\" namespace', doc_string=None, data_table=DataTable(location=Location(line=13, column=7), rows=[TableRow(location=Location(line=13, column=7), cells=[TableCell(location=Location(line=13, column=9), value='Knative service name')], id='454'), TableRow(location=Location(line=14, column=7), cells=[TableCell(location=Location(line=14, column=9), value='iocontext')], id='455')]), id='456'), Step(location=Location(line=15, column=5), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='statefulset \"<context>-neo4j\" in namespace \"context-<context>\" is in ready state', doc_string=None, data_table=None, id='457'), Step(location=Location(line=17, column=5), keyword='When ', keyword_type=<KeywordType.action: 'Action'>, text='God creates a MindWM user resource with the name \"<username>\" and connects it to the context \"<context>\"', doc_string=None, data_table=None, id='458'), Step(location=Location(line=18, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the user resource should be ready and operable', doc_string=None, data_table=None, id='459'), Step(location=Location(line=20, column=5), keyword='When ', keyword_type=<KeywordType.action: 'Action'>, text='God creates a MindWM host resource with the name \"<host>\" and connects it to the user \"<username>\"', doc_string=None, data_table=None, id='460'), Step(location=Location(line=21, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the host resource should be ready and operable', doc_string=None, data_table=None, id='461'), Step(location=Location(line=27, column=5), keyword='When ', keyword_type=<KeywordType.action: 'Action'>, text='God creates a new cloudevent', doc_string=None, data_table=None, id='462'), Step(location=Location(line=28, column=7), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='sets cloudevent header \"ce-id\" to \"<cloudevent_id>\"', doc_string=None, data_table=None, id='463'), Step(location=Location(line=29, column=7), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='sets cloudevent header \"traceparent\" to \"<traceparent>\"', doc_string=None, data_table=None, id='464'), Step(location=Location(line=30, column=7), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='sets cloudevent header \"ce-subject\" to \"id\"', doc_string=None, data_table=None, id='465'), Step(location=Location(line=31, column=7), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='sets cloudevent header \"ce-source\" to \"org.mindwm.<username>.<host>.L3RtcC90bXV4LTEwMDAvZGVmYXVsdA==.09fb195c-c419-6d62-15e0-51b6ee990922.23.36.iodocument\"', doc_string=None, data_table=None, id='466'), Step(location=Location(line=32, column=7), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='sets cloudevent header \"ce-type\" to \"org.mindwm.v1.iodocument\"', doc_string=None, data_table=None, id='467'), Step(location=Location(line=33, column=7), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='sends cloudevent to \"broker-ingress.knative-eventing/context-<context>/context-broker\"', doc_string=DocString(location=Location(line=34, column=9), media_type=None, content='{\\t\\n  \"input\": \"id\",\\n  \"output\": \"uid=1000(pion) gid=1000(pion) groups=1000(pion),4(adm),100(users),112(tmux),988(docker)\",\\n  \"ps1\": \"pion@mindwm-stg1:~/work/dev/mindwm-manager$\",\\n  \"type\": \"org.mindwm.v1.iodocument\"\\n}', delimiter='\"\"\"'), data_table=None, id='468'), Step(location=Location(line=42, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the response http code should be \"202\"', doc_string=None, data_table=None, id='469'), Step(location=Location(line=43, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the following deployments are in a ready state in the \"context-<context>\" namespace', doc_string=None, data_table=DataTable(location=Location(line=44, column=7), rows=[TableRow(location=Location(line=44, column=7), cells=[TableCell(location=Location(line=44, column=9), value='Deployment name')], id='470'), TableRow(location=Location(line=45, column=7), cells=[TableCell(location=Location(line=45, column=9), value='iocontext-00001-deployment')], id='471')]), id='472'), Step(location=Location(line=46, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the trace with \"<traceparent>\" should appear in TraceQL', doc_string=None, data_table=None, id='473'), Step(location=Location(line=47, column=5), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='the trace should contains', doc_string=None, data_table=DataTable(location=Location(line=48, column=7), rows=[TableRow(location=Location(line=48, column=7), cells=[TableCell(location=Location(line=48, column=9), value='service name')], id='474'), TableRow(location=Location(line=49, column=7), cells=[TableCell(location=Location(line=49, column=9), value='broker-ingress.knative-eventing')], id='475'), TableRow(location=Location(line=50, column=7), cells=[TableCell(location=Location(line=50, column=9), value='unknown_service')], id='476')]), id='477'), Step(location=Location(line=51, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='graph have node \"User\" with property \"username\" = \"<username>\" in context \"<context>\"', doc_string=None, data_table=None, id='478'), Step(location=Location(line=52, column=5), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='graph have node \"Host\" with property \"hostname\" = \"<host>\" in context \"<context>\"', doc_string=None, data_table=None, id='479'), Step(location=Location(line=53, column=5), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='graph have node \"IoDocument\" with property \"input\" = \"id\" in context \"<context>\"', doc_string=None, data_table=None, id='480')], examples=[Examples(location=Location(line=55, column=5), tags=[], keyword='Examples', name='', description='', table_header=TableRow(location=Location(line=56, column=6), cells=[TableCell(location=Location(line=56, column=8), value='context'), TableCell(location=Location(line=56, column=18), value='username'), TableCell(location=Location(line=56, column=31), value='host'), TableCell(location=Location(line=56, column=43), value='cloudevent_id'), TableCell(location=Location(line=56, column=82), value='traceparent')], id='481'), table_body=[TableRow(location=Location(line=57, column=6), cells=[TableCell(location=Location(line=57, column=8), value='red'), TableCell(location=Location(line=57, column=18), value='kitty'), TableCell(location=Location(line=57, column=31), value='tablet'), TableCell(location=Location(line=57, column=43), value='442af213-c860-4535-b639-355f13b2d883'), TableCell(location=Location(line=57, column=82), value='00-7df92f3577b34da6a3ce930d0e0e4734-00f064aa0ba902b8-00')], id='482')], id='483')], id='484'), '452': Step(location=Location(line=10, column=5), keyword='When ', keyword_type=<KeywordType.action: 'Action'>, text='God creates a MindWM context with the name \"<context>\"', doc_string=None, data_table=None, id='452'), '453': Step(location=Location(line=11, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the context should be ready and operable', doc_string=None, data_table=None, id='453'), '456': Step(location=Location(line=12, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the following knative services are in a ready state in the \"context-<context>\" namespace', doc_string=None, data_table=DataTable(location=Location(line=13, column=7), rows=[TableRow(location=Location(line=13, column=7), cells=[TableCell(location=Location(line=13, column=9), value='Knative service name')], id='454'), TableRow(location=Location(line=14, column=7), cells=[TableCell(location=Location(line=14, column=9), value='iocontext')], id='455')]), id='456'), '457': Step(location=Location(line=15, column=5), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='statefulset \"<context>-neo4j\" in namespace \"context-<context>\" is in ready state', doc_string=None, data_table=None, id='457'), '458': Step(location=Location(line=17, column=5), keyword='When ', keyword_type=<KeywordType.action: 'Action'>, text='God creates a MindWM user resource with the name \"<username>\" and connects it to the context \"<context>\"', doc_string=None, data_table=None, id='458'), '459': Step(location=Location(line=18, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the user resource should be ready and operable', doc_string=None, data_table=None, id='459'), '460': Step(location=Location(line=20, column=5), keyword='When ', keyword_type=<KeywordType.action: 'Action'>, text='God creates a MindWM host resource with the name \"<host>\" and connects it to the user \"<username>\"', doc_string=None, data_table=None, id='460'), '461': Step(location=Location(line=21, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the host resource should be ready and operable', doc_string=None, data_table=None, id='461'), '462': Step(location=Location(line=27, column=5), keyword='When ', keyword_type=<KeywordType.action: 'Action'>, text='God creates a new cloudevent', doc_string=None, data_table=None, id='462'), '463': Step(location=Location(line=28, column=7), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='sets cloudevent header \"ce-id\" to \"<cloudevent_id>\"', doc_string=None, data_table=None, id='463'), '464': Step(location=Location(line=29, column=7), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='sets cloudevent header \"traceparent\" to \"<traceparent>\"', doc_string=None, data_table=None, id='464'), '465': Step(location=Location(line=30, column=7), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='sets cloudevent header \"ce-subject\" to \"id\"', doc_string=None, data_table=None, id='465'), '466': Step(location=Location(line=31, column=7), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='sets cloudevent header \"ce-source\" to \"org.mindwm.<username>.<host>.L3RtcC90bXV4LTEwMDAvZGVmYXVsdA==.09fb195c-c419-6d62-15e0-51b6ee990922.23.36.iodocument\"', doc_string=None, data_table=None, id='466'), '467': Step(location=Location(line=32, column=7), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='sets cloudevent header \"ce-type\" to \"org.mindwm.v1.iodocument\"', doc_string=None, data_table=None, id='467'), '468': Step(location=Location(line=33, column=7), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='sends cloudevent to \"broker-ingress.knative-eventing/context-<context>/context-broker\"', doc_string=DocString(location=Location(line=34, column=9), media_type=None, content='{\\t\\n  \"input\": \"id\",\\n  \"output\": \"uid=1000(pion) gid=1000(pion) groups=1000(pion),4(adm),100(users),112(tmux),988(docker)\",\\n  \"ps1\": \"pion@mindwm-stg1:~/work/dev/mindwm-manager$\",\\n  \"type\": \"org.mindwm.v1.iodocument\"\\n}', delimiter='\"\"\"'), data_table=None, id='468'), '469': Step(location=Location(line=42, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the response http code should be \"202\"', doc_string=None, data_table=None, id='469'), '472': Step(location=Location(line=43, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the following deployments are in a ready state in the \"context-<context>\" namespace', doc_string=None, data_table=DataTable(location=Location(line=44, column=7), rows=[TableRow(location=Location(line=44, column=7), cells=[TableCell(location=Location(line=44, column=9), value='Deployment name')], id='470'), TableRow(location=Location(line=45, column=7), cells=[TableCell(location=Location(line=45, column=9), value='iocontext-00001-deployment')], id='471')]), id='472'), '473': Step(location=Location(line=46, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the trace with \"<traceparent>\" should appear in TraceQL', doc_string=None, data_table=None, id='473'), '477': Step(location=Location(line=47, column=5), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='the trace should contains', doc_string=None, data_table=DataTable(location=Location(line=48, column=7), rows=[TableRow(location=Location(line=48, column=7), cells=[TableCell(location=Location(line=48, column=9), value='service name')], id='474'), TableRow(location=Location(line=49, column=7), cells=[TableCell(location=Location(line=49, column=9), value='broker-ingress.knative-eventing')], id='475'), TableRow(location=Location(line=50, column=7), cells=[TableCell(location=Location(line=50, column=9), value='unknown_service')], id='476')]), id='477'), '478': Step(location=Location(line=51, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='graph have node \"User\" with property \"username\" = \"<username>\" in context \"<context>\"', doc_string=None, data_table=None, id='478'), '479': Step(location=Location(line=52, column=5), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='graph have node \"Host\" with property \"hostname\" = \"<host>\" in context \"<context>\"', doc_string=None, data_table=None, id='479'), '480': Step(location=Location(line=53, column=5), keyword='And ', keyword_type=<KeywordType.conjunction: 'Conjunction'>, text='graph have node \"IoDocument\" with property \"input\" = \"id\" in context \"<context>\"', doc_string=None, data_table=None, id='480'), '483': Examples(location=Location(line=55, column=5), tags=[], keyword='Examples', name='', description='', table_header=TableRow(location=Location(line=56, column=6), cells=[TableCell(location=Location(line=56, column=8), value='context'), TableCell(location=Location(line=56, column=18), value='username'), TableCell(location=Location(line=56, column=31), value='host'), TableCell(location=Location(line=56, column=43), value='cloudevent_id'), TableCell(location=Location(line=56, column=82), value='traceparent')], id='481'), table_body=[TableRow(location=Location(line=57, column=6), cells=[TableCell(location=Location(line=57, column=8), value='red'), TableCell(location=Location(line=57, column=18), value='kitty'), TableCell(location=Location(line=57, column=31), value='tablet'), TableCell(location=Location(line=57, column=43), value='442af213-c860-4535-b639-355f13b2d883'), TableCell(location=Location(line=57, column=82), value='00-7df92f3577b34da6a3ce930d0e0e4734-00f064aa0ba902b8-00')], id='482')], id='483'), '481': TableRow(location=Location(line=56, column=6), cells=[TableCell(location=Location(line=56, column=8), value='context'), TableCell(location=Location(line=56, column=18), value='username'), TableCell(location=Location(line=56, column=31), value='host'), TableCell(location=Location(line=56, column=43), value='cloudevent_id'), TableCell(location=Location(line=56, column=82), value='traceparent')], id='481'), '482': TableRow(location=Location(line=57, column=6), cells=[TableCell(location=Location(line=57, column=8), value='red'), TableCell(location=Location(line=57, column=18), value='kitty'), TableCell(location=Location(line=57, column=31), value='tablet'), TableCell(location=Location(line=57, column=43), value='442af213-c860-4535-b639-355f13b2d883'), TableCell(location=Location(line=57, column=82), value='00-7df92f3577b34da6a3ce930d0e0e4734-00f064aa0ba902b8-00')], id='482'), '492': Scenario(location=Location(line=60, column=3), tags=[], keyword='Scenario', name='Cleanup <username>@<host> in <context>', description='', steps=[Step(location=Location(line=61, column=5), keyword='When ', keyword_type=<KeywordType.action: 'Action'>, text='God deletes the MindWM host resource \"<host>\"', doc_string=None, data_table=None, id='485'), Step(location=Location(line=62, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the host \"<host>\" should be deleted', doc_string=None, data_table=None, id='486'), Step(location=Location(line=64, column=5), keyword='When ', keyword_type=<KeywordType.action: 'Action'>, text='God deletes the MindWM user resource \"<username>\"', doc_string=None, data_table=None, id='487'), Step(location=Location(line=66, column=5), keyword='When ', keyword_type=<KeywordType.action: 'Action'>, text='God deletes the MindWM context resource \"<context>\"', doc_string=None, data_table=None, id='488')], examples=[Examples(location=Location(line=68, column=5), tags=[], keyword='Examples', name='', description='', table_header=TableRow(location=Location(line=69, column=5), cells=[TableCell(location=Location(line=69, column=7), value='context'), TableCell(location=Location(line=69, column=17), value='username'), TableCell(location=Location(line=69, column=28), value='host')], id='489'), table_body=[TableRow(location=Location(line=70, column=5), cells=[TableCell(location=Location(line=70, column=7), value='red'), TableCell(location=Location(line=70, column=17), value='kitty'), TableCell(location=Location(line=70, column=28), value='tablet')], id='490')], id='491')], id='492'), '485': Step(location=Location(line=61, column=5), keyword='When ', keyword_type=<KeywordType.action: 'Action'>, text='God deletes the MindWM host resource \"<host>\"', doc_string=None, data_table=None, id='485'), '486': Step(location=Location(line=62, column=5), keyword='Then ', keyword_type=<KeywordType.outcome: 'Outcome'>, text='the host \"<host>\" should be deleted', doc_string=None, data_table=None, id='486'), '487': Step(location=Location(line=64, column=5), keyword='When ', keyword_type=<KeywordType.action: 'Action'>, text='God deletes the MindWM user resource \"<username>\"', doc_string=None, data_table=None, id='487'), '488': Step(location=Location(line=66, column=5), keyword='When ', keyword_type=<KeywordType.action: 'Action'>, text='God deletes the MindWM context resource \"<context>\"', doc_string=None, data_table=None, id='488'), '491': Examples(location=Location(line=68, column=5), tags=[], keyword='Examples', name='', description='', table_header=TableRow(location=Location(line=69, column=5), cells=[TableCell(location=Location(line=69, column=7), value='context'), TableCell(location=Location(line=69, column=17), value='username'), TableCell(location=Location(line=69, column=28), value='host')], id='489'), table_body=[TableRow(location=Location(line=70, column=5), cells=[TableCell(location=Location(line=70, column=7), value='red'), TableCell(location=Location(line=70, column=17), value='kitty'), TableCell(location=Location(line=70, column=28), value='tablet')], id='490')], id='491'), '489': TableRow(location=Location(line=69, column=5), cells=[TableCell(location=Location(line=69, column=7), value='context'), TableCell(location=Location(line=69, column=17), value='username'), TableCell(location=Location(line=69, column=28), value='host')], id='489'), '490': TableRow(location=Location(line=70, column=5), cells=[TableCell(location=Location(line=70, column=7), value='red'), TableCell(location=Location(line=70, column=17), value='kitty'), TableCell(location=Location(line=70, column=28), value='tablet')], id='490')}, pickles=[Pickle(id='519', uri='file:features/4_mindwm_io_context.feature', name='io context red', language='en', steps=[PickleStep(argument=None, ast_node_ids=['449'], id='495', type=<Type.context: 'Context'>, text='A MindWM environment'), PickleStep(argument=None, ast_node_ids=['450'], id='496', type=<Type.outcome: 'Outcome'>, text='all nodes in Kubernetes are ready'), PickleStep(argument=None, ast_node_ids=['452', '482'], id='497', type=<Type.action: 'Action'>, text='God creates a MindWM context with the name \"red\"'), PickleStep(argument=None, ast_node_ids=['453', '482'], id='498', type=<Type.outcome: 'Outcome'>, text='the context should be ready and operable'), PickleStep(argument=PickleStepArgument(doc_string=None, data_table=PickleTable(rows=[PickleTableRow(cells=[PickleTableCell(value='Knative service name')]), PickleTableRow(cells=[PickleTableCell(value='iocontext')])])), ast_node_ids=['456', '482'], id='499', type=<Type.outcome: 'Outcome'>, text='the following knative services are in a ready state in the \"context-red\" namespace'), PickleStep(argument=None, ast_node_ids=['457', '482'], id='500', type=<Type.outcome: 'Outcome'>, text='statefulset \"red-neo4j\" in namespace \"context-red\" is in ready state'), PickleStep(argument=None, ast_node_ids=['458', '482'], id='501', type=<Type.action: 'Action'>, text='God creates a MindWM user resource with the name \"kitty\" and connects it to the context \"red\"'), PickleStep(argument=None, ast_node_ids=['459', '482'], id='502', type=<Type.outcome: 'Outcome'>, text='the user resource should be ready and operable'), PickleStep(argument=None, ast_node_ids=['460', '482'], id='503', type=<Type.action: 'Action'>, text='God creates a MindWM host resource with the name \"tablet\" and connects it to the user \"kitty\"'), PickleStep(argument=None, ast_node_ids=['461', '482'], id='504', type=<Type.outcome: 'Outcome'>, text='the host resource should be ready and operable'), PickleStep(argument=None, ast_node_ids=['462', '482'], id='505', type=<Type.action: 'Action'>, text='God creates a new cloudevent'), PickleStep(argument=None, ast_node_ids=['463', '482'], id='506', type=<Type.action: 'Action'>, text='sets cloudevent header \"ce-id\" to \"442af213-c860-4535-b639-355f13b2d883\"'), PickleStep(argument=None, ast_node_ids=['464', '482'], id='507', type=<Type.action: 'Action'>, text='sets cloudevent header \"traceparent\" to \"00-7df92f3577b34da6a3ce930d0e0e4734-00f064aa0ba902b8-00\"'), PickleStep(argument=None, ast_node_ids=['465', '482'], id='508', type=<Type.action: 'Action'>, text='sets cloudevent header \"ce-subject\" to \"id\"'), PickleStep(argument=None, ast_node_ids=['466', '482'], id='509', type=<Type.action: 'Action'>, text='sets cloudevent header \"ce-source\" to \"org.mindwm.kitty.tablet.L3RtcC90bXV4LTEwMDAvZGVmYXVsdA==.09fb195c-c419-6d62-15e0-51b6ee990922.23.36.iodocument\"'), PickleStep(argument=None, ast_node_ids=['467', '482'], id='510', type=<Type.action: 'Action'>, text='sets cloudevent header \"ce-type\" to \"org.mindwm.v1.iodocument\"'), PickleStep(argument=PickleStepArgument(doc_string=PickleDocString(media_type=None, content='{\\t\\n  \"input\": \"id\",\\n  \"output\": \"uid=1000(pion) gid=1000(pion) groups=1000(pion),4(adm),100(users),112(tmux),988(docker)\",\\n  \"ps1\": \"pion@mindwm-stg1:~/work/dev/mindwm-manager$\",\\n  \"type\": \"org.mindwm.v1.iodocument\"\\n}'), data_table=None), ast_node_ids=['468', '482'], id='511', type=<Type.action: 'Action'>, text='sends cloudevent to \"broker-ingress.knative-eventing/context-red/context-broker\"'), PickleStep(argument=None, ast_node_ids=['469', '482'], id='512', type=<Type.outcome: 'Outcome'>, text='the response http code should be \"202\"'), PickleStep(argument=PickleStepArgument(doc_string=None, data_table=PickleTable(rows=[PickleTableRow(cells=[PickleTableCell(value='Deployment name')]), PickleTableRow(cells=[PickleTableCell(value='iocontext-00001-deployment')])])), ast_node_ids=['472', '482'], id='513', type=<Type.outcome: 'Outcome'>, text='the following deployments are in a ready state in the \"context-red\" namespace'), PickleStep(argument=None, ast_node_ids=['473', '482'], id='514', type=<Type.outcome: 'Outcome'>, text='the trace with \"00-7df92f3577b34da6a3ce930d0e0e4734-00f064aa0ba902b8-00\" should appear in TraceQL'), PickleStep(argument=PickleStepArgument(doc_string=None, data_table=PickleTable(rows=[PickleTableRow(cells=[PickleTableCell(value='service name')]), PickleTableRow(cells=[PickleTableCell(value='broker-ingress.knative-eventing')]), PickleTableRow(cells=[PickleTableCell(value='unknown_service')])])), ast_node_ids=['477', '482'], id='515', type=<Type.outcome: 'Outcome'>, text='the trace should contains'), PickleStep(argument=None, ast_node_ids=['478', '482'], id='516', type=<Type.outcome: 'Outcome'>, text='graph have node \"User\" with property \"username\" = \"kitty\" in context \"red\"'), PickleStep(argument=None, ast_node_ids=['479', '482'], id='517', type=<Type.outcome: 'Outcome'>, text='graph have node \"Host\" with property \"hostname\" = \"tablet\" in context \"red\"'), PickleStep(argument=None, ast_node_ids=['480', '482'], id='518', type=<Type.outcome: 'Outcome'>, text='graph have node \"IoDocument\" with property \"input\" = \"id\" in context \"red\"')], tags=[PickleTag(name='@mindwm_io_context', ast_node_id='493'), PickleTag(name='@mindwm_test', ast_node_id='494')], ast_node_ids=['484', '482']), Pickle(id='526', uri='file:features/4_mindwm_io_context.feature', name='Cleanup kitty@tablet in red', language='en', steps=[PickleStep(argument=None, ast_node_ids=['449'], id='520', type=<Type.context: 'Context'>, text='A MindWM environment'), PickleStep(argument=None, ast_node_ids=['450'], id='521', type=<Type.outcome: 'Outcome'>, text='all nodes in Kubernetes are ready'), PickleStep(argument=None, ast_node_ids=['485', '490'], id='522', type=<Type.action: 'Action'>, text='God deletes the MindWM host resource \"tablet\"'), PickleStep(argument=None, ast_node_ids=['486', '490'], id='523', type=<Type.outcome: 'Outcome'>, text='the host \"tablet\" should be deleted'), PickleStep(argument=None, ast_node_ids=['487', '490'], id='524', type=<Type.action: 'Action'>, text='God deletes the MindWM user resource \"kitty\"'), PickleStep(argument=None, ast_node_ids=['488', '490'], id='525', type=<Type.action: 'Action'>, text='God deletes the MindWM context resource \"red\"')], tags=[PickleTag(name='@mindwm_io_context', ast_node_id='493'), PickleTag(name='@mindwm_test', ast_node_id='494')], ast_node_ids=['492', '490'])])","Source(uri='file:features/4_mindwm_io_context.feature', data='@mindwm_io_context\\n@mindwm_test\\nFeature: MindWM io context function test\\n  Background:\\n    Given A MindWM environment\\n    Then all nodes in Kubernetes are ready\\n\\n  Scenario: io context <context>\\n\\n    When God creates a MindWM context with the name \"<context>\"\\n    Then the context should be ready and operable\\n    Then the following knative services are in a ready state in the \"context-<context>\" namespace\\n      | Knative service name |\\n      | iocontext            |\\n    And statefulset \"<context>-neo4j\" in namespace \"context-<context>\" is in ready state\\n\\n    When God creates a MindWM user resource with the name \"<username>\" and connects it to the context \"<context>\"\\n    Then the user resource should be ready and operable\\n\\n    When God creates a MindWM host resource with the name \"<host>\" and connects it to the user \"<username>\"\\n    Then the host resource should be ready and operable\\n    # When God makes graph query in context \"<context>\"\\n    #   \"\"\"\\n    #   MATCH (N) DETACH DELETE N;\\n    #   \"\"\"\\n\\n    When God creates a new cloudevent \\n      And sets cloudevent header \"ce-id\" to \"<cloudevent_id>\"\\n      And sets cloudevent header \"traceparent\" to \"<traceparent>\"\\n      And sets cloudevent header \"ce-subject\" to \"id\"\\n      And sets cloudevent header \"ce-source\" to \"org.mindwm.<username>.<host>.L3RtcC90bXV4LTEwMDAvZGVmYXVsdA==.09fb195c-c419-6d62-15e0-51b6ee990922.23.36.iodocument\"\\n      And sets cloudevent header \"ce-type\" to \"org.mindwm.v1.iodocument\"\\n      And sends cloudevent to \"broker-ingress.knative-eventing/context-<context>/context-broker\"\\n        \"\"\"\\n        {\\t\\n          \"input\": \"id\",\\n          \"output\": \"uid=1000(pion) gid=1000(pion) groups=1000(pion),4(adm),100(users),112(tmux),988(docker)\",\\n          \"ps1\": \"pion@mindwm-stg1:~/work/dev/mindwm-manager$\",\\n          \"type\": \"org.mindwm.v1.iodocument\"\\n        }\\n        \"\"\"\\n    Then the response http code should be \"202\"\\n    Then the following deployments are in a ready state in the \"context-<context>\" namespace\\n      | Deployment name            |\\n      | iocontext-00001-deployment |\\n    Then the trace with \"<traceparent>\" should appear in TraceQL\\n    And the trace should contains\\n      | service name                    |\\n      | broker-ingress.knative-eventing |\\n      | unknown_service                 |\\n    Then graph have node \"User\" with property \"username\" = \"<username>\" in context \"<context>\"\\n    And graph have node \"Host\" with property \"hostname\" = \"<host>\" in context \"<context>\"\\n    And graph have node \"IoDocument\" with property \"input\" = \"id\" in context \"<context>\"\\n\\n    Examples:\\n     | context | username   | host      | cloudevent_id                        | traceparent \\t\\t\\t\\t\\t         |\\n     | red     | kitty      | tablet    | 442af213-c860-4535-b639-355f13b2d883 | 00-7df92f3577b34da6a3ce930d0e0e4734-00f064aa0ba902b8-00 |\\n\\n\\n  Scenario: Cleanup <username>@<host> in <context>\\n    When God deletes the MindWM host resource \"<host>\"\\n    Then the host \"<host>\" should be deleted\\n\\n    When God deletes the MindWM user resource \"<username>\"\\n\\n    When God deletes the MindWM context resource \"<context>\"\\n\\n    Examples:\\n    | context | username | host        | \\n    | red     | kitty    | tablet      |\\n\\n', media_type='text/x.cucumber.gherkin+plain')","Pickle(id='519', uri='file:features/4_mindwm_io_context.feature', name='io context red', language='en', steps=[PickleStep(argument=None, ast_node_ids=['449'], id='495', type=<Type.context: 'Context'>, text='A MindWM environment'), PickleStep(argument=None, ast_node_ids=['450'], id='496', type=<Type.outcome: 'Outcome'>, text='all nodes in Kubernetes are ready'), PickleStep(argument=None, ast_node_ids=['452', '482'], id='497', type=<Type.action: 'Action'>, text='God creates a MindWM context with the name \"red\"'), PickleStep(argument=None, ast_node_ids=['453', '482'], id='498', type=<Type.outcome: 'Outcome'>, text='the context should be ready and operable'), PickleStep(argument=PickleStepArgument(doc_string=None, data_table=PickleTable(rows=[PickleTableRow(cells=[PickleTableCell(value='Knative service name')]), PickleTableRow(cells=[PickleTableCell(value='iocontext')])])), ast_node_ids=['456', '482'], id='499', type=<Type.outcome: 'Outcome'>, text='the following knative services are in a ready state in the \"context-red\" namespace'), PickleStep(argument=None, ast_node_ids=['457', '482'], id='500', type=<Type.outcome: 'Outcome'>, text='statefulset \"red-neo4j\" in namespace \"context-red\" is in ready state'), PickleStep(argument=None, ast_node_ids=['458', '482'], id='501', type=<Type.action: 'Action'>, text='God creates a MindWM user resource with the name \"kitty\" and connects it to the context \"red\"'), PickleStep(argument=None, ast_node_ids=['459', '482'], id='502', type=<Type.outcome: 'Outcome'>, text='the user resource should be ready and operable'), PickleStep(argument=None, ast_node_ids=['460', '482'], id='503', type=<Type.action: 'Action'>, text='God creates a MindWM host resource with the name \"tablet\" and connects it to the user \"kitty\"'), PickleStep(argument=None, ast_node_ids=['461', '482'], id='504', type=<Type.outcome: 'Outcome'>, text='the host resource should be ready and operable'), PickleStep(argument=None, ast_node_ids=['462', '482'], id='505', type=<Type.action: 'Action'>, text='God creates a new cloudevent'), PickleStep(argument=None, ast_node_ids=['463', '482'], id='506', type=<Type.action: 'Action'>, text='sets cloudevent header \"ce-id\" to \"442af213-c860-4535-b639-355f13b2d883\"'), PickleStep(argument=None, ast_node_ids=['464', '482'], id='507', type=<Type.action: 'Action'>, text='sets cloudevent header \"traceparent\" to \"00-7df92f3577b34da6a3ce930d0e0e4734-00f064aa0ba902b8-00\"'), PickleStep(argument=None, ast_node_ids=['465', '482'], id='508', type=<Type.action: 'Action'>, text='sets cloudevent header \"ce-subject\" to \"id\"'), PickleStep(argument=None, ast_node_ids=['466', '482'], id='509', type=<Type.action: 'Action'>, text='sets cloudevent header \"ce-source\" to \"org.mindwm.kitty.tablet.L3RtcC90bXV4LTEwMDAvZGVmYXVsdA==.09fb195c-c419-6d62-15e0-51b6ee990922.23.36.iodocument\"'), PickleStep(argument=None, ast_node_ids=['467', '482'], id='510', type=<Type.action: 'Action'>, text='sets cloudevent header \"ce-type\" to \"org.mindwm.v1.iodocument\"'), PickleStep(argument=PickleStepArgument(doc_string=PickleDocString(media_type=None, content='{\\t\\n  \"input\": \"id\",\\n  \"output\": \"uid=1000(pion) gid=1000(pion) groups=1000(pion),4(adm),100(users),112(tmux),988(docker)\",\\n  \"ps1\": \"pion@mindwm-stg1:~/work/dev/mindwm-manager$\",\\n  \"type\": \"org.mindwm.v1.iodocument\"\\n}'), data_table=None), ast_node_ids=['468', '482'], id='511', type=<Type.action: 'Action'>, text='sends cloudevent to \"broker-ingress.knative-eventing/context-red/context-broker\"'), PickleStep(argument=None, ast_node_ids=['469', '482'], id='512', type=<Type.outcome: 'Outcome'>, text='the response http code should be \"202\"'), PickleStep(argument=PickleStepArgument(doc_string=None, data_table=PickleTable(rows=[PickleTableRow(cells=[PickleTableCell(value='Deployment name')]), PickleTableRow(cells=[PickleTableCell(value='iocontext-00001-deployment')])])), ast_node_ids=['472', '482'], id='513', type=<Type.outcome: 'Outcome'>, text='the following deployments are in a ready state in the \"context-red\" namespace'), PickleStep(argument=None, ast_node_ids=['473', '482'], id='514', type=<Type.outcome: 'Outcome'>, text='the trace with \"00-7df92f3577b34da6a3ce930d0e0e4734-00f064aa0ba902b8-00\" should appear in TraceQL'), PickleStep(argument=PickleStepArgument(doc_string=None, data_table=PickleTable(rows=[PickleTableRow(cells=[PickleTableCell(value='service name')]), PickleTableRow(cells=[PickleTableCell(value='broker-ingress.knative-eventing')]), PickleTableRow(cells=[PickleTableCell(value='unknown_service')])])), ast_node_ids=['477', '482'], id='515', type=<Type.outcome: 'Outcome'>, text='the trace should contains'), PickleStep(argument=None, ast_node_ids=['478', '482'], id='516', type=<Type.outcome: 'Outcome'>, text='graph have node \"User\" with property \"username\" = \"kitty\" in context \"red\"'), PickleStep(argument=None, ast_node_ids=['479', '482'], id='517', type=<Type.outcome: 'Outcome'>, text='graph have node \"Host\" with property \"hostname\" = \"tablet\" in context \"red\"'), PickleStep(argument=None, ast_node_ids=['480', '482'], id='518', type=<Type.outcome: 'Outcome'>, text='graph have node \"IoDocument\" with property \"input\" = \"id\" in context \"red\"')], tags=[PickleTag(name='@mindwm_io_context', ast_node_id='493'), PickleTag(name='@mindwm_test', ast_node_id='494')], ast_node_ids=['484', '482'])"]}